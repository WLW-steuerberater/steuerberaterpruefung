<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M√ºndliche Pr√ºfungssimulation</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://studio.pickaxe.co/api/embed/bundle.js" defer></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        body { 
            font-family: 'Inter', sans-serif; 
            box-sizing: border-box;
        }
        /* Blocksatz + Silbentrennung f√ºr Musterl√∂sungen */
.musterloesung p,
.musterloesung li,
#solutionModelAnswer p,
#solutionModelAnswer li {
  text-align: justify;
  text-justify: inter-word;   /* bessere Wortabst√§nde */
  hyphens: auto;              /* Silbentrennung (lang="de" ist schon gesetzt) */
}

/* optional: letzte Zeile nicht ‚Äûgezogen‚Äú lassen */
.musterloesung p,
#solutionModelAnswer p {
  text-align-last: left;
}

        .examiner-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(180deg, #6facff, #aacfff);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
            color: white;
            margin: 0 auto 12px;
        }
        
        .timer-circle {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: conic-gradient(#ef4444 0deg, #f3f4f6 0deg);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        
        .timer-inner {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            font-weight: bold;
        }
        
        .question-bubble {
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            border-left: 4px solid #6facff;
            animation: slideIn 0.5s ease-out;
        }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .phase-indicator {
            background: linear-gradient(180deg, #6facff, #aacfff);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
        }
    </style>
</head>
<body class="min-h-screen" style="background: linear-gradient(180deg, #6facff, #aacfff);">
    

    <!-- Main Content -->
    <div class="max-w-6xl mx-auto px-6 py-8">
        
        <!-- Welcome Screen -->
        <div id="welcomeScreen" class="text-center">
            <div class="bg-white rounded-2xl shadow-lg p-8 max-w-2xl mx-auto">
                <h2 class="text-3xl font-bold text-gray-800 mb-4">Willkommen zur Pr√ºfungssimulation 1</h2>
                <!-- Pr√ºfungskommission Vorschau -->
                <div class="mb-6">
                    <!-- Vorsitzender -->
                    <div class="text-center mb-4">
                        <div class="w-24 h-24 mx-auto mb-2 rounded-full overflow-hidden">
                            <img src="https://s1.directupload.eu/images/250829/f5677mip.jpg" alt="Dr. Dumser" class="w-full h-full object-cover" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                            <div class="w-full h-full flex items-center justify-center text-white text-2xl font-bold" style="background: linear-gradient(180deg, #6facff, #aacfff); display: none;">DD</div>
                        </div>
                        <h4 class="font-semibold text-gray-800">Dr. Dumser</h4>
                        <p class="text-sm text-gray-600">Pr√ºfungsvorsitzender</p>
                        
                        <!-- Welcome Audio direkt unter Dr. Dumser -->
                        <div class="mt-4">
                            <audio id="welcomeAudio" controls class="w-full" preload="metadata" autoplay>
                                <source src="https://www.dropbox.com/scl/fi/vsm0a689s3njcc906jpt8/Begr-ung.mp3?rlkey=gcvs86w1n8jwnvt2kzj9jnxj7&st=2vjbux4a&raw=1" type="audio/mpeg">
                                Ihr Browser unterst√ºtzt das Audio-Element nicht.
                            </audio>
                        </div>
                    </div>
                    
                    <!-- Weitere Pr√ºfer -->
                    <div class="grid grid-cols-5 gap-3 max-w-lg mx-auto">
                        <div class="text-center">
                            <div class="w-16 h-16 mx-auto mb-1 rounded-full overflow-hidden">
                                <img src="https://s1.directupload.eu/images/250926/iyqmubkd.jpg" alt="Reinwald" class="w-full h-full object-cover" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                                <div class="w-full h-full flex items-center justify-center text-white text-sm font-bold" style="background: linear-gradient(180deg, #6facff, #aacfff); display: none;">DB</div>
                            </div>
                            <p class="text-xs text-gray-700 font-medium">Reinwald</p>
                            <p class="text-xs text-gray-500"> ESt, IStR, K√∂St, GewSt</p>
                        </div>
                        <div class="text-center">
                            <div class="w-16 h-16 mx-auto mb-1 rounded-full overflow-hidden">
                                <img src="https://s1.directupload.eu/images/250829/zzdffhky.jpg" alt="Dr. Baretti" class="w-full h-full object-cover" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                                <div class="w-full h-full flex items-center justify-center text-white text-sm font-bold" style="background: linear-gradient(180deg, #6facff, #aacfff); display: none;">S</div>
                            </div>
                            <p class="text-xs text-gray-700 font-medium">Dr. Baretti</p>
                            <p class="text-xs text-gray-500"> Berufsrecht, VWL, BWL</p>
                        </div>
                        <div class="text-center">
                            <div class="w-16 h-16 mx-auto mb-1 rounded-full overflow-hidden">
                                <img src="https://s1.directupload.eu/images/250829/qoko6duz.jpg" alt="Wirth" class="w-full h-full object-cover" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                                <div class="w-full h-full flex items-center justify-center text-white text-sm font-bold" style="background: linear-gradient(180deg, #6facff, #aacfff); display: none;">W</div>
                            </div>
                            <p class="text-xs text-gray-700 font-medium">Wirth</p>
                            <p class="text-xs text-gray-500">AO, FGO, ErbSt</p>
                        </div>
                        <div class="text-center">
                            <div class="w-16 h-16 mx-auto mb-1 rounded-full overflow-hidden">
                                <img src="https://s1.directupload.eu/images/250829/8q6up3ep.jpg" alt="Scherf" class="w-full h-full object-cover" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                                <div class="w-full h-full flex items-center justify-center text-white text-sm font-bold" style="background: linear-gradient(180deg, #6facff, #aacfff); display: none;">P</div>
                            </div>
                            <p class="text-xs text-gray-700 font-medium">Scherf</p>
                            <p class="text-xs text-gray-500">USt</p>
                        </div>
                        <div class="text-center">
                            <div class="w-16 h-16 mx-auto mb-1 rounded-full overflow-hidden">
                                <img src="https://s1.directupload.eu/images/250926/mw5zoero.jpg" alt="Priller" class="w-full h-full object-cover" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                                <div class="w-full h-full flex items-center justify-center text-white text-sm font-bold" style="background: linear-gradient(180deg, #6facff, #aacfff); display: none;">R</div>
                            </div>
                            <p class="text-xs text-gray-700 font-medium">Priller</p>
                            <p class="text-xs text-gray-500"> BilSt, UmwSt</p>
                        </div>
                    </div>
                </div>
                
                <!-- Ablauf der Pr√ºfung -->
                <div class="mb-6">
                    <h3 class="text-lg font-semibold text-gray-800 mb-3">Ablauf der Pr√ºfung</h3>
                    <div class="text-left max-w-md mx-auto space-y-2">
                        <div class="flex items-center">
                            <span class="w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold mr-3">1</span>
                            <span class="text-gray-700">Thema ausw√§hlen & 30 Min. vorbereiten</span>
                        </div>
                        <div class="flex items-center">
                            <span class="w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold mr-3">2</span>
                            <span class="text-gray-700">Vortrag halten & direktes Feedback erhalten</span>
                        </div>
                        <div class="flex items-center">
                            <span class="w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold mr-3">3</span>
                            <span class="text-gray-700">Vertiefende Fragen der Pr√ºfungskommission</span>
                        </div>
                    </div>
                </div>
                
                <button onclick="startExam()" class="text-white px-8 py-3 rounded-lg font-semibold transition-colors" style="background: linear-gradient(180deg, #6facff, #aacfff); box-shadow: 0 4px 6px rgba(111, 172, 255, 0.3);" onmouseover="this.style.transform='translateY(-1px)'" onmouseout="this.style.transform='translateY(0)'">
                    Pr√ºfung starten
                </button>
            </div>
        </div>

        <!-- Preparation Phase -->
        <div id="preparationPhase" class="hidden">
            <!-- Restart Button in Preparation Phase -->
            <div class="mb-6 text-right">
                <button onclick="restartExam()" class="text-gray-700 px-4 py-2 rounded-lg font-medium transition-all shadow-md bg-white border border-gray-300 hover:bg-gray-50" onmouseover="this.style.transform='translateY(-1px)'" onmouseout="this.style.transform='translateY(0)'">
                    Simulation neu starten
                </button>
            </div>
            
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Timer -->
                <div class="lg:col-span-1">
                    <div class="bg-white rounded-2xl shadow-lg p-6 text-center sticky top-8">
                        <h3 class="text-xl font-semibold mb-4 text-gray-800">Vorbereitungszeit</h3>
                        <div class="timer-circle mx-auto mb-4" id="timerCircle">
                            <div class="timer-inner" id="timerDisplay">30:00</div>
                        </div>
                        <p class="text-sm text-gray-600">Nutze die Zeit, um deinen Vortrag zu strukturieren</p>
                    </div>
                </div>

                <!-- Topic Selection -->
                <div class="lg:col-span-2">
                    <div class="bg-white rounded-2xl shadow-lg p-6 mb-6">
                        <h3 class="text-xl font-semibold mb-4 text-gray-800">W√§hle dein Vortragsthema</h3>
                        <div class="space-y-3" id="topicOptions">
                            <!-- Topics will be populated by JavaScript -->
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-2xl shadow-lg p-6">
                        <h3 class="text-xl font-semibold mb-4 text-gray-800">Gew√§hltes Thema</h3>
                        <div class="rounded-lg p-4" style="background: linear-gradient(180deg, rgba(111, 172, 255, 0.1), rgba(170, 207, 255, 0.1)); border: 1px solid rgba(111, 172, 255, 0.3);">
                            <p class="text-lg font-medium" style="color: #4a7bb8;" id="selectedTopic">
                                Bitte w√§hle zun√§chst ein Thema aus
                            </p>
                        </div>
                        
                        <div class="mt-6 text-center">
                            <button onclick="skipToExam()" id="proceedButton" disabled class="text-white px-8 py-3 rounded-lg font-semibold transition-all disabled:opacity-50 disabled:cursor-not-allowed" style="background: linear-gradient(180deg, #6facff, #aacfff); box-shadow: 0 4px 6px rgba(111, 172, 255, 0.3);" onmouseover="if(!this.disabled) { this.style.transform='translateY(-1px)' }" onmouseout="this.style.transform='translateY(0)'">
                                Vorbereitung beenden
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Presentation Phase -->
        <div id="presentationPhase" class="hidden">
            <!-- Restart Button in Presentation Phase -->
            <div class="mb-6 text-right">
                <button onclick="restartExam()" class="text-gray-700 px-4 py-2 rounded-lg font-medium transition-all shadow-md bg-white border border-gray-300 hover:bg-gray-50" onmouseover="this.style.transform='translateY(-1px)'" onmouseout="this.style.transform='translateY(0)'">
                    Simulation neu starten
                </button>
            </div>
            
            <!-- Current Examiner -->
            <div class="bg-white rounded-2xl shadow-lg p-6 mb-8">
                <div class="flex items-center justify-between mb-6">
                    <div class="flex items-center">
                        <div class="w-24 h-24 mr-4 rounded-full overflow-hidden">
                            <img src="https://s1.directupload.eu/images/250829/f5677mip.jpg" alt="Dr. Dumser" class="w-full h-full object-cover" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                            <div class="w-full h-full flex items-center justify-center text-white text-2xl font-bold" style="background: linear-gradient(180deg, #6facff, #aacfff); display: none;">DD</div>
                        </div>
                        <div>
                            <h3 class="text-xl font-semibold text-gray-800">Dr. Dumser</h3>
                            <p class="text-gray-600">Pr√ºfungsvorsitzender</p>
                        </div>
                    </div>
                </div>

                <!-- Current Question -->
                <div class="question-bubble rounded-lg p-6 mb-6" id="presentationQuestionContainer">
                    <div class="mb-3">
                        <p class="text-lg text-gray-800" id="presentationQuestion">
Ich hoffe Sie konnten die Vorbereitungszeit gut nutzen. Beginnen wir jetzt mit Ihrem Vortrag. Bitte stellen Sie sich zun√§chst vor. Nennen Sie am Anfang das Thema, f√ºr das Sie sich entschieden haben. Sie k√∂nnen Ihren Vortrag unten eingeben. Nutzen Sie gerne die Diktierfunktion Ihres Handys, damit Sie das Sprechen √ºben. Anschlie√üend senden Sie Ihren Vortrag ab. Unsere k√ºnstliche Intelligenz bewertet ihn und gibt Ihnen Tipps. Unten k√∂nnen Sie einen Timer nutzen, die Musterl√∂sung aufrufen oder mit den Pr√ºfungsrunden starten.                        </p>
                    </div>
                    
                    <!-- Audio Player for Dr. Dumser -->
                    <div id="presentationAudioPlayer" class="mt-4">
                        <audio id="presentationAudio" controls class="w-full" preload="metadata">
                            <source src="https://www.dropbox.com/scl/fi/xrkxtywr0p376riknh47b/Vortrag.mp3?rlkey=nke47ekt6d8v7vj7tyhdaox3y&st=lyfjd7f3&raw=1" type="audio/mpeg">
                            Ihr Browser unterst√ºtzt das Audio-Element nicht.
                        </audio>
                    </div>
                </div>

                <!-- Response Area -->
                <div class="mb-6" id="presentationResponseArea">
                    <!-- Chat Widget for Presentation -->
                    <div id="presentationChatWidget">
                        <div class="flex justify-between items-center mb-2">
                            <label class="block text-sm font-medium text-gray-700">Ihr Vortrag an Dr. Dumser:</label>
                        </div>
                        <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                            <div id="deployment-dbb15733-7d3c-44d6-98f1-132687e95879"></div>
                        </div>
                    </div>
                </div>

                <!-- Presentation Timer -->
                <div class="bg-gray-50 rounded-lg p-4 mb-6 text-center">
                    <h4 class="text-sm font-medium text-gray-700 mb-2">Vortragszeit</h4>
                    <div class="text-2xl font-bold" style="color: #6facff;" id="presentationTimer">00:00</div>
                    <div class="flex justify-center gap-2 mt-3">
                        <button onclick="startPresentationTimer()" id="startTimerBtn" class="px-3 py-1 bg-green-500 hover:bg-green-600 text-white rounded text-sm font-medium transition-colors">
                            Start
                        </button>
                        <button onclick="pausePresentationTimer()" id="pauseTimerBtn" class="px-3 py-1 bg-yellow-500 hover:bg-yellow-600 text-white rounded text-sm font-medium transition-colors" disabled>
                            Pause
                        </button>
                        <button onclick="resetPresentationTimer()" id="resetTimerBtn" class="px-3 py-1 bg-gray-500 hover:bg-gray-600 text-white rounded text-sm font-medium transition-colors">
                            Reset
                        </button>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="flex gap-4">
                    <button onclick="finishPresentation()" class="text-white px-6 py-2 rounded-lg font-medium transition-all" style="background: linear-gradient(180deg, #6facff, #aacfff); box-shadow: 0 2px 4px rgba(111, 172, 255, 0.3);" onmouseover="this.style.transform='translateY(-1px)'; this.style.boxShadow='0 4px 8px rgba(111, 172, 255, 0.4)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 4px rgba(111, 172, 255, 0.3)'">
                        Pr√ºfungsrunden starten
                    </button>
                    <button onclick="showSampleSolution()" class="bg-gray-100 hover:bg-gray-200 text-gray-700 px-6 py-2 rounded-lg font-medium transition-colors">
                        Musterl√∂sung
                    </button>
                </div>
            </div>
        </div>

        <!-- Transition Phase -->
        <div id="transitionPhase" class="hidden">
            <!-- Restart Button in Transition Phase -->
            <div class="mb-6 text-right">
                <button onclick="restartExam()" class="text-gray-700 px-4 py-2 rounded-lg font-medium transition-all shadow-md bg-white border border-gray-300 hover:bg-gray-50" onmouseover="this.style.transform='translateY(-1px)'" onmouseout="this.style.transform='translateY(0)'">
                    Simulation neu starten
                </button>
            </div>
            
            <div class="bg-white rounded-2xl shadow-lg p-6 mb-8 text-center">
                <div class="flex items-center justify-center mb-6">
                    <div class="w-24 h-24 mr-4 rounded-full overflow-hidden">
                        <img src="https://s1.directupload.eu/images/250829/f5677mip.jpg" alt="Dr. Dumser" class="w-full h-full object-cover" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                        <div class="w-full h-full flex items-center justify-center text-white text-2xl font-bold" style="background: linear-gradient(180deg, #6facff, #aacfff); display: none;">DD</div>
                    </div>
                    <div>
                        <h3 class="text-xl font-semibold text-gray-800">Dr. Dumser</h3>
                        <p class="text-gray-600">Pr√ºfungsvorsitzender</p>
                    </div>
                </div>

                <!-- Transition Message -->
                <div class="question-bubble rounded-lg p-6 mb-6">
                    <div class="mb-3">
                        <p class="text-lg text-gray-800">
                            Vielen Dank f√ºr Ihren Vortrag. Wir starten nun mit dem Pr√ºfungsgespr√§ch. Die Pr√ºfer werden Ihnen in ihren jeweiligen Fachgebieten Fragen stellen. Bitte beantworten Sie diese.
                        </p>
                    </div>
                    
                    <!-- Audio Player for Transition -->
                    <div class="mt-4">
                        <audio id="transitionAudio" controls class="w-full" preload="metadata">
                            <source src="https://www.dropbox.com/scl/fi/tam9erb3h0twz8e1yll2s/ElevenLabs_2025-10-28T12_16_07_Felix-Serenitas_pvc_sp97_s48_sb69_v3.mp3?rlkey=gwgq3heh1ivorfnphsihgfev0&st=fozqv7p9&raw=1" type="audio/mpeg">
                            Ihr Browser unterst√ºtzt das Audio-Element nicht.
                        </audio>
                    </div>
                </div>

                <!-- Action Button -->
                <div class="mt-6">
                    <button onclick="startExamQuestions()" class="text-white px-8 py-3 rounded-lg font-semibold transition-all" style="background: linear-gradient(180deg, #6facff, #aacfff); box-shadow: 0 4px 6px rgba(111, 172, 255, 0.3);" onmouseover="this.style.transform='translateY(-1px)'" onmouseout="this.style.transform='translateY(0)'">
                        Pr√ºfungsgespr√§ch beginnen
                    </button>
                </div>
            </div>
        </div>

        <!-- Exam Phase -->
        <div id="examPhase" class="hidden">
            <!-- Restart Button in Exam Phase -->
            <div class="mb-6 text-right">
                <button onclick="restartExam()" class="text-gray-700 px-4 py-2 rounded-lg font-medium transition-all shadow-md bg-white border border-gray-300 hover:bg-gray-50" onmouseover="this.style.transform='translateY(-1px)'" onmouseout="this.style.transform='translateY(0)'">
                    Simulation neu starten
                </button>
            </div>
            
            <!-- Current Examiner -->
            <div class="bg-white rounded-2xl shadow-lg p-6 mb-8">
                <div class="flex items-center justify-between mb-6">
                    <div class="flex items-center">
                        <div id="currentExaminerAvatar" class="examiner-avatar mr-4">DB</div>
                        <div>
                            <h3 class="text-xl font-semibold text-gray-800" id="currentExaminerName">Dr. Baretti</h3>
                            <p class="text-gray-600" id="currentExaminerField">Fachbereich: VWL & BWL</p>
                        </div>
                    </div>
                    <div class="text-right">
                        <div class="text-sm text-gray-500">Pr√ºfer</div>
                        <div class="text-2xl font-bold" style="color: #6facff;" id="examinerProgress">1 / 6</div>
                    </div>
                </div>

                <!-- Current Question -->
                <div class="question-bubble rounded-lg p-6 mb-6" id="questionContainer">
                    <div class="mb-3">
                        <p class="text-lg text-gray-800" id="currentQuestion">
                            Bitte stellen Sie sich zun√§chst vor und beginnen Sie mit Ihrem Vortrag zum Thema "Die Auswirkungen der Digitalisierung auf moderne Arbeitspl√§tze".
                        </p>
                    </div>
                    
                    <!-- Audio Player for Dr. Schmidt -->
                    <div id="audioPlayer" class="mt-4 hidden">
                        <audio id="drSchmidtAudio" controls class="w-full" preload="metadata">
                            <source src="https://www.dropbox.com/scl/fi/jq9xlnehbcna73rvyyvej/ElevenLabs_2025-09-24T09_36_17_Liam_pre_sp100_s50_sb75_v3.mp3?rlkey=r7vgyfxqeqrmszlvbcqpe2kxw&raw=1" type="audio/mpeg">
                            Ihr Browser unterst√ºtzt das Audio-Element nicht.
                        </audio>
                    </div>
                </div>

                <!-- Response Area -->
                <div class="mb-6" id="responseArea">
                    <!-- Chat Widget for Dr. Baretti -->
                    <div id="chatWidget" class="hidden">
                        <!-- Text area for Dr. Baretti -->
                        <div class="flex justify-between items-center mb-2">
                            <label class="block text-sm font-medium text-gray-700">Ihre Antwort an Dr. Baretti:</label>
                            <div class="flex gap-2">
                                <button 
                                    onclick="clearBarettiResponse()" 
                                    class="px-3 py-1 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg text-sm font-medium transition-colors"
                                >
                                    L√∂schen
                                </button>
                            </div>
                        </div>
                        <textarea 
                            id="barettiResponse" 
                            placeholder="Geben Sie hier Ihre Antwort an Dr. Baretti ein..."
                            class="w-full h-32 p-4 border border-gray-200 rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                        ></textarea>
                    </div>
                    
                    <!-- Standard Text Area for other examiners -->
                    <div id="standardResponse">
                        <div class="flex justify-between items-center mb-2">
                            <label class="block text-sm font-medium text-gray-700">Ihre Antwort:</label>
                            <div class="flex gap-2">
                                <button 
                                    onclick="clearResponse()" 
                                    class="px-3 py-1 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg text-sm font-medium transition-colors"
                                >
                                    L√∂schen
                                </button>
                            </div>
                        </div>
                        <textarea 
                            id="currentResponse" 
                            placeholder="Geben Sie hier Ihre Antwort ein..."
                            class="w-full h-32 p-4 border border-gray-200 rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                        ></textarea>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="flex gap-4">
                    <button onclick="nextQuestion()" class="text-white px-6 py-2 rounded-lg font-medium transition-all" style="background: linear-gradient(180deg, #6facff, #aacfff); box-shadow: 0 2px 4px rgba(111, 172, 255, 0.3);" onmouseover="this.style.transform='translateY(-1px)'; this.style.boxShadow='0 4px 8px rgba(111, 172, 255, 0.4)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 4px rgba(111, 172, 255, 0.3)'">
                        Antwort abgeben & L√∂sung anzeigen
                    </button>
                </div>
            </div>

            <!-- Examiner Overview -->
            <div class="bg-white rounded-2xl shadow-lg p-6">
                <h3 class="text-lg font-semibold mb-4 text-gray-800">Pr√ºfungskommission</h3>
                <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4" id="examinerGrid">
                    <!-- Examiners will be populated by JavaScript -->
                </div>
            </div>
        </div>

        <!-- Solution Phase -->
        <div id="solutionPhase" class="hidden">
            <!-- Restart Button in Solution Phase -->
            <div class="mb-6 text-right">
                <button onclick="restartExam()" class="text-gray-700 px-4 py-2 rounded-lg font-medium transition-all shadow-md bg-white border border-gray-300 hover:bg-gray-50" onmouseover="this.style.transform='translateY(-1px)'" onmouseout="this.style.transform='translateY(0)'">
                    Simulation neu starten
                </button>
            </div>
            
            <div class="bg-white rounded-2xl shadow-lg p-6 mb-8">
                <div class="flex items-center justify-between mb-6">
                    <div class="flex items-center">
                        <div id="solutionExaminerAvatar" class="examiner-avatar mr-4">DB</div>
                        <div>
                            <h3 class="text-xl font-semibold text-gray-800" id="solutionExaminerName">Dr. Baretti</h3>
                            <p class="text-gray-600" id="solutionExaminerField">Fachbereich: VWL & BWL</p>
                        </div>
                    </div>
                    <div class="text-right">
                        <div class="text-sm text-gray-500">Pr√ºfer</div>
                        <div class="text-2xl font-bold" style="color: #6facff;" id="solutionExaminerProgress">1 / 6</div>
                    </div>
                </div>

                <!-- Question -->
                <div class="bg-gray-50 rounded-lg p-4 mb-6">
                    <h4 class="text-sm font-medium text-gray-700 mb-2">Frage:</h4>
                    <p class="text-gray-800" id="solutionQuestion">Welche konkreten Vorteile sehen Sie in der Digitalisierung f√ºr Unternehmen?</p>
                </div>

                <!-- Your Answer -->
                <div class="bg-blue-50 rounded-lg p-4 mb-6">
                    <h4 class="text-sm font-medium text-blue-700 mb-2">Ihre Antwort:</h4>
                    <p class="text-blue-800" id="solutionYourAnswer">Ihre Antwort wird hier angezeigt...</p>
                </div>

                <!-- Model Solution -->
                <div class="bg-gray-50 rounded-lg p-4 mb-6">
                    <h4 class="text-sm font-medium text-gray-700 mb-2">Musterl√∂sung:</h4>
                    <div class="text-gray-800" id="solutionModelAnswer">
                        <p class="mb-3"><strong>Hauptvorteile der Digitalisierung f√ºr Unternehmen:</strong></p>
                        <ul class="list-disc list-inside space-y-2">
                            <li><strong>Effizienzsteigerung:</strong> Automatisierung wiederkehrender Prozesse reduziert Arbeitsaufwand und Fehlerquoten</li>
                            <li><strong>Kostensenkung:</strong> Langfristige Einsparungen durch optimierte Abl√§ufe und reduzierte Personalkosten</li>
                            <li><strong>Verbesserte Datenanalyse:</strong> Bessere Entscheidungsgrundlagen durch datengetriebene Insights</li>
                            <li><strong>Erh√∂hte Flexibilit√§t:</strong> Schnellere Anpassung an Marktver√§nderungen und Kundenbed√ºrfnisse</li>
                            <li><strong>Neue Gesch√§ftsmodelle:</strong> Erschlie√üung digitaler M√§rkte und Services</li>
                            <li><strong>Verbesserte Kundenerfahrung:</strong> 24/7 Verf√ºgbarkeit und personalisierte Services</li>
                        </ul>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="flex gap-4">
                    <button onclick="continueToNextQuestion()" class="text-white px-6 py-2 rounded-lg font-medium transition-all" style="background: linear-gradient(180deg, #6facff, #aacfff); box-shadow: 0 2px 4px rgba(111, 172, 255, 0.3);" onmouseover="this.style.transform='translateY(-1px)'; this.style.boxShadow='0 4px 8px rgba(111, 172, 255, 0.4)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 4px rgba(111, 172, 255, 0.3)'">
                        Weiter zur n√§chsten Frage
                    </button>
                    <button onclick="backToQuestion()" class="bg-gray-100 hover:bg-gray-200 text-gray-700 px-6 py-2 rounded-lg font-medium transition-colors">
                        Zur√ºck zur Frage
                    </button>
                </div>
            </div>

            <!-- Examiner Overview -->
            <div class="bg-white rounded-2xl shadow-lg p-6">
                <h3 class="text-lg font-semibold mb-4 text-gray-800">Pr√ºfungskommission</h3>
                <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4" id="solutionExaminerGrid">
                    <!-- Examiners will be populated by JavaScript -->
                </div>
            </div>
        </div>

        <!-- Results Phase -->
        <div id="resultsPhase" class="hidden">
            <div class="bg-white rounded-2xl shadow-lg p-8 text-center max-w-2xl mx-auto">
                <div class="text-6xl mb-6">üéâ</div>
                <h2 class="text-3xl font-bold text-gray-800 mb-4">Pr√ºfung abgeschlossen!</h2>
                <p class="text-gray-600 mb-6">
                    Sie haben erfolgreich alle Fragen der 6 Pr√ºfer beantwortet. 
                    In einer echten Pr√ºfung w√ºrden Sie nun das Ergebnis erfahren.
                </p>
                <div class="bg-green-50 border border-green-200 rounded-lg p-4 mb-6">
                    <p class="text-green-800 font-medium">
                        Simulation erfolgreich durchgef√ºhrt! 
                        Sie haben wertvolle Pr√ºfungserfahrung gesammelt.
                    </p>
                </div>
                <button onclick="restartExam()" class="text-white px-8 py-3 rounded-lg font-semibold transition-all" style="background: linear-gradient(180deg, #6facff, #aacfff); box-shadow: 0 4px 6px rgba(111, 172, 255, 0.3);" onmouseover="this.style.transform='translateY(-1px)'" onmouseout="this.style.transform='translateY(0)'">
                    Neue Simulation starten
                </button>
            </div>
        </div>
    </div>

    <script>
        // ========================================
        // BEARBEITBARER BEREICH: VORTRAGSTHEMEN
        // ========================================
        // Hier k√∂nnen Sie alle Vortragsthemen nach Kategorien bearbeiten
        
        const topicsByCategory = {
            // Gruppe 1: ESt, BilSt, etc
            "Einkommensteuer": [
                "Steuerliche Behandlung von Trinkgeldern"
            ],
            // Gruppe 2: AO, BGB, etc
            "Abgabenordnung": [
                "Die tats√§chliche Verst√§ndigung im Besteuerungsverfahren"
            ],
            
            // Gruppe 3: Spezialgebiete
            "Bilanzsteuer": [
                " Bilanzrechtliche Darstellung der Sachgr√ºndung einer Personengesellschaft und ihre steuerrechtlichen Auswirkungen"
            ]
        };

        // ========================================
        // BEARBEITBARER BEREICH: MUSTERL√ñSUNGEN
        // ========================================
        // Hier k√∂nnen Sie die Musterl√∂sungen f√ºr die Vortr√§ge bearbeiten
        
        const presentationSolutions = {
            // Allgemeine Struktur f√ºr alle Themen
            general: {
                introduction: {
                    title: "1. Einleitung (2-3 Minuten)",
                    points: [
                        "<strong>Begr√º√üung:</strong> \"Sehr geehrte Damen und Herren der Pr√ºfungskommission...\"",
                        "<strong>Themennennung:</strong> Klare Benennung des gew√§hlten Themas",
                        "<strong>Gliederung:</strong> Kurze √úbersicht √ºber die Struktur des Vortrags",
                        "<strong>Relevanz:</strong> Warum ist dieses Thema f√ºr Steuerberater wichtig?"
                    ]
                },
                mainPart: {
                    title: "2. Hauptteil (8-10 Minuten)",
                    points: [
                        "<strong>Grundlagen:</strong> Definition und rechtliche Einordnung",
                        "<strong>Aktuelle Rechtslage:</strong> Relevante Gesetze, Verordnungen, BMF-Schreiben",
                        "<strong>Praktische Anwendung:</strong> Konkrete Beispiele aus der Beratungspraxis",
                        "<strong>Problembereiche:</strong> H√§ufige Streitpunkte und Unsicherheiten",
                        "<strong>Rechtsprechung:</strong> Wichtige BFH-Urteile und deren Auswirkungen"
                    ]
                },
                conclusion: {
                    title: "3. Schluss (2-3 Minuten)",
                    points: [
                        "<strong>Zusammenfassung:</strong> Die wichtigsten Punkte nochmals kurz",
                        "<strong>Ausblick:</strong> Zuk√ºnftige Entwicklungen oder geplante √Ñnderungen",
                        "<strong>Beratungshinweise:</strong> Was sollten Mandanten beachten?",
                        "<strong>Abschluss:</strong> \"Vielen Dank f√ºr Ihre Aufmerksamkeit\""
                    ]
                }
            },
            
// Spezifische Musterl√∂sungen f√ºr einzelne Themen (optional)
specific: {
    // Beispiel f√ºr ein spezifisches Thema:
    "Steuerliche Behandlung von Trinkgeldern": {
        Gliederung: {
            title: "Gliederung",
            points: [
                "<strong>Begr√º√üung und Thema:</strong> Die Kleinunternehmerregelung nach ¬ß 19 UStG",
                "<strong>Bedeutung:</strong> Vereinfachung f√ºr kleine Unternehmen",
                "<strong>Gliederung:</strong> Voraussetzungen, Vor-/Nachteile, Verzichtsm√∂glichkeit"
            ]
        },

        introduction: {
            title: "Einleitung",
            points: [
                "<strong>Begr√º√üung und Thema:</strong> Die Kleinunternehmerregelung nach ¬ß 19 UStG",
                "<strong>Bedeutung:</strong> Vereinfachung f√ºr kleine Unternehmen",
                "<strong>Gliederung:</strong> Voraussetzungen, Vor-/Nachteile, Verzichtsm√∂glichkeit"
            ]
        },
        mainPart: {
            title: "2. Hauptteil - Kleinunternehmerregelung",
            points: [
                "<strong>Umsatzgrenzen:</strong> 22.000 ‚Ç¨ Vorjahr, 50.000 ‚Ç¨ laufendes Jahr",
                "<strong>Steuerbefreiung:</strong> Keine USt auf Ausgangsrechnungen",
                "<strong>Kein Vorsteuerabzug:</strong> Wichtiger Nachteil bei hohen Investitionen",
                "<strong>Verzichtsm√∂glichkeit:</strong> Regelbesteuerung f√ºr 5 Jahre bindend",
                "<strong>Rechnungsangaben:</strong> Pflichthinweis auf Steuerbefreiung"
            ]
        },
        conclusion: {
            title: "3. Schluss - Kleinunternehmerregelung",
            points: [
                "<strong>Beratungshinweis:</strong> Individuelle Pr√ºfung der Vor- und Nachteile",
                "<strong>Grenz√ºberschreitung:</strong> Automatischer Wechsel zur Regelbesteuerung",
                "<strong>Dokumentation:</strong> Sorgf√§ltige Umsatz√ºberwachung erforderlich"
            ]
        }
    },

    // NEU hinzugef√ºgt: Musterl√∂sung f√ºr Probe
    "Probe": {
        introduction: {
            title: "1. Einleitung ‚Äì Probe",
            points: [
                "<strong>Begr√º√üung & Thema:</strong> Vorstellung des Themas 'Probe'",
                "<strong>Relevanz:</strong> Warum dieses Thema wichtig ist",
                "<strong>Gliederung:</strong> √úbersicht √ºber den Aufbau des Vortrags"
            ]
        },
        mainPart: {
            title: "2. Hauptteil ‚Äì Probe",
            points: [
                "<strong>Grundlagen:</strong> Definition und Einordnung",
                "<strong>Praxis:</strong> Beispiele oder typische Anwendungsf√§lle",
                "<strong>Probleme:</strong> Herausforderungen und L√∂sungsans√§tze"
            ]
        },
        conclusion: {
            title: "3. Schluss ‚Äì Probe",
            points: [
                "<strong>Zusammenfassung:</strong> Wichtigste Aussagen kurz wiederholen",
                "<strong>Ausblick:</strong> Wohin die Entwicklung geht",
                "<strong>Abschluss:</strong> ‚ÄûVielen Dank f√ºr Ihre Aufmerksamkeit.‚Äú"
            ]
        }
    }
    // Weitere spezifische Themen k√∂nnen hier hinzugef√ºgt werden...
}
};
        // ========================================
        // ENDE DES BEARBEITBAREN BEREICHS
        // ========================================

        // Function to stop all audio elements
        function stopAllAudio() {
            const audioElements = document.querySelectorAll('audio');
            audioElements.forEach(audio => {
                if (!audio.paused) {
                    audio.pause();
                    audio.currentTime = 0;
                }
            });
        }
// Sicherer Phasenwechsel ohne Header
function setPhase(text) {
    const el = document.getElementById('phaseIndicator');
    if (el) el.textContent = text;
}

        let selectedTopicText = '';

        // Exam data with solutions
        const examinerData = [
                       {
                name: "Dr. Dumser",
                field: "BGB, HGB, InsO, EuropaR",
                avatar: "DD",
                image: "https://s1.directupload.eu/images/250829/f5677mip.jpg",
                rounds: [
                    [
                        {
                            question: "Starten wir ganz allgemein: Welche gro√üen Rechtsgebiete gibt es im deutschen Recht? Und worin unterscheiden sich diese Bereiche voneinander?",
                            audio: "https://www.dropbox.com/scl/fi/ajzr8jbucgurv67wr7p8q/ElevenLabs_2025-10-26T10_22_01_Felix-Serenitas_pvc_sp97_s48_sb69_v3.mp3?rlkey=fe1hcpz1lvoogl54ji7wh61d9&st=smgtro2s&raw=1",
                            solution: "Das **deutsche Recht** kann unterteilt werden in das **√∂ffentliche Recht** und das **Privat- bzw. Zivilrecht**.\n\nDas **√∂ffentliche Recht** ist gepr√§gt von einem **√úber-Unterordnungsverh√§ltnis zwischen Staat und B√ºrger**, wie z. B. im **Baurecht**, **Kommunalrecht**, **Immissionsschutzrecht** oder **Steuerrecht**.\n\nDemgegen√ºber regelt das **Zivilrecht** die **Rechtsbeziehungen der Menschen untereinander**, also von **Individuen auf gleicher Stufe**.\nZum Zivilrecht z√§hlen insbesondere das **Vertragsrecht**, das **Sachenrecht** und das **Erbrecht**."
                        },
                        {
                            question: "Daran anschlie√üend: Welche Gerichtsbarkeiten unterscheidet man in Deutschland?",
                            audio: "https://www.dropbox.com/scl/fi/jqgdd8c5qc9a5iqyq3pfb/ElevenLabs_2025-10-26T10_22_34_Felix-Serenitas_pvc_sp97_s48_sb69_v3.mp3?rlkey=zgcs0jutmhskigjd5nvho3g97&st=kouikh6c&raw=1",
                            solution: "F√ºr **Streitigkeiten auf dem Gebiet des Privatrechts** sind die sog. **ordentlichen Gerichte** zust√§ndig.\n**Streitigkeiten auf dem Gebiet des √∂ffentlichen Rechts** werden vor den **Verwaltungsgerichten**, den **Sozialgerichten** oder den **Finanzgerichten** ausgetragen."
                        },
                        {
                            question: "Bei einem Zivilprozess k√∂nnen alle rechtsf√§higen Personen Kl√§ger oder Beklagter sein. Man spricht von der sogenannten Parteif√§higkeit. Auch juristische Personen k√∂nnen rechtsf√§hig sein K√∂nnen Sie mir bitte Beispiele f√ºr juristische Personen des Privatrechts nennen und erkl√§ren, wie diese ihre Rechtsf√§higkeit erlangen? Nennen Sie mir au√üerdem die Grundform der juristischen Person des privaten Rechts im BGB.",
                            audio: "https://www.dropbox.com/scl/fi/m8h0zp41h0dvhzg3bhe3r/ElevenLabs_2025-10-26T10_23_03_Felix-Serenitas_pvc_sp97_s48_sb69_v3.mp3?rlkey=372a18jxdyt0dr32fxvsetv2x&st=thcnjz9x&raw=1",
                            solution: "**Juristische Personen des Privatrechts** sind z. B. **SE**, **AG**, **GmbH**, **KGaA**, **eingetragene Genossenschaften**, **rechtsf√§hige Vereine**, **rechtsf√§hige Stiftungen** usw.\nSie erlangen ihre **Rechtsf√§higkeit durch Eintragung** in ein bei einem Gericht gef√ºhrtes **Register** (z. B. **Handelsregister**, **Vereinsregister**).\nGrundform der juristischen Person des privaten Rechts ist der **eingetragene Verein (e. V.)**. Er findet sich in den **¬ß¬ß 21 ff. BGB**."
                        },
                        {
                            question: "Juristische Personen k√∂nnen also rechtsf√§hig sein. Wie ist das bei den Personengesellschaften ‚Äì sind diese ebenfalls rechtsf√§hig?",
                            audio: "https://www.dropbox.com/scl/fi/p1lk1h8wwgpqntp3dbm0q/ElevenLabs_2025-10-26T10_24_36_Felix-Serenitas_pvc_sp97_s48_sb69_v3.mp3?rlkey=faoca2ms0kt0rmy9ibr2gli2x&st=7m14nzr4&raw=1",
                            solution: "Diese Frage ist **aus heutiger Sicht zu bejahen**.\nVor dem **01.01.2024** waren **Personengesellschaften** nur als **(teil-)rechtsf√§hig** anerkannt, vgl. **¬ß 124 HGB a.F.** Dies galt v. a. f√ºr die **OHG**, **KG**, **PartG**, **PartG mbB** und die **(Au√üen-)GbR**.\n\nDurch das zum **01.01.2024** in Kraft getretene **Personengesellschaftsrechtsmodernisierungsgesetz (MoPeG)** kam es insoweit zu einer **einschneidenden Ver√§nderung**: In **¬ß 705 Abs. 2 BGB n.F.** wird die **Rechtsf√§higkeit der GbR anerkannt** und eine entsprechende **Definition der rechtsf√§higen Gesellschaft** aufgenommen.\nNach **¬ß 705 Abs. 2 BGB n.F.** kann eine **GbR** als solche ‚Äû**selber Rechte erwerben und Verbindlichkeiten eingehen, wenn sie nach dem gemeinsamen Willen der Gesellschafter am Rechtsverkehr teilnehmen soll**‚Äú.\n\nGleiches gilt ab dem Beginn des Jahres 2024 auch f√ºr die **OHG**.\nIn **¬ß 105 Abs. 2 HGB n.F.** hei√üt es hierzu nun: ‚Äû**Die offene Handelsgesellschaft kann Rechte erwerben und Verbindlichkeiten eingehen.**‚Äú Dies gilt √ºber **¬ß 161 Abs. 2 HGB** sodann auch f√ºr die **KG**."
                        }
                    ]
                ]
            },           
{
                name: "Scherf",
                field: "Umsatzsteuer",
                avatar: "W",
                image: "https://s1.directupload.eu/images/250829/8q6up3ep.jpg",
                rounds: [
                    [
                        {
                            question: "Kommen wir nun zur Umsatzsteuer. Zun√§chst eine Einordnungsfrage: Wie kann die Umsatzsteuer im Steuersystem eingeordnet werden? Und um was f√ºr eine Steuer handelt es sich dabei genau? Bitte erl√§utern Sie mir kurz die einzelnen Begriffe, die dabei eine Rolle spielen.",
                            audio: "https://www.dropbox.com/scl/fi/6y16rzjday1yyb5zs6b39/1.d.1.mp3?rlkey=q5r0vs4d8o4qvbfjlpd935u87&st=0rwyhy78&raw=1",
                            solution: "Die **Umsatzsteuer** ist eine **indirekte Steuer**, da **Steuerschuldner** in der Regel der **leistende Unternehmer** ist und **Steuertr√§ger** der **Endverbraucher**.\nDaneben ist die Umsatzsteuer eine **Gemeinschaftsteuer**, da das Steueraufkommen **Bund, L√§ndern und Gemeinden** zusteht.\nAu√üerdem ist die Umsatzsteuer eine **Objektsteuer**, da **pers√∂nliche Verh√§ltnisse keine Rolle spielen**.\nAuch eine **Verkehrsteuer** ist die Umsatzsteuer, da sie **an den wirtschaftlichen Verkehr** bzw. **an Rechtsgesch√§fte** ankn√ºpft.\nDie Umsatzsteuer, insbesondere die **Einfuhrumsatzsteuer**, hat **Verbrauchsteuercharakter**, da sie den **Endverbrauch besteuert**.\nUnter **Verbrauchsteuern** werden √ºblicherweise Steuern auf den **Aufwand f√ºr den Verbrauch oder Gebrauch eines Gegenstandes** oder die **Inanspruchnahme von Dienstleistungen** verstanden."
                        },
                        {
                            question: " Jetzt ein etwas aktuelleres Thema: Unterliegen ‚ÄûDonations‚Äú von Streamern der Umsatzsteuer? Wie w√ºrden Sie das umsatzsteuerlich beurteilen?",
                            audio: "https://www.dropbox.com/scl/fi/9tf3bvp17e581c69aa5dl/1.d.2.mp3?rlkey=zl8o15h8r3aa2ag2a7ak5o240&st=ku9rsee1&raw=1",
                            solution: "Ein **Streamer**, der mit einem **eigenen Kanal auf einer Streamingplattform** als Teilnehmer an **Computer-/Videorollenspielen** agiert und dabei **freiwillige Geldzuwendungen (sog. Donations)** von Zuschauern vereinnahmt, erbringt **steuerbare und steuerpflichtige sonstige Leistungen** gem. **¬ß 3 Abs. 9 S. 1 UStG**.\nDas **FG D√ºsseldorf** hat das mit **Urteil vom 04.03.2022** festgestellt.\nDamit unterliegen derartige, **freiwillige Geldzuwendungen f√ºr die Unterhaltungsleistung des Streamers** der **Umsatzsteuer**."                    
                        },
                        {
                            question: " Nochmal ein Themenwechsel: Vielleicht nennen Sie mir mal drei F√§lle, in denen das Halten einer Beteiligung dem unternehmerischen Bereich zugeordnet werden kann.",
                            audio: "https://www.dropbox.com/scl/fi/pregoos6f9qampdp5ze2t/1.d.3.mp3?rlkey=sca6bjv9z3rwqh66g647di5dv&st=s2lhcez5&raw=1",
                            solution: "Das **Erwerben, Halten und Ver√§u√üern einer gesellschaftsrechtlichen Beteiligung** stellt gem. **Abschnitt 2.3 Abs. 3 S. 5 Umsatzsteuer-Anwendungserlass** nur dann eine **unternehmerische T√§tigkeit** dar,\n‚Ä¢ soweit **Beteiligungen im Sinne eines gewerblichen Wertpapierhandels** gewerbsm√§√üig erworben und ver√§u√üert werden und dadurch eine **nachhaltige, auf Einnahmeerzielungsabsicht gerichtete T√§tigkeit** entfaltet wird, oder\n‚Ä¢ wenn die **Beteiligung nicht um ihrer selbst willen gehalten** wird, sondern der **F√∂rderung einer bestehenden oder beabsichtigten unternehmerischen T√§tigkeit** (z. B. **Sicherung g√ºnstiger Einkaufskonditionen**, **Verschaffung von Einfluss bei potenziellen Konkurrenten**, **Sicherung g√ºnstiger Absatzkonditionen**) dient, oder\n‚Ä¢ wenn **unmittelbar in die Verwaltung der Gesellschaften**, an denen die Beteiligung besteht, **eingegriffen** wird. Die Eingriffe m√ºssen dabei zwingend durch **unternehmerische Leistungen** erfolgen, z. B. durch das **entgeltliche Erbringen von administrativen, finanziellen, kaufm√§nnischen und technischen Dienstleistungen** an die jeweilige Beteiligungsgesellschaft."
                        },
                        {
                            question: " Ich habe geh√∂rt es gibt irgendeine elektronische Schnittstelle. Was hat es umsatzsteuerlich mit dieser elektronischen Schnittstelle auf sich?",
                            audio: "https://www.dropbox.com/scl/fi/19sq40p64uc68vdmfwq85/1.d.4.mp3?rlkey=cdv9ih6ft1u3sixvnomvjk1ht&st=jrpn6mop&raw=1",
                            solution: "Hintergrund ist folgendes: Ein **Unternehmer**, der mittels seiner **elektronischen Schnittstelle** die **Lieferung eines Gegenstands**, dessen **Bef√∂rderung oder Versendung im Gemeinschaftsgebiet beginnt und endet**, durch einen **nicht im Gemeinschaftsgebiet ans√§ssigen Unternehmer** an einen **Empf√§nger nach ¬ß 3a Abs. 5 S. 1 UStG** unterst√ºtzt, wird nach **¬ß 3 Abs. 3a S. 1 UStG** so behandelt, als ob er diesen Gegenstand f√ºr sein Unternehmen **selbst erhalten und geliefert** h√§tte.\nDamit wird eine **elektronische Schnittstelle** (z. B. der **Betreiber eines Online-Marktplatzes**) bei diesen Lieferungen fiktiv so gestellt, als ob der Betreiber die Lieferung des auf seinem Marktplatz t√§tigen Versandh√§ndlers selbst erhalten und als ob er diese Lieferung selbst an den Kunden des Versandh√§ndlers ausgef√ºhrt hat.\nEs wird also ein **Reihengesch√§ft fingiert**.\n\nEine **elektronische Schnittstelle im Sinne von ¬ß 3 Abs. 3a S. 1 und 2 UStG** ist ein **elektronischer Marktplatz**, eine **elektronische Plattform**, ein **elektronisches Portal** oder **√Ñhnliches**.\nDer Begriff der elektronischen Schnittstelle ist **sehr weit gefasst**, sodass in den Anwendungsbereich der Vorschriften nicht nur elektronische Marktpl√§tze, Plattformen oder Portale fallen, sondern auch **alle anderen vergleichbaren elektronischen Handelspl√§tze**."
                        }
                    ]
                ]
            },
{
                name: "Priller",
                field: " BilSt, UmwSt",
                avatar: "P",
                image: "https://s1.directupload.eu/images/250926/mw5zoero.jpg",
                rounds: [
                    [
                        {
                            question: "Wir starten in das Bilanzsteuerrecht mit folgendem Fall: Ein Mandant kommt in Ihre Kanzlei. F√ºr das Gesch√§ftsjahr 01 wurde ein hoher Gewinn erzielt, und der Steuerbescheid ist bereits wirksam bekannt gegeben worden. Mandant war einverstanden in 01. In 02 wurde unerwartet ein schlechtes Ergebnis erzielt. Mandant m√∂chte nun 01 noch √§ndern, um das Ergebnis zu senken, z. B. in Form einer Bildung einer R√ºckstellung. Ist das m√∂glich?",
                            audio: "https://www.dropbox.com/scl/fi/mrdhyzcsvopey2wteocie/1.h.1.mp3?rlkey=myeeb5g9nce7yqe58kh4swg4t&st=4li4s1hr&raw=1",
                            solution: "Eine **Bilanzberichtigung in 01** gem. **¬ß 4 Abs. 2 S. 1 EStG** ist nur m√∂glich, wenn im Fehlerjahr 01 die **Veranlagung nach den √Ñnderungsvorschriften der Abgabenordnung** noch korrigiert werden kann (**H 4.4 ‚ÄûBerichtigung einer Bilanz ...‚Äú Sps. 1 EStH**).\nWenn verfahrensrechtlich keine Korrektur mehr m√∂glich ist, erfolgt eine **erfolgswirksame Bilanzberichtigung in der ersten offenen Veranlagung** (**R 4.4 Abs. 1 S. 9 EStR**).\n\nNeben einer **Bilanzberichtigung (fehlerhafter Bilanzansatz)** k√∂nnen **Bewertungswahlrechte im Rahmen einer Bilanz√§nderung** neu ausge√ºbt werden (**¬ß 4 Abs. 2 S. 2 EStG**).\nVoraussetzung f√ºr eine **Bilanz√§nderung** ist dabei jedoch, dass ein **enger sachlicher und zeitlicher Zusammenhang** zu einer **Bilanzberichtigung gem. ¬ß 4 Abs. 2 S. 1 EStG** besteht.\nAu√üerdem ist die **Bilanz√§nderung der H√∂he nach begrenzt** auf die **Gewinnauswirkung der Bilanzberichtigung**.\n\nUngeachtet der Bestimmungen zur Bilanz√§nderung k√∂nnen **steuerliche Wahlrechte au√üerhalb der Bilanz** ausge√ºbt werden, sofern die **Veranlagung noch nach den Vorschriften der AO korrigiert werden kann**.\nHierunter w√ºrde z. B. die **Vornahme eines au√üerbilanziellen Abzugs eines IAB** gem. **¬ß 7g Abs. 1 EStG** fallen, sofern das **beg√ºnstigte Wirtschaftsgut** noch **nicht angeschafft** wurde (**¬ß 7g Abs. 2 S. 2 EStG**)."
                        },
                        {
                            question: "Gut passt. Sagen Sie mir mal: Was ist eine atypisch/typisch stille Beteiligung und wie wird diese bilanziert?",
                            audio: "https://www.dropbox.com/scl/fi/clrn39zf3jl6x589534md/1.h.2.mp3?rlkey=1qvwfo20fl8isex71fv7hx1ue&st=oyvrq5i9&raw=1",
                            solution: "Als **stille Gesellschaft** bezeichnet man eine Gesellschaft, bei der sich jemand am **Handelsgewerbe eines anderen** in der Weise beteiligt, dass er in das **Verm√∂gen des Inhabers des Handelsgesch√§fts** ‚Äì der **Einzelkaufmann**, aber auch eine **Personen- oder Kapitalgesellschaft** sein kann ‚Äì eine **Einlage leistet** (**¬ß 230 HGB**).\n\n**Einkommensteuerlich** ist die **Unterscheidung zwischen typisch und atypisch stiller Gesellschaft** von erheblicher Bedeutung.\nW√§hrend der **typisch Stille** im Wesentlichen wie ein **Darlehensgeber** behandelt wird, ist die **atypisch stille Gesellschaft** als **Mitunternehmerschaft** zu qualifizieren.\nEine atypisch stille Gesellschaft liegt vor, wenn der stille Gesellschafter **Mitunternehmerinitiative entfalten** kann und **Mitunternehmerrisiko tr√§gt**.\n\nEntscheidend ist insbesondere die **Beteiligung an den stillen Reserven** einschlie√ülich eines etwaigen **Gesch√§fts-/Firmenwerts**.\nIn der **Handelsbilanz** ist die **Einlage des stillen Gesellschafters** grunds√§tzlich als **Fremdkapital** auszuweisen.\n**Steuerlich** stellen die **Verg√ºtungen an den stillen Gesellschafter** **Betriebsausgaben des Gesch√§ftsherrn** dar.\n\nBei einer **atypisch stillen Gesellschaft** mindert der **Gewinnanteil des atypisch stillen Gesellschafters** nicht den Gewinn der Mitunternehmerschaft.\nEs ist vielmehr eine **Gewinnverteilung zwischen dem Gesch√§ftsherrn und dem atypisch stillen Gesellschafter** vorzunehmen (**einheitlich und gesonderte Gewinnfeststellung** gem. **¬ß¬ß 179, 180 Abs. 1 S. 1 Nr. 2 Buchst. a AO**)."
                        },
                        {
                            question: "Anderes Thema: Wie kann ein Zuschuss zu einer Maschine behandelt werden?",
                            audio: "https://www.dropbox.com/scl/fi/sz60zyh6ohg3gztietfpb/1.h.3.mp3?rlkey=wxuzo0x1ciqu14fuoudgqsc46&st=wdz3c07g&raw=1",
                            solution: "**Handelsrechtlich** ist die **bilanzielle Behandlung eines Investitionszuschusses** nicht geregelt.\nEs bestehen insgesamt **drei M√∂glichkeiten des Ausweises**:\n‚Ä¢ **Minderung der Anschaffungs- bzw. Herstellungskosten** des Verm√∂gensgegenstands um den Betrag des Zuschusses (**sog. direkte Methode**), oder\n‚Ä¢ **Ansatz eines passiven Sonderpostens** in H√∂he des Zuschusses (**sog. indirekte Methode**), oder\n‚Ä¢ **Ausweis als Ertrag**.\n\nHandelsrechtlich ist **umstritten**, ob und welche dieser drei M√∂glichkeiten zul√§ssig ist.\n\n**Steuerrechtlich** besteht ein **Wahlrecht** zwischen **erfolgsneutraler Behandlung** (Verrechnung des Zuschusses mit AK/HK) und **erfolgswirksamer Behandlung** (Behandlung als Ertrag, ohne Verrechnung mit den AK/HK) des Zuschusses (**R 6.5 Abs. 2 EStR**)."
                        },
                        {
                            question: "Daran ankn√ºpfend sprechen wir mal √ºber das Thema latente Steuern: Ergeben sich latente Steuern bei einem Zuschuss? Wie schauts bei einer ¬ß 6b-R√ºcklage und bei ¬ß 7g EStG aus?",
                            audio: "https://www.dropbox.com/scl/fi/x86kihru5w71gt0f8s6mo/1.h.4.mp3?rlkey=ealnei4eda4qli8aifdoki3wd&st=ckahca80&raw=1",
                            solution: "Wird der **Zuschuss in der Handelsbilanz erfolgsneutral** (K√ºrzung der AK), in der **Steuerbilanz jedoch erfolgswirksam** behandelt, kann f√ºr die **k√ºnftige Steuerentlastung eine aktive latente Steuer** abgegrenzt werden (**¬ß 274 Abs. 1 S. 2 HGB**).\nIm umgekehrten Fall, d. h. bei **erfolgswirksamer Behandlung in der Handelsbilanz** und **erfolgsneutraler Behandlung in der Steuerbilanz**, ist eine **passive latente Steuer** zu bilanzieren.\n\nDie **Bildung einer ¬ß 6b-R√ºcklage** in der Steuerbilanz f√ºhrt zu **passiven latenten Steuern** gem. **¬ß 274 Abs. 1 HGB**, da eine R√ºcklage seit **BilMoG** in der Handelsbilanz **nicht mehr gebildet werden kann**.\n\nDie **Vornahme eines IAB** erfolgt zwar **au√üerhalb der Bilanz**, nach **herrschender Meinung (h. M.)** ist hierf√ºr jedoch dennoch eine **passive latente Steuerabgrenzung** gem. **¬ß 274 Abs. 1 S. 1 HGB** vorzunehmen."
                        }
                    ]
                ]
            },
{
                name: "Dr. Baretti",
                field: " Berufsrecht, VWL, BWL",
                avatar: "B",
                image: "https://s1.directupload.eu/images/250829/zzdffhky.jpg",
                rounds: [
                    [
                        {
                            question: " Kommen wir nun zum Berufsrecht der Steuerberater. Zun√§chst eine Frage, die in den letzten Jahren immer wichtiger geworden ist: Was versteht man unter einem Syndikus-Steuerberater?",
                            audio: "https://www.dropbox.com/scl/fi/dv9lmpclub0polx8vnzs7/1.c.1.mp3?rlkey=z9d91ma9bxqt47iisj6dadfig&st=8mlt7yvp&raw=1",
                            solution: "Gem√§√ü **¬ß 58 Nr. 5a Steuerberatungsgesetz (StBerG)** ist die **Bestellung als Syndikus-Steuerberater** m√∂glich.\nDies erm√∂glicht **Angestellten in Industrieunternehmen und Wirtschaftsverb√§nden**, neben ihrer **Angestelltent√§tigkeit als Steuerberater** t√§tig zu werden.\n\nVoraussetzung ist:\n‚Ä¢ dass der Angestellte **T√§tigkeiten i. S. d. ¬ß 33 Steuerberatungsgesetz** wahrnimmt,\n‚Ä¢ der Angestellte **nicht in seiner Eigenschaft als Steuerberater f√ºr den eigenen Arbeitgeber t√§tig** wird; er kann ihn aber **steuerlich beraten und gegen√ºber dem Finanzamt vertreten**, \n‚Ä¢ der **Arbeitgeber mit der T√§tigkeit als Steuerberater einverstanden** ist und\n‚Ä¢ der Steuerberater durch seine **Angestelltent√§tigkeit nicht gehindert** ist, seinen **Pflichten als Steuerberater** nachzukommen.\n\nDie **Berufsbezeichnung** eines Syndikus-Steuerberaters lautet **‚ÄûSteuerberater‚Äú**; eine **Pflicht zur Bezeichnung als Syndikus-Steuerberater** besteht **nicht**."
                        },
                        {
                            question: "Und direkt daran anschlie√üend: Welcher Vorteil ergibt sich denn daraus, wenn man sich als Syndikus-Steuerberater bestellen l√§sst?",
                            audio: "https://www.dropbox.com/scl/fi/fl2th17jxgpoj9r1ux0ok/1.c.2.mp3?rlkey=ipj1fuy1dn2a0jvf20148x7tz&st=xlepr4x0&raw=1",
                            solution: "**Vorteile** ergeben sich insbesondere durch die M√∂glichkeit der **Befreiung von der Beitragspflicht in der gesetzlichen Rentenversicherung** zugunsten einer in der Regel **besseren Altersversorgung durch das Versorgungswerk der Steuerberater**.\nAu√üerdem kann mit der **Bestellung** dokumentiert werden, dass die **Steuerberaterpr√ºfung bestanden** wurde."
                        },
                        {
                            question: " Nun allgemein zur Berufsaus√ºbung: Welche M√∂glichkeiten haben Sie, den Beruf des Steuerberaters auszu√ºben? Und welche Vor- und Nachteile ergeben sich aus den verschiedenen M√∂glichkeiten Ihrer Einsch√§tzung nach?",
                            audio: "https://www.dropbox.com/scl/fi/wgr307e0fm8kwet0ss1xn/1.c.3.mp3?rlkey=ucwt4z0cx8f65pnsu32v3czdw&st=10sptiuo&raw=1",
                            solution: "**Steuerberater** k√∂nnen sich zur **gemeinsamen Berufsaus√ºbung zu Berufsaus√ºbungsgesellschaften** verbinden.\nDiesbez√ºglich stehen **alle inl√§ndischen sowie EU/EWR-Rechtsformen** zur Verf√ºgung.\nIn der Praxis sind insbesondere folgende **Konstellationen** vorzufinden:\n\n‚Ä¢ **Die Einzelpraxis:** Eine Einzelpraxis kann nach eigenen Vorstellungen aufgebaut und gef√ºhrt werden; die **Haftung erfolgt mit dem Privatverm√∂gen**. Der Steuerberater ist **auf sich allein gestellt**, insbesondere angesichts einer sich st√§ndig √§ndernden Rechtslage und Rechtsprechung. Auch die **Fixkosten** sind vom Steuerberater allein zu tragen.\n\n‚Ä¢ **Die B√ºrogemeinschaft:** B√ºrogemeinschaften dienen **nicht einer gemeinschaftlichen Berufsaus√ºbung**, sondern einer **gemeinsamen Nutzung der Betriebsmittel**, indem Kosten, z. B. R√§ume oder B√ºroinfrastruktur, geteilt werden. Eine **gemeinsame Vertretung nach au√üen** oder eine **gemeinsame Annahme von Mandanten** erfolgt nicht. B√ºrogemeinschaften d√ºrfen grunds√§tzlich **mit allen Personen gebildet** werden, auch mit **Gewerbetreibenden**, solange die **Berufspflichten als Steuerberater** gewahrt bleiben. Ausgeschlossen sind nur Personen, mit denen eine Verbindung mit dem steuerberatenden Beruf **unvereinbar** ist (**¬ß 55h Abs. 2 Steuerberatungsgesetz**), z. B. **Maklern**.\n\n‚Ä¢ **Die Soziet√§t in Form einer GbR:** Die **GbR** tritt im Gegensatz zur B√ºrogemeinschaft **nach au√üen in Erscheinung**. Aus dem Mandat sind **alle Gesellschafter berechtigt und verpflichtet**. Die Gesellschafter **haften f√ºr die Verbindlichkeiten der Gesellschaft** mit dem gesamten **Privat- und Betriebsverm√∂gen**.\n\n‚Ä¢ **Die Berufsaus√ºbungsgesellschaft:** Der Begriff **Berufsaus√ºbungsgesellschaft** ist der **Oberbegriff f√ºr Zusammenschl√ºsse von Steuerberatern** mit anderen Steuerberatern und/oder **Angeh√∂rigen weiterer Freier Berufe**. Neben den klassischen Zusammenschl√ºssen zwischen **Steuerberatern, Wirtschaftspr√ºfern und Rechtsanw√§lten** gibt es zunehmend auch **Zusammenschl√ºsse mit weiteren Professionen**, z. B. **beratenden Betriebswirten**."
                        },
                        {
                            question: "Zum Abschluss noch eine kleine Frage aus der Betriebswirtschaftslehre, die oft an das Berufsrecht ankn√ºpft: K√∂nnen Sie mir bitte kurz den Unterschied zwischen einem Share Deal und einem Asset Deal erkl√§ren?",
                            audio: "https://www.dropbox.com/scl/fi/kckahtkgkbsixzerpl8vm/1.c.4.mp3?rlkey=dq7t550vnofeipqofvcnwmnfb&st=alwxc0g2&raw=1",
                            solution: "Unter einem **Share Deal** versteht man eine spezifische Art des **Unternehmenskaufs**, bei der der K√§ufer **die Anteile des Unternehmens** vom Verk√§ufer erwirbt.\nDer Begriff **Asset Deal** meint eine spezifische Art des **Unternehmenskaufs**, bei der der K√§ufer **s√§mtliche Wirtschaftsg√ºter des Unternehmens** vom Verk√§ufer **einzeln erwirbt**."
                        }
                    ]
                ]
            },
 {
                name: "Reinwald",
                field: " ESt, IStR, K√∂St, GewSt", 
                avatar: "R",
                image: " https://s1.directupload.eu/images/250926/iyqmubkd.jpg ",
                rounds: [
                    [
                        {
                            question: "Welche konkreten Vorteile sehen Sie in der Digitalisierung f√ºr Unternehmen?",
                            audio: "https://www.dropbox.com/scl/fi/jq9xlnehbcna73rvyyvej/ElevenLabs_2025-09-24T09_36_17_Liam_pre_sp100_s50_sb75_v3.mp3?rlkey=r7vgyfxqeqrmszlvbcqpe2kxw&raw=1",
                            solution: "**Hauptvorteile der Digitalisierung f√ºr Unternehmen:**\n‚Ä¢ **Effizienzsteigerung:** Automatisierung wiederkehrender Prozesse reduziert Arbeitsaufwand und Fehlerquoten\n‚Ä¢ **Kostensenkung:** Langfristige Einsparungen durch optimierte Abl√§ufe und reduzierte Personalkosten\n‚Ä¢ **Verbesserte Datenanalyse:** Bessere Entscheidungsgrundlagen durch datengetriebene Insights\n‚Ä¢ **Erh√∂hte Flexibilit√§t:** Schnellere Anpassung an Marktver√§nderungen und Kundenbed√ºrfnisse\n‚Ä¢ **Neue Gesch√§ftsmodelle:** Erschlie√üung digitaler M√§rkte und Services\n‚Ä¢ **Verbesserte Kundenerfahrung:** 24/7 Verf√ºgbarkeit und personalisierte Services"
                        },
                        {
                            question: "Wie bewerten Sie die Risiken des digitalen Wandels f√ºr Arbeitnehmer?",
                            audio: "https://www.dropbox.com/scl/fi/jq9xlnehbcna73rvyyvej/ElevenLabs_2025-09-24T09_36_17_Liam_pre_sp100_s50_sb75_v3.mp3?rlkey=r7vgyfxqeqrmszlvbcqpe2kxw&raw=1",
                            solution: "**Risiken der Digitalisierung f√ºr Arbeitnehmer:**\n‚Ä¢ **Arbeitsplatzunsicherheit:** Automatisierung kann bestimmte Jobs √ºberfl√ºssig machen\n‚Ä¢ **Qualifikationsl√ºcken:** Neue Technologien erfordern kontinuierliche Weiterbildung\n‚Ä¢ **Digitaler Stress:** St√§ndige Erreichbarkeit und Informations√ºberflutung\n‚Ä¢ **Soziale Isolation:** Weniger pers√∂nliche Interaktion durch Remote Work\n‚Ä¢ **√úberwachung:** Digitale Tools erm√∂glichen verst√§rkte Leistungskontrolle\n‚Ä¢ **Work-Life-Balance:** Verschwimmende Grenzen zwischen Arbeit und Freizeit"
                        },
                        {
                            question: "Welche Rolle spielt die Automatisierung in der modernen Wirtschaft?",
                            audio: "https://www.dropbox.com/scl/fi/jq9xlnehbcna73rvyyvej/ElevenLabs_2025-09-24T09_36_17_Liam_pre_sp100_s50_sb75_v3.mp3?rlkey=r7vgyfxqeqrmszlvbcqpe2kxw&raw=1",
                            solution: "**Rolle der Automatisierung:**\n‚Ä¢ **Produktivit√§tssteigerung:** Maschinen arbeiten schneller und pr√§ziser als Menschen\n‚Ä¢ **Qualit√§tsverbesserung:** Reduzierung menschlicher Fehler in Produktionsprozessen\n‚Ä¢ **Kostensenkung:** Langfristige Einsparungen bei Personalkosten\n‚Ä¢ **Wettbewerbsvorteil:** Unternehmen k√∂nnen effizienter produzieren\n‚Ä¢ **Neue Arbeitspl√§tze:** Entstehung von Jobs in Wartung, Programmierung und √úberwachung\n‚Ä¢ **24/7 Betrieb:** Kontinuierliche Produktion ohne Pausen m√∂glich"
                        },
                        {
                            question: "Wie k√∂nnen Unternehmen ihre Wettbewerbsf√§higkeit durch Digitalisierung steigern?",
                            audio: "https://www.dropbox.com/scl/fi/jq9xlnehbcna73rvyyvej/ElevenLabs_2025-09-24T09_36_17_Liam_pre_sp100_s50_sb75_v3.mp3?rlkey=r7vgyfxqeqrmszlvbcqpe2kxw&raw=1",
                            solution: "**Wettbewerbsvorteile durch Digitalisierung:**\n‚Ä¢ **Schnellere Markteinf√ºhrung:** Agile Entwicklungsprozesse verk√ºrzen Time-to-Market\n‚Ä¢ **Personalisierung:** Individuelle Kundenansprache durch Datenanalyse\n‚Ä¢ **Skalierbarkeit:** Digitale L√∂sungen wachsen mit dem Unternehmen mit\n‚Ä¢ **Innovation:** Neue Technologien erm√∂glichen disruptive Gesch√§ftsmodelle\n‚Ä¢ **Kostenf√ºhrerschaft:** Effizientere Prozesse senken die Gesamtkosten\n‚Ä¢ **Kundenbindung:** Digitale Services erh√∂hen die Kundenzufriedenheit"
                        }
                    ]
              ]
            },
     {
                name: "Wirth",
                field: "AO, FGO, Erbschaftsteuer, Grunderwerbsteuer",
                avatar: "W",
                image: "https://s1.directupload.eu/images/250829/qoko6duz.jpg",
                rounds: [
                    [
                        {
                            question: "Ich pr√ºfe Sie heute in der Abgabenordnung. Ich w√ºrde gerne thematisch an die Fragerunde von Herrn Dr. Dumser ankn√ºpfen. K√∂nnen Sie mir zun√§chst sagen, ob ein beschr√§nkt Gesch√§ftsf√§higer √ºberhaupt eine Steuererkl√§rung abgeben kann?",
                            audio: "https://www.dropbox.com/scl/fi/pbq684l19gbmb3gk0ky68/k.m.1.mp3?rlkey=gs36uqtpuzb1362a1p5gdwy0l&st=sfiy0q2b&raw=1",
                            solution: "Nach **¬ß 149 Abs. 1 AO** bestimmen die Steuergesetze, wer zur Abgabe einer **Steuererkl√§rung verpflichtet** ist.\nHandelt es sich dabei um einen **beschr√§nkt Gesch√§ftsf√§higen**, also einen **Minderj√§hrigen**, der das **7., aber noch nicht das 18. Lebensjahr** vollendet hat (**¬ß 106 BGB**), ist danach zu differenzieren, ob er **steuerlich handlungsf√§hig** ist oder nicht.\n\n**Beschr√§nkt Gesch√§ftsf√§hige** k√∂nnen nach **¬ß 79 Abs. 1 Nr. 2 AO** steuerlich handlungsf√§hig sein, soweit sie f√ºr den Gegenstand des Verfahrens durch Vorschriften des **b√ºrgerlichen Rechts** als gesch√§ftsf√§hig oder durch Vorschriften des **√∂ffentlichen Rechts** als handlungsf√§hig anerkannt sind.\nDies ist v. a. der Fall bei **Erm√§chtigung des Minderj√§hrigen zum selbst√§ndigen Betrieb eines Erwerbsgesch√§fts** f√ºr alle Gesch√§fte, die der Betrieb mit sich bringt (**¬ß 112 BGB**), oder im Rahmen eines **Dienst- oder Arbeitsverh√§ltnisses (¬ß 113 BGB)**.\nSoweit sich nach diesen Vorschriften eine beschr√§nkte Gesch√§ftsf√§higkeit ergibt, ist der Minderj√§hrige **steuerlich handlungsf√§hig** und kann z. B. als **Inhaber eines Gewerbebetriebs** wirksam Erkl√§rungen und Anmeldungen zur **USt**, **LSt** und **GewSt** abgeben.\n\nIst ein beschr√§nkt Gesch√§ftsf√§higer nach den Vorschriften des b√ºrgerlichen oder √∂ffentlichen Rechts **nicht handlungsf√§hig**, muss der **gesetzliche Vertreter** f√ºr ihn handeln, um die steuerlichen Pflichten des beschr√§nkt Gesch√§ftsf√§higen zu erf√ºllen (**¬ß 34 Abs. 1 S. 1 AO**).\nBei Minderj√§hrigen sind regelm√§√üig die **Eltern gemeinsam gesetzliche Vertreter** (**¬ß¬ß 1626, 1629 Abs. 1 S. 2 BGB**).\nIn diesem Fall m√ºssen also die **Eltern als gesetzliche Vertreter** des beschr√§nkt Gesch√§ftsf√§higen dessen **Steuererkl√§rung abgeben**.\n\nDies gilt im √úbrigen auch f√ºr die **Abgabe einer Einkommensteuererkl√§rung** bei einem nach **¬ß 79 Abs. 1 Nr. 2 AO handlungsf√§higen Minderj√§hrigen**.\nDenn die Abgabe einer Einkommensteuererkl√§rung ist **nicht von ¬ß¬ß 112 und 113 BGB umfasst**, weil hierbei auch Angaben zu den **Sonderausgaben** oder **au√üergew√∂hnlichen Belastungen** erforderlich sind, die nichts mit dem **Erwerbsgesch√§ft i. S. d. ¬ß 112 BGB** oder dem **Dienst- oder Arbeitsverh√§ltnis i. S. d. ¬ß 113 BGB** zu tun haben."
                        },
                        {
                            question: "Ich habe Ihnen dazu einen kleinen Fall mitgebracht: Ein Minderj√§hriger betreibt in der Garage seiner Eltern einen Gewerbebetrieb und ist insoweit auch partiell gesch√§ftsf√§hig nach ¬ß 112 Abs. 1 BGB. Das Finanzamt will einen Umsatzsteuerbescheid an ihn bekanntgeben. An wen ist dieser zu adressieren?",
                            audio: "https://www.dropbox.com/scl/fi/rbcr1t4ef6a9y0lv12xz4/k.m.2.mp3?rlkey=5zaolj6yx8qpdhbj92krc90qe&st=zvy3k4xq&raw=1",
                            solution: " **Erm√§chtigt der gesetzliche Vertreter mit Genehmigung des Familiengerichts den Minderj√§hrigen zum selbst√§ndigen Betrieb eines Erwerbsgesch√§fts**, so ist der Minderj√§hrige f√ºr solche Rechtsgesch√§fte **unbeschr√§nkt gesch√§ftsf√§hig**, welche der Gesch√§ftsbetrieb mit sich bringt (**¬ß 112 Abs. 1 S. 1 BGB**).\nInsoweit ist der Minderj√§hrige auch im **Besteuerungsverfahren handlungsf√§hig** nach **¬ß 79 Abs. 1 Nr. 2 AO**.\n\nDementsprechend sind **Steuerbescheide**, die **ausschlie√ülich diesen Gesch√§ftsbetrieb betreffen**, wie hier der **Umsatzsteuerbescheid**, **nur dem Minderj√§hrigen** ‚Äì und **nicht auch dessen Eltern** als (gemeinschaftliche) gesetzliche Vertreter nach **¬ß 34 Abs. 1 S. 1 AO i.V.m. ¬ß¬ß 1626, 1629 Abs. 1 S. 2 BGB** ‚Äì bekannt zu geben (**vgl. AEAO zu ¬ß 122, Nr. 2.2.3**)."
                        },
                        {
                            question: " Der Minderj√§hrige erzielt neben dem Gewerbebetrieb noch andere Eink√ºnfte. Das Finanzamt will einen Einkommensteuerbescheid, der neben den Eink√ºnften aus Gewerbebetrieb noch andere Eink√ºnfte des Minderj√§hrigen beinhaltet, an ihn bekanntgeben. An wen ist dieser zu adressieren?",
                            audio: "https://www.dropbox.com/scl/fi/tlp8epjdc0gpknrepo74k/k.m.3.mp3?rlkey=nkiv5fh42b7847knn0z2kh964&st=aa8ldt5v&raw=1",
                            solution: "Hat der Minderj√§hrige wie hier **noch weitere Eink√ºnfte** und werden diese in die **Festsetzung einbezogen**, so kann der **Steuerbescheid nicht durch Bekanntgabe gegen√ºber dem minderj√§hrigen Steuerschuldner** wirksam werden.\n**Bekanntgabeadressat des Bescheids** sind in einem solchen Fall die **Eltern des Minderj√§hrigen** als dessen (gemeinschaftliche) **gesetzliche Vertreter** nach **¬ß 34 Abs. 1 S. 1 AO i.V.m. ¬ß¬ß 1626, 1629 Abs. 1 S. 2 BGB** (**vgl. AEAO zu ¬ß 122, Nr. 2.2.3 a.E.**)."
                        },
                        {
                            question: "Sehr sch√∂n, vielen Dank. Jetzt gehen wir zum Abschluss nochmal weg von dem Minderj√§hrigen. Z√§hlen Sie mir bitte die steuerlichen Nebenleistungen in der AO auf und sagen Sie mir, wo sie im Gesetz stehen.",
                            audio: "https://www.dropbox.com/scl/fi/q9qi6noldt5y819hjryyj/k.m.4.mp3?rlkey=lto7ejfud1h84z8d26fvbarh2&st=54ekgex4&raw=1",
                            solution: " **Steuerliche Nebenleistungen** sind nach **¬ß 3 Abs. 4 AO** u. a.:\n‚Ä¢ **Versp√§tungszuschl√§ge** nach **¬ß 152 AO**\n‚Ä¢ **Zuschl√§ge** nach **¬ß 162 Abs. 4 und 4a AO**\n‚Ä¢ **Mitwirkungsverz√∂gerungsgelder** nach **¬ß 200a Abs. 2 AO** und **Zuschl√§ge zum Mitwirkungsverz√∂gerungsgeld** nach **¬ß 200a Abs. 3 AO**\n‚Ä¢ **Zinsen** nach den **¬ß¬ß 233 ff. AO**\n‚Ä¢ **S√§umniszuschl√§ge** nach **¬ß 240 AO**\n‚Ä¢ **Zwangsgelder** nach **¬ß 329 AO**"
                        },
                        {
                            question: "Und dann noch eine letzte Frage: Was ist der Sinn und Zweck von S√§umniszuschl√§gen? Und worin liegt der Unterschied zu Versp√§tungszuschl√§gen?",
                            audio: "https://www.dropbox.com/scl/fi/94l61y9u0zmyya0447o6a/k.m.5.mp3?rlkey=o92fswdll4rwroku3bbiw1w8k&st=9d84q7v9&raw=1",
                            solution: " **S√§umniszuschl√§ge** stellen in erster Linie ein **Druckmittel zur Durchsetzung f√§lliger Steuerforderungen** dar. Sie sind aber auch eine **Gegenleistung f√ºr das Hinausschieben der Zahlung** und ein **Ausgleich f√ºr den angefallenen Verwaltungsaufwand** (**AEAO zu ¬ß 240, Nr. 5**).\n\nBei Vorliegen der **Tatbestandsmerkmale des ¬ß 152 Abs. 1 S. 1 AO** (Erkl√§rungspflicht, versp√§tete oder Nichtabgabe der Steuererkl√§rung, Verschulden) kann ein **Versp√§tungszuschlag** festgesetzt werden (**Ermessensentscheidung**).\nDas Finanzamt hat nach **pflichtgem√§√üem Ermessen (¬ß 5 AO)** zu entscheiden, ob und in welcher H√∂he ein Versp√§tungszuschlag festzusetzen ist.\n\nDie **Festsetzung des Versp√§tungszuschlags** stellt eine **gebundene Entscheidung** dar, insbesondere wenn die Steuererkl√§rung **nicht binnen 14 Monaten nach Ablauf des Kalenderjahrs** oder in den F√§llen **vorzeitiger Anforderung** pflichtwidrig nicht bis zu dem in der Anordnung bestimmten Zeitpunkt abgegeben wurde (**¬ß 152 Abs. 2 AO**).\n\nAufgrund der **pandemiebedingten Verl√§ngerung der Abgabefristen** gibt es f√ºr die **Besteuerungszeitr√§ume 2020 bis 2024** in Bezug auf **¬ß 152 Abs. 2 AO** **Sonderregelungen**, mithin f√ºr die Frage, ob ein Versp√§tungszuschlag von Amts wegen festzusetzen ist (**siehe AEAO zu ¬ß 152, Nr. 1**).\n\nDemgegen√ºber entsteht ein **S√§umniszuschlag kraft Gesetzes**, wenn eine Steuer **nicht am F√§lligkeitstag entrichtet** wird (**¬ß 240 Abs. 1 S. 1 AO**).\nDas Finanzamt hat hierbei **kein Ermessen**. Der S√§umniszuschlag wird **nicht durch Verwaltungsakt festgesetzt**, sondern **im Rahmen der Anmahnung von Steuerr√ºckst√§nden angefordert**.\nEtwaige **Unbilligkeiten** k√∂nnen durch **Erlass der S√§umniszuschl√§ge** beseitigt werden (**¬ß 227 AO**)."
                        }
                    ]
                ]
            }
        ];

        // Initialize examiners with randomly selected rounds
        let examiners = [];

        let currentExaminerIndex = 0;
        let currentQuestionIndex = 0;
        let preparationTimer;
        let preparationTimeLeft = 1800; // 30 minutes in seconds
        
        // Presentation timer variables
        let presentationTimer;
        let presentationTimeElapsed = 0;
        let isPresentationTimerRunning = false;
        
        let examResponses = [];

        // Function to initialize examiners with random rounds
        function initializeExaminers() {
            examiners = examinerData.map(examinerTemplate => {
                // Select a random round (0-4) for each examiner
                const randomRoundIndex = Math.floor(Math.random() * examinerTemplate.rounds.length);
                const selectedRound = examinerTemplate.rounds[randomRoundIndex];
                
                return {
                    name: examinerTemplate.name,
                    field: examinerTemplate.field,
                    avatar: examinerTemplate.avatar,
                    image: examinerTemplate.image,
                    questions: selectedRound
                };
            });
            
            console.log('Pr√ºfer mit zuf√§lligen Runden initialisiert:', examiners.map(e => e.name));
        }

        function generateRandomTopics() {
            const selectedTopics = [];
            
            // Gruppe 1: Grundlagen des Steuerrechts (erstes Thema)
            const group1Categories = ["Privatrecht", "Finanzgerichtsordnung", "Abgabenordnung"];
            const randomGroup1Category = group1Categories[Math.floor(Math.random() * group1Categories.length)];
            const group1Topics = topicsByCategory[randomGroup1Category];
            const selectedGroup1Topic = group1Topics[Math.floor(Math.random() * group1Topics.length)];
            selectedTopics.push({
                topic: selectedGroup1Topic,
                category: randomGroup1Category
            });
            
            // Gruppe 2: Ertragsteuern (zweites Thema)
            const group2Categories = ["Einkommensteuer", "Bilanzsteuer", "K√∂rperschaftsteuer"];
            const randomGroup2Category = group2Categories[Math.floor(Math.random() * group2Categories.length)];
            const group2Topics = topicsByCategory[randomGroup2Category];
            const selectedGroup2Topic = group2Topics[Math.floor(Math.random() * group2Topics.length)];
            selectedTopics.push({
                topic: selectedGroup2Topic,
                category: randomGroup2Category
            });
            
            // Gruppe 3: Spezialgebiete (drittes Thema)
            const group3Categories = ["Umsatzsteuer", "Umwandlungssteuer", "Internationales Steuerrecht", "Berufsrecht"];
            const randomGroup3Category = group3Categories[Math.floor(Math.random() * group3Categories.length)];
            const group3Topics = topicsByCategory[randomGroup3Category];
            const selectedGroup3Topic = group3Topics[Math.floor(Math.random() * group3Topics.length)];
            selectedTopics.push({
                topic: selectedGroup3Topic,
                category: randomGroup3Category
            });
            
            return selectedTopics;
        }

        function selectTopic(topicData, buttonElement) {
            console.log('Thema ausgew√§hlt:', topicData);
            selectedTopicText = topicData.topic;
            
            const selectedTopicElement = document.getElementById('selectedTopic');
            if (selectedTopicElement) {
                selectedTopicElement.textContent = `"${topicData.topic}"`;
            }
            
            // Update button states
            document.querySelectorAll('.topic-button').forEach(btn => {
                btn.classList.remove('selected');
                btn.style.background = 'white';
                btn.style.borderColor = '#d1d5db';
            });
            
            if (buttonElement) {
                buttonElement.classList.add('selected');
                buttonElement.style.background = 'linear-gradient(180deg, rgba(111, 172, 255, 0.1), rgba(170, 207, 255, 0.1))';
                buttonElement.style.borderColor = '#6facff';
            }
            
            // Enable proceed button
            const proceedButton = document.getElementById('proceedButton');
            if (proceedButton) {
                proceedButton.disabled = false;
                proceedButton.style.opacity = '1';
                proceedButton.style.cursor = 'pointer';
                console.log('Button aktiviert');
            }
        }

function displayTopicOptions() {
  const topicOptions = document.getElementById('topicOptions');
  if (!topicOptions) {
    console.error('topicOptions Element nicht gefunden');
    return;
  }

  topicOptions.innerHTML = '';

  // Alle Kategorien & Themen exakt so ausgeben, wie sie in topicsByCategory stehen
  Object.entries(topicsByCategory).forEach(([rawCategory, topics]) => {
    const category = (rawCategory || '').trim(); // toleranter Umgang mit Leerzeichen im Key

    if (!Array.isArray(topics) || topics.length === 0) return;

    topics.forEach((topic, index) => {
      const topicButton = document.createElement('div');
      topicButton.className = 'topic-button p-4 border-2 border-gray-300 rounded-lg cursor-pointer transition-all hover:border-blue-400';
      topicButton.style.background = 'white';
      topicButton.onclick = () => selectTopic({ topic, category }, topicButton);

      topicButton.innerHTML = `
        <div class="flex items-start">
          <span class="w-8 h-8 text-white rounded-full flex items-center justify-center text-sm font-bold mr-3 flex-shrink-0" style="background: #6facff;">
            ${index + 1}
          </span>
          <div class="flex-1">
            <div class="text-gray-800 font-medium mb-1">${topic}</div>
            <div class="text-xs px-2 py-1 rounded-full inline-block" style="background-color: rgba(111, 172, 255, 0.2); color: #6facff;">
              ${category}
            </div>
          </div>
        </div>
      `;

      topicOptions.appendChild(topicButton);
    });
  });
}
        function startExam() {
            console.log('startExam() aufgerufen');
            
            // Stop welcome audio
            stopAllAudio();
            
            const welcomeScreen = document.getElementById('welcomeScreen');
            const preparationPhase = document.getElementById('preparationPhase');
            
            if (welcomeScreen) welcomeScreen.classList.add('hidden');
            if (preparationPhase) preparationPhase.classList.remove('hidden');
            
            // Generate and display topics immediately
            displayTopicOptions();
            startPreparationTimer();
        }

        function startPreparationTimer() {
            preparationTimer = setInterval(() => {
                preparationTimeLeft--;
                updateTimerDisplay();
                
                if (preparationTimeLeft <= 0) {
                    clearInterval(preparationTimer);
                    skipToExam();
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(preparationTimeLeft / 60);
            const seconds = preparationTimeLeft % 60;
            const timeString = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            document.getElementById('timerDisplay').textContent = timeString;
            
            // Update circle progress
            const totalTime = 1800;
            const progress = ((totalTime - preparationTimeLeft) / totalTime) * 360;
            document.getElementById('timerCircle').style.background = 
                `conic-gradient(#ef4444 ${progress}deg, #f3f4f6 ${progress}deg)`;
        }

        function skipToExam() {
            console.log('skipToExam() aufgerufen');
            
            // Check if topic is selected
            if (!selectedTopicText) {
                alert('Bitte w√§hlen Sie zun√§chst ein Thema aus!');
                return;
            }
            
            if (preparationTimer) {
                clearInterval(preparationTimer);
            }
            
            // Stop all audio before phase change
            stopAllAudio();
            
            const preparationPhase = document.getElementById('preparationPhase');
            const presentationPhase = document.getElementById('presentationPhase');
            const phaseIndicator = document.getElementById('phaseIndicator');
            
            if (preparationPhase) preparationPhase.classList.add('hidden');
            if (presentationPhase) presentationPhase.classList.remove('hidden');
            if (phaseIndicator) phaseIndicator.textContent = 'Vortrag';
            
            // Auto-play presentation audio after a short delay
            setTimeout(() => {
                const presentationAudio = document.getElementById('presentationAudio');
                if (presentationAudio) {
                    presentationAudio.play().catch(e => console.log('Autoplay prevented:', e));
                }
            }, 500);
        }

        function setupExaminerGrid() {
            const grid = document.getElementById('examinerGrid');
            grid.innerHTML = '';
            
            examiners.forEach((examiner, index) => {
                const examinerCard = document.createElement('div');
                examinerCard.className = `text-center p-3 rounded-lg border-2 transition-colors ${
                    index === currentExaminerIndex ? 'border-gray-200' : 'border-gray-200'
                }`;
                
                if (index === currentExaminerIndex) {
                    examinerCard.style.background = 'linear-gradient(180deg, rgba(111, 172, 255, 0.1), rgba(170, 207, 255, 0.1))';
                    examinerCard.style.borderColor = '#6facff';
                }
                
                let avatarContent = '';
                if (examiner.image) {
                    avatarContent = `
                        <img src="${examiner.image}" alt="${examiner.name}" class="w-full h-full object-cover rounded-full" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                        <div class="w-full h-full flex items-center justify-center text-white text-sm font-bold rounded-full" style="background: linear-gradient(180deg, #6facff, #aacfff); display: none;">${examiner.avatar}</div>
                    `;
                } else {
                    avatarContent = examiner.avatar;
                }
                
                examinerCard.innerHTML = `
                    <div class="examiner-avatar" style="width: 50px; height: 50px; font-size: 16px; margin: 0 auto 8px; overflow: hidden;">
                        ${avatarContent}
                    </div>
                    <div class="text-sm font-medium text-gray-800">${examiner.name}</div>
                    <div class="text-xs text-gray-600">${examiner.field}</div>
                `;
                
                grid.appendChild(examinerCard);
            });
        }

        function finishPresentation() {
            // Store presentation response
            examResponses.push({
                examiner: 'Dr. Dumser',
                question: 'Vortrag',
                answer: 'Vortrag √ºber Chat-Widget gehalten'
            });
            
            // Stop all audio before phase change
            stopAllAudio();
            
            // Move to transition phase
            const presentationPhase = document.getElementById('presentationPhase');
            const transitionPhase = document.getElementById('transitionPhase');
            const phaseIndicator = document.getElementById('phaseIndicator');
            
            if (presentationPhase) presentationPhase.classList.add('hidden');
            if (transitionPhase) transitionPhase.classList.remove('hidden');
            if (phaseIndicator) phaseIndicator.textContent = '√úbergang';
            
            // Auto-play transition audio after a short delay
            setTimeout(() => {
                const transitionAudio = document.getElementById('transitionAudio');
                if (transitionAudio) {
                    transitionAudio.play().catch(e => console.log('Autoplay prevented:', e));
                }
            }, 500);
        }

        function startExamQuestions() {
            // Stop all audio before phase change
            stopAllAudio();
            
            // Move to exam phase
            const transitionPhase = document.getElementById('transitionPhase');
            const examPhase = document.getElementById('examPhase');
            const phaseIndicator = document.getElementById('phaseIndicator');
            
            if (transitionPhase) transitionPhase.classList.add('hidden');
            if (examPhase) examPhase.classList.remove('hidden');
            if (phaseIndicator) phaseIndicator.textContent = 'Pr√ºfungsgespr√§ch';
            
            setupExaminerGrid();
            displayCurrentQuestion();
            
            // Auto-play first question audio after a short delay
            setTimeout(() => {
                const drSchmidtAudio = document.getElementById('drSchmidtAudio');
                if (drSchmidtAudio) {
                    drSchmidtAudio.play().catch(e => console.log('Autoplay prevented:', e));
                }
            }, 500);
        }

        function displayCurrentQuestion() {
            const examiner = examiners[currentExaminerIndex];
            const questionData = examiner.questions[currentQuestionIndex];
            const question = questionData.question;
            const audioUrl = questionData.audio;
            
            // Update examiner info
            const avatarElement = document.getElementById('currentExaminerAvatar');
            if (examiner.image) {
                avatarElement.innerHTML = `<img src="${examiner.image}" alt="${examiner.name}" class="w-full h-full object-cover rounded-full" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                <div class="w-full h-full flex items-center justify-center text-white text-2xl font-bold rounded-full" style="background: linear-gradient(180deg, #6facff, #aacfff); display: none;">${examiner.avatar}</div>`;
            } else {
                avatarElement.textContent = examiner.avatar;
            }
            
            document.getElementById('currentExaminerName').textContent = examiner.name;
            document.getElementById('currentExaminerField').textContent = `Fachbereich: ${examiner.field}`;
            document.getElementById('examinerProgress').textContent = `${currentExaminerIndex + 1} / ${examiners.length}`;
            
            // Update question
            document.getElementById('currentQuestion').textContent = question;
            
            // Update audio source and show player
            const audioPlayer = document.getElementById('audioPlayer');
            const drSchmidtAudio = document.getElementById('drSchmidtAudio');
            
            if (audioPlayer && drSchmidtAudio && audioUrl) {
                drSchmidtAudio.src = audioUrl;
                audioPlayer.classList.remove('hidden');
                
                // Auto-play the audio after a short delay
                setTimeout(() => {
                    drSchmidtAudio.play().catch(e => console.log('Autoplay prevented:', e));
                }, 500);
            }
            
            // Show appropriate response area
            if (examiner.name === 'Dr. Baretti') {
                document.getElementById('chatWidget').classList.remove('hidden');
                document.getElementById('standardResponse').classList.add('hidden');
            } else {
                document.getElementById('chatWidget').classList.add('hidden');
                document.getElementById('standardResponse').classList.remove('hidden');
            }
            
            setupExaminerGrid();
        }

        function nextQuestion() {
            // Store current response
            let response = '';
            if (examiners[currentExaminerIndex].name === 'Dr. Baretti') {
                response = document.getElementById('barettiResponse').value || 'Keine Antwort eingegeben';
            } else {
                response = document.getElementById('currentResponse').value || 'Keine Antwort eingegeben';
            }
            
            examResponses.push({
                examiner: examiners[currentExaminerIndex].name,
                question: examiners[currentExaminerIndex].questions[currentQuestionIndex].question,
                answer: response
            });
            
            // Stop current audio
            stopAllAudio();
            
            // Show solution phase
            showSolution();
        }

        function showSolution() {
            const examiner = examiners[currentExaminerIndex];
            const questionData = examiner.questions[currentQuestionIndex];
            const lastResponse = examResponses[examResponses.length - 1];
            
            // Hide exam phase, show solution phase
            document.getElementById('examPhase').classList.add('hidden');
            document.getElementById('solutionPhase').classList.remove('hidden');
            setPhase('L√∂sung');
            
            // Update solution examiner info
            const solutionAvatarElement = document.getElementById('solutionExaminerAvatar');
            if (examiner.image) {
                solutionAvatarElement.innerHTML = `<img src="${examiner.image}" alt="${examiner.name}" class="w-full h-full object-cover rounded-full" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                <div class="w-full h-full flex items-center justify-center text-white text-2xl font-bold rounded-full" style="background: linear-gradient(180deg, #6facff, #aacfff); display: none;">${examiner.avatar}</div>`;
            } else {
                solutionAvatarElement.textContent = examiner.avatar;
            }
            
            document.getElementById('solutionExaminerName').textContent = examiner.name;
            document.getElementById('solutionExaminerField').textContent = `Fachbereich: ${examiner.field}`;
            document.getElementById('solutionExaminerProgress').textContent = `${currentExaminerIndex + 1} / ${examiners.length}`;
            
            // Update solution content
            document.getElementById('solutionQuestion').textContent = questionData.question;
            document.getElementById('solutionYourAnswer').textContent = lastResponse.answer;
            
            // Format and display model solution
            const solutionText = questionData.solution || 'Musterl√∂sung wird geladen...';
            const formattedSolution = formatSolution(solutionText);
            document.getElementById('solutionModelAnswer').innerHTML = formattedSolution;
            
            // Setup solution examiner grid
            setupSolutionExaminerGrid();
        }

        function formatSolution(solutionText) {
            // Convert markdown-like formatting to HTML
            let formatted = solutionText
                .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                .replace(/\n‚Ä¢ /g, '<li>')
                .replace(/\n/g, '<br>');
            
            // Wrap list items in ul tags
            if (formatted.includes('<li>')) {
                formatted = formatted.replace(/(<li>.*?)(<br>|$)/g, '$1</li>');
                formatted = formatted.replace(/(<li>.*?<\/li>)/g, '<ul class="list-disc list-inside space-y-2 mt-2">$1</ul>');
                formatted = formatted.replace(/<\/ul><ul class="list-disc list-inside space-y-2 mt-2">/g, '');
            }
            
            return formatted;
        }

        function setupSolutionExaminerGrid() {
            const grid = document.getElementById('solutionExaminerGrid');
            grid.innerHTML = '';
            
            examiners.forEach((examiner, index) => {
                const examinerCard = document.createElement('div');
                examinerCard.className = `text-center p-3 rounded-lg border-2 transition-colors ${
                    index === currentExaminerIndex ? 'border-gray-200' : 'border-gray-200'
                }`;
                
                if (index === currentExaminerIndex) {
                    examinerCard.style.background = 'linear-gradient(180deg, rgba(111, 172, 255, 0.1), rgba(170, 207, 255, 0.1))';
                    examinerCard.style.borderColor = '#6facff';
                }
                
                let avatarContent = '';
                if (examiner.image) {
                    avatarContent = `
                        <img src="${examiner.image}" alt="${examiner.name}" class="w-full h-full object-cover rounded-full" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                        <div class="w-full h-full flex items-center justify-center text-white text-sm font-bold rounded-full" style="background: linear-gradient(180deg, #6facff, #aacfff); display: none;">${examiner.avatar}</div>
                    `;
                } else {
                    avatarContent = examiner.avatar;
                }
                
                examinerCard.innerHTML = `
                    <div class="examiner-avatar" style="width: 50px; height: 50px; font-size: 16px; margin: 0 auto 8px; overflow: hidden;">
                        ${avatarContent}
                    </div>
                    <div class="text-sm font-medium text-gray-800">${examiner.name}</div>
                    <div class="text-xs text-gray-600">${examiner.field}</div>
                `;
                
                grid.appendChild(examinerCard);
            });
        }

        function continueToNextQuestion() {
            console.log('continueToNextQuestion aufgerufen');
            console.log('Aktueller Pr√ºfer:', currentExaminerIndex, 'Aktuelle Frage:', currentQuestionIndex);
            
            // Clear response fields
            if (document.getElementById('barettiResponse')) {
                document.getElementById('barettiResponse').value = '';
            }
            if (document.getElementById('currentResponse')) {
                document.getElementById('currentResponse').value = '';
            }
            
            // Move to next question or examiner
            currentQuestionIndex++;
            console.log('Nach Erh√∂hung - Frage:', currentQuestionIndex, 'von', examiners[currentExaminerIndex].questions.length);
            
            if (currentQuestionIndex >= examiners[currentExaminerIndex].questions.length) {
                // Move to next examiner
                currentExaminerIndex++;
                currentQuestionIndex = 0;
                console.log('Wechsel zu Pr√ºfer:', currentExaminerIndex, 'von', examiners.length);
                
                if (currentExaminerIndex >= examiners.length) {
                    // Exam finished
                    console.log('Pr√ºfung beendet');
                    showResults();
                    return;
                }
            }
            
            // Stop all audio before phase change
            stopAllAudio();
            
            // Hide solution phase, show exam phase
            document.getElementById('solutionPhase').classList.add('hidden');
            document.getElementById('examPhase').classList.remove('hidden');
            setPhase('Pr√ºfungsgespr√§ch');
            
            console.log('Zeige neue Frage an');
            displayCurrentQuestion();
        }

        function backToQuestion() {
            // Hide solution phase, show exam phase
            document.getElementById('solutionPhase').classList.add('hidden');
            document.getElementById('examPhase').classList.remove('hidden');
            setPhase('Pr√ºfungsgespr√§ch');        }

        function showResults() {
            // Stop all audio
            stopAllAudio();
            
            const solutionPhase = document.getElementById('solutionPhase');
            const resultsPhase = document.getElementById('resultsPhase');
            const phaseIndicator = document.getElementById('phaseIndicator');
            
            if (solutionPhase) solutionPhase.classList.add('hidden');
            if (resultsPhase) resultsPhase.classList.remove('hidden');
            if (phaseIndicator) phaseIndicator.textContent = 'Ergebnis';
        }

        function restartExam() {
            // Reset all variables
            currentExaminerIndex = 0;
            currentQuestionIndex = 0;
            selectedTopicText = '';
            examResponses = [];
            preparationTimeLeft = 1800;
            presentationTimeElapsed = 0;
            isPresentationTimerRunning = false;
            
            // Clear timers
            if (preparationTimer) clearInterval(preparationTimer);
            if (presentationTimer) clearInterval(presentationTimer);
            
            // Stop all audio
            stopAllAudio();
            
            // Reinitialize examiners
            initializeExaminers();
            
            // Show welcome screen
            document.getElementById('welcomeScreen').classList.remove('hidden');
            document.getElementById('preparationPhase').classList.add('hidden');
            document.getElementById('presentationPhase').classList.add('hidden');
            document.getElementById('transitionPhase').classList.add('hidden');
            document.getElementById('examPhase').classList.add('hidden');
            document.getElementById('solutionPhase').classList.add('hidden');
            document.getElementById('resultsPhase').classList.add('hidden');
            
            // Reset phase indicator
            setPhase('Vorbereitung');
        }

        function clearResponse() {
            document.getElementById('currentResponse').value = '';
        }

        function clearBarettiResponse() {
            document.getElementById('barettiResponse').value = '';
        }

        function showSampleSolution() {
            // Get the appropriate solution (specific or general)
            let solutionData = presentationSolutions.general;
            
            // Check if there's a specific solution for the selected topic
            if (presentationSolutions.specific[selectedTopicText]) {
                solutionData = presentationSolutions.specific[selectedTopicText];
            }
            
            // Create modal overlay
            const modalOverlay = document.createElement('div');
            modalOverlay.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4';
            modalOverlay.onclick = (e) => {
                if (e.target === modalOverlay) {
                    document.body.removeChild(modalOverlay);
                }
            };
            
            // Create modal content
            const modalContent = document.createElement('div');
            modalContent.className = 'bg-white rounded-2xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto';
            
            // Generate HTML for solution sections
            function generateSectionHTML(section) {
                const pointsHTML = section.points.map(point => `<li>${point}</li>`).join('');
                return `
                    <div class="bg-gray-50 rounded-lg p-4">
                        <h4 class="text-lg font-semibold text-gray-800 mb-3">${section.title}</h4>
                        <ul class="list-disc list-inside space-y-2 text-gray-700">
                            ${pointsHTML}
                        </ul>
                    </div>
                `;
            }
            
            modalContent.innerHTML = `
                <div class="p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-2xl font-bold text-gray-800">Musterl√∂sung f√ºr Ihren Vortrag</h3>
                        <button onclick="document.body.removeChild(this.closest('.fixed'))" class="text-gray-500 hover:text-gray-700 text-2xl font-bold">&times;</button>
                    </div>
                    
                    <div class="bg-blue-50 rounded-lg p-4 mb-6">
                        <h4 class="text-lg font-semibold text-blue-800 mb-2">Gew√§hltes Thema:</h4>
                        <p class="text-blue-700">"${selectedTopicText}"</p>
                    </div>
                    
                    <div class="space-y-6">	
${generateSectionHTML(solutionData.Gliederung)}
                        ${generateSectionHTML(solutionData.introduction)}
                        ${generateSectionHTML(solutionData.mainPart)}
                        ${generateSectionHTML(solutionData.conclusion)}
                    </div>
                    
                    <div class="mt-6 text-center">
                        <button onclick="document.body.removeChild(this.closest('.fixed'))" class="text-white px-6 py-2 rounded-lg font-medium transition-all" style="background: linear-gradient(180deg, #6facff, #aacfff); box-shadow: 0 2px 4px rgba(111, 172, 255, 0.3);" onmouseover="this.style.transform='translateY(-1px)'" onmouseout="this.style.transform='translateY(0)'">
                            Schlie√üen
                        </button>
                    </div>
                </div>
            `;
            
            modalOverlay.appendChild(modalContent);
            document.body.appendChild(modalOverlay);
        }

        // Presentation timer functions
        function startPresentationTimer() {
            if (!isPresentationTimerRunning) {
                isPresentationTimerRunning = true;
                presentationTimer = setInterval(() => {
                    presentationTimeElapsed++;
                    updatePresentationTimerDisplay();
                }, 1000);
                
                document.getElementById('startTimerBtn').disabled = true;
                document.getElementById('pauseTimerBtn').disabled = false;
            }
        }

        function pausePresentationTimer() {
            if (isPresentationTimerRunning) {
                isPresentationTimerRunning = false;
                clearInterval(presentationTimer);
                
                document.getElementById('startTimerBtn').disabled = false;
                document.getElementById('pauseTimerBtn').disabled = true;
            }
        }

        function resetPresentationTimer() {
            isPresentationTimerRunning = false;
            clearInterval(presentationTimer);
            presentationTimeElapsed = 0;
            updatePresentationTimerDisplay();
            
            document.getElementById('startTimerBtn').disabled = false;
            document.getElementById('pauseTimerBtn').disabled = true;
        }

        function updatePresentationTimerDisplay() {
            const minutes = Math.floor(presentationTimeElapsed / 60);
            const seconds = presentationTimeElapsed % 60;
            const timeString = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            document.getElementById('presentationTimer').textContent = timeString;
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', function() {
            initializeExaminers();
            console.log('Seite geladen, Pr√ºfer initialisiert');
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'98553e7ab01d1dbb',t:'MTc1ODkxNTc0Mi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>


