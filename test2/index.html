<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M√ºndliche Pr√ºfungssimulation</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://studio.pickaxe.co/api/embed/bundle.js" defer></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        body { 
            font-family: 'Inter', sans-serif; 
            box-sizing: border-box;
        }
        
        .examiner-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(180deg, #6facff, #aacfff);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
            color: white;
            margin: 0 auto 12px;
        }
        
        .timer-circle {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: conic-gradient(#ef4444 0deg, #f3f4f6 0deg);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        
        .timer-inner {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            font-weight: bold;
        }
        
        .question-bubble {
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            border-left: 4px solid #6facff;
            animation: slideIn 0.5s ease-out;
        }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .phase-indicator {
            background: linear-gradient(180deg, #6facff, #aacfff);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
        }
    </style>
</head>
<body class="min-h-screen" style="background: linear-gradient(180deg, #6facff, #aacfff);">
    

    <!-- Main Content -->
    <div class="max-w-6xl mx-auto px-6 py-8">
        
        <!-- Welcome Screen -->
        <div id="welcomeScreen" class="text-center">
            <div class="bg-white rounded-2xl shadow-lg p-8 max-w-2xl mx-auto">
                <h2 class="text-3xl font-bold text-gray-800 mb-4">Willkommen zur Pr√ºfungssimulation 1</h2>
                <!-- Pr√ºfungskommission Vorschau -->
                <div class="mb-6">
                    <!-- Vorsitzender -->
                    <div class="text-center mb-4">
                        <div class="w-24 h-24 mx-auto mb-2 rounded-full overflow-hidden">
                            <img src="https://s1.directupload.eu/images/250829/f5677mip.jpg" alt="Dr. Dumser" class="w-full h-full object-cover" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                            <div class="w-full h-full flex items-center justify-center text-white text-2xl font-bold" style="background: linear-gradient(180deg, #6facff, #aacfff); display: none;">DD</div>
                        </div>
                        <h4 class="font-semibold text-gray-800">Dr. Dumser</h4>
                        <p class="text-sm text-gray-600">Pr√ºfungsvorsitzender</p>
                        
                        <!-- Welcome Audio direkt unter Dr. Dumser -->
                        <div class="mt-4">
                            <audio id="welcomeAudio" controls class="w-full" preload="metadata" autoplay>
                                <source src="https://www.dropbox.com/scl/fi/96bz0m47ena4y1teeb8bj/Begr-ung.mp3?rlkey=a5qrkbc8wi7572gjinsxn7dnl&st=1w64td4v&raw=1" type="audio/mpeg">
                                Ihr Browser unterst√ºtzt das Audio-Element nicht.
                            </audio>
                        </div>
                    </div>
                    
                    <!-- Weitere Pr√ºfer -->
                    <div class="grid grid-cols-5 gap-3 max-w-lg mx-auto">
                        <div class="text-center">
                            <div class="w-16 h-16 mx-auto mb-1 rounded-full overflow-hidden">
                                <img src="https://s1.directupload.eu/images/250926/iyqmubkd.jpg" alt="Reinwald" class="w-full h-full object-cover" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                                <div class="w-full h-full flex items-center justify-center text-white text-sm font-bold" style="background: linear-gradient(180deg, #6facff, #aacfff); display: none;">DB</div>
                            </div>
                            <p class="text-xs text-gray-700 font-medium">Reinwald</p>
                            <p class="text-xs text-gray-500"> ESt, IStR, K√∂St, GewSt</p>
                        </div>
                        <div class="text-center">
                            <div class="w-16 h-16 mx-auto mb-1 rounded-full overflow-hidden">
                                <img src="https://s1.directupload.eu/images/250829/zzdffhky.jpg" alt="Dr. Baretti" class="w-full h-full object-cover" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                                <div class="w-full h-full flex items-center justify-center text-white text-sm font-bold" style="background: linear-gradient(180deg, #6facff, #aacfff); display: none;">S</div>
                            </div>
                            <p class="text-xs text-gray-700 font-medium">Dr. Baretti</p>
                            <p class="text-xs text-gray-500"> Berufsrecht, VWL, BWL</p>
                        </div>
                        <div class="text-center">
                            <div class="w-16 h-16 mx-auto mb-1 rounded-full overflow-hidden">
                                <img src="https://s1.directupload.eu/images/250829/qoko6duz.jpg" alt="Wirth" class="w-full h-full object-cover" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                                <div class="w-full h-full flex items-center justify-center text-white text-sm font-bold" style="background: linear-gradient(180deg, #6facff, #aacfff); display: none;">W</div>
                            </div>
                            <p class="text-xs text-gray-700 font-medium">Wirth</p>
                            <p class="text-xs text-gray-500">AO, FGO, ErbSt</p>
                        </div>
                        <div class="text-center">
                            <div class="w-16 h-16 mx-auto mb-1 rounded-full overflow-hidden">
                                <img src="https://s1.directupload.eu/images/250829/8q6up3ep.jpg" alt="Scherf" class="w-full h-full object-cover" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                                <div class="w-full h-full flex items-center justify-center text-white text-sm font-bold" style="background: linear-gradient(180deg, #6facff, #aacfff); display: none;">P</div>
                            </div>
                            <p class="text-xs text-gray-700 font-medium">Scherf</p>
                            <p class="text-xs text-gray-500">USt</p>
                        </div>
                        <div class="text-center">
                            <div class="w-16 h-16 mx-auto mb-1 rounded-full overflow-hidden">
                                <img src="https://s1.directupload.eu/images/250926/mw5zoero.jpg" alt="Priller" class="w-full h-full object-cover" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                                <div class="w-full h-full flex items-center justify-center text-white text-sm font-bold" style="background: linear-gradient(180deg, #6facff, #aacfff); display: none;">R</div>
                            </div>
                            <p class="text-xs text-gray-700 font-medium">Priller</p>
                            <p class="text-xs text-gray-500"> BilSt, UmwSt</p>
                        </div>
                    </div>
                </div>
                
                <!-- Ablauf der Pr√ºfung -->
                <div class="mb-6">
                    <h3 class="text-lg font-semibold text-gray-800 mb-3">Ablauf der Pr√ºfung</h3>
                    <div class="text-left max-w-md mx-auto space-y-2">
                        <div class="flex items-center">
                            <span class="w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold mr-3">1</span>
                            <span class="text-gray-700">Thema ausw√§hlen & 30 Min. vorbereiten</span>
                        </div>
                        <div class="flex items-center">
                            <span class="w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold mr-3">2</span>
                            <span class="text-gray-700">Vortrag halten & direktes Feedback erhalten</span>
                        </div>
                        <div class="flex items-center">
                            <span class="w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold mr-3">3</span>
                            <span class="text-gray-700">Vertiefende Fragen der Pr√ºfungskommission</span>
                        </div>
                    </div>
                </div>
                
                <button onclick="startExam()" class="text-white px-8 py-3 rounded-lg font-semibold transition-colors" style="background: linear-gradient(180deg, #6facff, #aacfff); box-shadow: 0 4px 6px rgba(111, 172, 255, 0.3);" onmouseover="this.style.transform='translateY(-1px)'" onmouseout="this.style.transform='translateY(0)'">
                    Pr√ºfung starten
                </button>
            </div>
        </div>

        <!-- Preparation Phase -->
        <div id="preparationPhase" class="hidden">
            <!-- Restart Button in Preparation Phase -->
            <div class="mb-6 text-right">
                <button onclick="restartExam()" class="text-gray-700 px-4 py-2 rounded-lg font-medium transition-all shadow-md bg-white border border-gray-300 hover:bg-gray-50" onmouseover="this.style.transform='translateY(-1px)'" onmouseout="this.style.transform='translateY(0)'">
                    Simulation neu starten
                </button>
            </div>
            
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Timer -->
                <div class="lg:col-span-1">
                    <div class="bg-white rounded-2xl shadow-lg p-6 text-center sticky top-8">
                        <h3 class="text-xl font-semibold mb-4 text-gray-800">Vorbereitungszeit</h3>
                        <div class="timer-circle mx-auto mb-4" id="timerCircle">
                            <div class="timer-inner" id="timerDisplay">30:00</div>
                        </div>
                        <p class="text-sm text-gray-600">Nutze die Zeit, um deinen Vortrag zu strukturieren</p>
                    </div>
                </div>

                <!-- Topic Selection -->
                <div class="lg:col-span-2">
                    <div class="bg-white rounded-2xl shadow-lg p-6 mb-6">
                        <h3 class="text-xl font-semibold mb-4 text-gray-800">W√§hle dein Vortragsthema</h3>
                        <div class="space-y-3" id="topicOptions">
                            <!-- Topics will be populated by JavaScript -->
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-2xl shadow-lg p-6">
                        <h3 class="text-xl font-semibold mb-4 text-gray-800">Gew√§hltes Thema</h3>
                        <div class="rounded-lg p-4" style="background: linear-gradient(180deg, rgba(111, 172, 255, 0.1), rgba(170, 207, 255, 0.1)); border: 1px solid rgba(111, 172, 255, 0.3);">
                            <p class="text-lg font-medium" style="color: #4a7bb8;" id="selectedTopic">
                                Bitte w√§hle zun√§chst ein Thema aus
                            </p>
                        </div>
                        
                        <div class="mt-6 text-center">
                            <button onclick="skipToExam()" id="proceedButton" disabled class="text-white px-8 py-3 rounded-lg font-semibold transition-all disabled:opacity-50 disabled:cursor-not-allowed" style="background: linear-gradient(180deg, #6facff, #aacfff); box-shadow: 0 4px 6px rgba(111, 172, 255, 0.3);" onmouseover="if(!this.disabled) { this.style.transform='translateY(-1px)' }" onmouseout="this.style.transform='translateY(0)'">
                                Vorbereitung beenden
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Presentation Phase -->
        <div id="presentationPhase" class="hidden">
            <!-- Restart Button in Presentation Phase -->
            <div class="mb-6 text-right">
                <button onclick="restartExam()" class="text-gray-700 px-4 py-2 rounded-lg font-medium transition-all shadow-md bg-white border border-gray-300 hover:bg-gray-50" onmouseover="this.style.transform='translateY(-1px)'" onmouseout="this.style.transform='translateY(0)'">
                    Simulation neu starten
                </button>
            </div>
            
            <!-- Current Examiner -->
            <div class="bg-white rounded-2xl shadow-lg p-6 mb-8">
                <div class="flex items-center justify-between mb-6">
                    <div class="flex items-center">
                        <div class="w-24 h-24 mr-4 rounded-full overflow-hidden">
                            <img src="https://s1.directupload.eu/images/250829/f5677mip.jpg" alt="Dr. Dumser" class="w-full h-full object-cover" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                            <div class="w-full h-full flex items-center justify-center text-white text-2xl font-bold" style="background: linear-gradient(180deg, #6facff, #aacfff); display: none;">DD</div>
                        </div>
                        <div>
                            <h3 class="text-xl font-semibold text-gray-800">Dr. Dumser</h3>
                            <p class="text-gray-600">Pr√ºfungsvorsitzender</p>
                        </div>
                    </div>
                </div>

                <!-- Current Question -->
                <div class="question-bubble rounded-lg p-6 mb-6" id="presentationQuestionContainer">
                    <div class="mb-3">
                        <p class="text-lg text-gray-800" id="presentationQuestion">
Ich hoffe Sie konnten die Vorbereitungszeit gut nutzen. Beginnen wir jetzt mit Ihrem Vortrag. Bitte stellen Sie sich zun√§chst vor. Nennen Sie am Anfang das Thema, f√ºr das Sie sich entschieden haben. Sie k√∂nnen Ihren Vortrag unten eingeben. Nutzen Sie gerne die Diktierfunktion Ihres Handys, damit Sie das Sprechen √ºben. Anschlie√üend senden Sie Ihren Vortrag ab. Unsere k√ºnstliche Intelligenz bewertet ihn und gibt Ihnen Tipps. Unten k√∂nnen Sie einen Timer nutzen, die Musterl√∂sung aufrufen oder mit den Pr√ºfungsrunden starten.                        </p>
                    </div>
                    
                    <!-- Audio Player for Dr. Dumser -->
                    <div id="presentationAudioPlayer" class="mt-4">
                        <audio id="presentationAudio" controls class="w-full" preload="metadata">
                            <source src="https://www.dropbox.com/scl/fi/xrkxtywr0p376riknh47b/Vortrag.mp3?rlkey=nke47ekt6d8v7vj7tyhdaox3y&st=lyfjd7f3&raw=1" type="audio/mpeg">
                            Ihr Browser unterst√ºtzt das Audio-Element nicht.
                        </audio>
                    </div>
                </div>

                <!-- Response Area -->
                <div class="mb-6" id="presentationResponseArea">
                    <!-- Chat Widget for Presentation -->
                    <div id="presentationChatWidget">
                        <div class="flex justify-between items-center mb-2">
                            <label class="block text-sm font-medium text-gray-700">Ihr Vortrag an Dr. Dumser:</label>
                        </div>
                        <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                            <div id="deployment-dbb15733-7d3c-44d6-98f1-132687e95879"></div>
                        </div>
                    </div>
                </div>

                <!-- Presentation Timer -->
                <div class="bg-gray-50 rounded-lg p-4 mb-6 text-center">
                    <h4 class="text-sm font-medium text-gray-700 mb-2">Vortragszeit</h4>
                    <div class="text-2xl font-bold" style="color: #6facff;" id="presentationTimer">00:00</div>
                    <div class="flex justify-center gap-2 mt-3">
                        <button onclick="startPresentationTimer()" id="startTimerBtn" class="px-3 py-1 bg-green-500 hover:bg-green-600 text-white rounded text-sm font-medium transition-colors">
                            Start
                        </button>
                        <button onclick="pausePresentationTimer()" id="pauseTimerBtn" class="px-3 py-1 bg-yellow-500 hover:bg-yellow-600 text-white rounded text-sm font-medium transition-colors" disabled>
                            Pause
                        </button>
                        <button onclick="resetPresentationTimer()" id="resetTimerBtn" class="px-3 py-1 bg-gray-500 hover:bg-gray-600 text-white rounded text-sm font-medium transition-colors">
                            Reset
                        </button>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="flex gap-4">
                    <button onclick="finishPresentation()" class="text-white px-6 py-2 rounded-lg font-medium transition-all" style="background: linear-gradient(180deg, #6facff, #aacfff); box-shadow: 0 2px 4px rgba(111, 172, 255, 0.3);" onmouseover="this.style.transform='translateY(-1px)'; this.style.boxShadow='0 4px 8px rgba(111, 172, 255, 0.4)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 4px rgba(111, 172, 255, 0.3)'">
                        Pr√ºfungsrunden starten
                    </button>
                    <button onclick="showSampleSolution()" class="bg-gray-100 hover:bg-gray-200 text-gray-700 px-6 py-2 rounded-lg font-medium transition-colors">
                        Musterl√∂sung
                    </button>
                </div>
            </div>
        </div>

        <!-- Transition Phase -->
        <div id="transitionPhase" class="hidden">
            <!-- Restart Button in Transition Phase -->
            <div class="mb-6 text-right">
                <button onclick="restartExam()" class="text-gray-700 px-4 py-2 rounded-lg font-medium transition-all shadow-md bg-white border border-gray-300 hover:bg-gray-50" onmouseover="this.style.transform='translateY(-1px)'" onmouseout="this.style.transform='translateY(0)'">
                    Simulation neu starten
                </button>
            </div>
            
            <div class="bg-white rounded-2xl shadow-lg p-6 mb-8 text-center">
                <div class="flex items-center justify-center mb-6">
                    <div class="w-24 h-24 mr-4 rounded-full overflow-hidden">
                        <img src="https://s1.directupload.eu/images/250829/f5677mip.jpg" alt="Dr. Dumser" class="w-full h-full object-cover" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                        <div class="w-full h-full flex items-center justify-center text-white text-2xl font-bold" style="background: linear-gradient(180deg, #6facff, #aacfff); display: none;">DD</div>
                    </div>
                    <div>
                        <h3 class="text-xl font-semibold text-gray-800">Dr. Dumser</h3>
                        <p class="text-gray-600">Pr√ºfungsvorsitzender</p>
                    </div>
                </div>

                <!-- Transition Message -->
                <div class="question-bubble rounded-lg p-6 mb-6">
                    <div class="mb-3">
                        <p class="text-lg text-gray-800">
                            Vielen Dank f√ºr Ihren Vortrag. Wir starten nun mit dem Pr√ºfungsgespr√§ch. Die Pr√ºfer werden Ihnen in ihren jeweiligen Fachgebieten Fragen stellen. Bitte beantworten Sie diese. Den Anfang macht Frau Reinwald in Einkommensteuer.
                        </p>
                    </div>
                    
                    <!-- Audio Player for Transition -->
                    <div class="mt-4">
                        <audio id="transitionAudio" controls class="w-full" preload="metadata">
                            <source src="https://www.dropbox.com/scl/fi/n9sr1838ofcgy423mucns/Fragerunde.mp3?rlkey=mdcqz50ab825yor017u6mew9m&st=0nwgatl5&raw=1" type="audio/mpeg">
                            Ihr Browser unterst√ºtzt das Audio-Element nicht.
                        </audio>
                    </div>
                </div>

                <!-- Action Button -->
                <div class="mt-6">
                    <button onclick="startExamQuestions()" class="text-white px-8 py-3 rounded-lg font-semibold transition-all" style="background: linear-gradient(180deg, #6facff, #aacfff); box-shadow: 0 4px 6px rgba(111, 172, 255, 0.3);" onmouseover="this.style.transform='translateY(-1px)'" onmouseout="this.style.transform='translateY(0)'">
                        Pr√ºfungsgespr√§ch beginnen
                    </button>
                </div>
            </div>
        </div>

        <!-- Exam Phase -->
        <div id="examPhase" class="hidden">
            <!-- Restart Button in Exam Phase -->
            <div class="mb-6 text-right">
                <button onclick="restartExam()" class="text-gray-700 px-4 py-2 rounded-lg font-medium transition-all shadow-md bg-white border border-gray-300 hover:bg-gray-50" onmouseover="this.style.transform='translateY(-1px)'" onmouseout="this.style.transform='translateY(0)'">
                    Simulation neu starten
                </button>
            </div>
            
            <!-- Current Examiner -->
            <div class="bg-white rounded-2xl shadow-lg p-6 mb-8">
                <div class="flex items-center justify-between mb-6">
                    <div class="flex items-center">
                        <div id="currentExaminerAvatar" class="examiner-avatar mr-4">DB</div>
                        <div>
                            <h3 class="text-xl font-semibold text-gray-800" id="currentExaminerName">Dr. Baretti</h3>
                            <p class="text-gray-600" id="currentExaminerField">Fachbereich: VWL & BWL</p>
                        </div>
                    </div>
                    <div class="text-right">
                        <div class="text-sm text-gray-500">Pr√ºfer</div>
                        <div class="text-2xl font-bold" style="color: #6facff;" id="examinerProgress">1 / 6</div>
                    </div>
                </div>

                <!-- Current Question -->
                <div class="question-bubble rounded-lg p-6 mb-6" id="questionContainer">
                    <div class="mb-3">
                        <p class="text-lg text-gray-800" id="currentQuestion">
                            Bitte stellen Sie sich zun√§chst vor und beginnen Sie mit Ihrem Vortrag zum Thema "Die Auswirkungen der Digitalisierung auf moderne Arbeitspl√§tze".
                        </p>
                    </div>
                    
                    <!-- Audio Player for Dr. Schmidt -->
                    <div id="audioPlayer" class="mt-4 hidden">
                        <audio id="drSchmidtAudio" controls class="w-full" preload="metadata">
                            <source src="https://www.dropbox.com/scl/fi/jq9xlnehbcna73rvyyvej/ElevenLabs_2025-09-24T09_36_17_Liam_pre_sp100_s50_sb75_v3.mp3?rlkey=r7vgyfxqeqrmszlvbcqpe2kxw&raw=1" type="audio/mpeg">
                            Ihr Browser unterst√ºtzt das Audio-Element nicht.
                        </audio>
                    </div>
                </div>

                <!-- Response Area -->
                <div class="mb-6" id="responseArea">
                    <!-- Chat Widget for Dr. Baretti -->
                    <div id="chatWidget" class="hidden">
                        <!-- Text area for Dr. Baretti -->
                        <div class="flex justify-between items-center mb-2">
                            <label class="block text-sm font-medium text-gray-700">Ihre Antwort an Dr. Baretti:</label>
                            <div class="flex gap-2">
                                <button 
                                    onclick="clearBarettiResponse()" 
                                    class="px-3 py-1 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg text-sm font-medium transition-colors"
                                >
                                    L√∂schen
                                </button>
                            </div>
                        </div>
                        <textarea 
                            id="barettiResponse" 
                            placeholder="Geben Sie hier Ihre Antwort an Dr. Baretti ein..."
                            class="w-full h-32 p-4 border border-gray-200 rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                        ></textarea>
                    </div>
                    
                    <!-- Standard Text Area for other examiners -->
                    <div id="standardResponse">
                        <div class="flex justify-between items-center mb-2">
                            <label class="block text-sm font-medium text-gray-700">Ihre Antwort:</label>
                            <div class="flex gap-2">
                                <button 
                                    onclick="clearResponse()" 
                                    class="px-3 py-1 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg text-sm font-medium transition-colors"
                                >
                                    L√∂schen
                                </button>
                            </div>
                        </div>
                        <textarea 
                            id="currentResponse" 
                            placeholder="Geben Sie hier Ihre Antwort ein..."
                            class="w-full h-32 p-4 border border-gray-200 rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                        ></textarea>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="flex gap-4">
                    <button onclick="nextQuestion()" class="text-white px-6 py-2 rounded-lg font-medium transition-all" style="background: linear-gradient(180deg, #6facff, #aacfff); box-shadow: 0 2px 4px rgba(111, 172, 255, 0.3);" onmouseover="this.style.transform='translateY(-1px)'; this.style.boxShadow='0 4px 8px rgba(111, 172, 255, 0.4)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 4px rgba(111, 172, 255, 0.3)'">
                        Antwort abgeben & L√∂sung anzeigen
                    </button>
                </div>
            </div>

            <!-- Examiner Overview -->
            <div class="bg-white rounded-2xl shadow-lg p-6">
                <h3 class="text-lg font-semibold mb-4 text-gray-800">Pr√ºfungskommission</h3>
                <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4" id="examinerGrid">
                    <!-- Examiners will be populated by JavaScript -->
                </div>
            </div>
        </div>

        <!-- Solution Phase -->
        <div id="solutionPhase" class="hidden">
            <!-- Restart Button in Solution Phase -->
            <div class="mb-6 text-right">
                <button onclick="restartExam()" class="text-gray-700 px-4 py-2 rounded-lg font-medium transition-all shadow-md bg-white border border-gray-300 hover:bg-gray-50" onmouseover="this.style.transform='translateY(-1px)'" onmouseout="this.style.transform='translateY(0)'">
                    Simulation neu starten
                </button>
            </div>
            
            <div class="bg-white rounded-2xl shadow-lg p-6 mb-8">
                <div class="flex items-center justify-between mb-6">
                    <div class="flex items-center">
                        <div id="solutionExaminerAvatar" class="examiner-avatar mr-4">DB</div>
                        <div>
                            <h3 class="text-xl font-semibold text-gray-800" id="solutionExaminerName">Dr. Baretti</h3>
                            <p class="text-gray-600" id="solutionExaminerField">Fachbereich: VWL & BWL</p>
                        </div>
                    </div>
                    <div class="text-right">
                        <div class="text-sm text-gray-500">Pr√ºfer</div>
                        <div class="text-2xl font-bold" style="color: #6facff;" id="solutionExaminerProgress">1 / 6</div>
                    </div>
                </div>

                <!-- Question -->
                <div class="bg-gray-50 rounded-lg p-4 mb-6">
                    <h4 class="text-sm font-medium text-gray-700 mb-2">Frage:</h4>
                    <p class="text-gray-800" id="solutionQuestion">Welche konkreten Vorteile sehen Sie in der Digitalisierung f√ºr Unternehmen?</p>
                </div>

                <!-- Your Answer -->
                <div class="bg-blue-50 rounded-lg p-4 mb-6">
                    <h4 class="text-sm font-medium text-blue-700 mb-2">Ihre Antwort:</h4>
                    <p class="text-blue-800" id="solutionYourAnswer">Ihre Antwort wird hier angezeigt...</p>
                </div>

                <!-- Model Solution -->
                <div class="bg-gray-50 rounded-lg p-4 mb-6">
                    <h4 class="text-sm font-medium text-gray-700 mb-2">Musterl√∂sung:</h4>
                    <div class="text-gray-800" id="solutionModelAnswer">
                        <p class="mb-3"><strong>Hauptvorteile der Digitalisierung f√ºr Unternehmen:</strong></p>
                        <ul class="list-disc list-inside space-y-2">
                            <li><strong>Effizienzsteigerung:</strong> Automatisierung wiederkehrender Prozesse reduziert Arbeitsaufwand und Fehlerquoten</li>
                            <li><strong>Kostensenkung:</strong> Langfristige Einsparungen durch optimierte Abl√§ufe und reduzierte Personalkosten</li>
                            <li><strong>Verbesserte Datenanalyse:</strong> Bessere Entscheidungsgrundlagen durch datengetriebene Insights</li>
                            <li><strong>Erh√∂hte Flexibilit√§t:</strong> Schnellere Anpassung an Marktver√§nderungen und Kundenbed√ºrfnisse</li>
                            <li><strong>Neue Gesch√§ftsmodelle:</strong> Erschlie√üung digitaler M√§rkte und Services</li>
                            <li><strong>Verbesserte Kundenerfahrung:</strong> 24/7 Verf√ºgbarkeit und personalisierte Services</li>
                        </ul>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="flex gap-4">
                    <button onclick="continueToNextQuestion()" class="text-white px-6 py-2 rounded-lg font-medium transition-all" style="background: linear-gradient(180deg, #6facff, #aacfff); box-shadow: 0 2px 4px rgba(111, 172, 255, 0.3);" onmouseover="this.style.transform='translateY(-1px)'; this.style.boxShadow='0 4px 8px rgba(111, 172, 255, 0.4)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 4px rgba(111, 172, 255, 0.3)'">
                        Weiter zur n√§chsten Frage
                    </button>
                    <button onclick="backToQuestion()" class="bg-gray-100 hover:bg-gray-200 text-gray-700 px-6 py-2 rounded-lg font-medium transition-colors">
                        Zur√ºck zur Frage
                    </button>
                </div>
            </div>

            <!-- Examiner Overview -->
            <div class="bg-white rounded-2xl shadow-lg p-6">
                <h3 class="text-lg font-semibold mb-4 text-gray-800">Pr√ºfungskommission</h3>
                <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4" id="solutionExaminerGrid">
                    <!-- Examiners will be populated by JavaScript -->
                </div>
            </div>
        </div>

        <!-- Results Phase -->
        <div id="resultsPhase" class="hidden">
            <div class="bg-white rounded-2xl shadow-lg p-8 text-center max-w-2xl mx-auto">
                <div class="text-6xl mb-6">üéâ</div>
                <h2 class="text-3xl font-bold text-gray-800 mb-4">Pr√ºfung abgeschlossen!</h2>
                <p class="text-gray-600 mb-6">
                    Sie haben erfolgreich alle Fragen der 6 Pr√ºfer beantwortet. 
                    In einer echten Pr√ºfung w√ºrden Sie nun das Ergebnis erfahren.
                </p>
                <div class="bg-green-50 border border-green-200 rounded-lg p-4 mb-6">
                    <p class="text-green-800 font-medium">
                        Simulation erfolgreich durchgef√ºhrt! 
                        Sie haben wertvolle Pr√ºfungserfahrung gesammelt.
                    </p>
                </div>
                <button onclick="restartExam()" class="text-white px-8 py-3 rounded-lg font-semibold transition-all" style="background: linear-gradient(180deg, #6facff, #aacfff); box-shadow: 0 4px 6px rgba(111, 172, 255, 0.3);" onmouseover="this.style.transform='translateY(-1px)'" onmouseout="this.style.transform='translateY(0)'">
                    Neue Simulation starten
                </button>
            </div>
        </div>
    </div>

    <script>
        // ========================================
        // BEARBEITBARER BEREICH: VORTRAGSTHEMEN
        // ========================================
        // Hier k√∂nnen Sie alle Vortragsthemen nach Kategorien bearbeiten
        
        const topicsByCategory = {
            // Gruppe 1: ESt, BilSt, etc
            "Bilanzsteuer": [
                "Steuerrechtliche Behandlung des Erwerbs und der Ver√§u√üerung eigener Anteile einer GmbH"
            ],
            // Gruppe 2: AO, BGB, etc
            "Abgabenordnung": [
                "Zwangsmittel im Steuerrecht"
            ],
            
            // Gruppe 3: Spezialgebiete
            "Umsatzsteuer": [
                "Gesch√§ftsver√§u√üerung im Ganzen"
            ]
        };

        // ========================================
        // BEARBEITBARER BEREICH: MUSTERL√ñSUNGEN
        // ========================================
        // Hier k√∂nnen Sie die Musterl√∂sungen f√ºr die Vortr√§ge bearbeiten
        
        const presentationSolutions = {
            // Allgemeine Struktur f√ºr alle Themen
            general: {
                introduction: {
                    title: "1. Einleitung (2-3 Minuten)",
                    points: [
                        "<strong>Begr√º√üung:</strong> \"Sehr geehrte Damen und Herren der Pr√ºfungskommission...\"",
                        "<strong>Themennennung:</strong> Klare Benennung des gew√§hlten Themas",
                        "<strong>Gliederung:</strong> Kurze √úbersicht √ºber die Struktur des Vortrags",
                        "<strong>Relevanz:</strong> Warum ist dieses Thema f√ºr Steuerberater wichtig?"
                    ]
                },
                mainPart: {
                    title: "2. Hauptteil (8-10 Minuten)",
                    points: [
                        "<strong>Grundlagen:</strong> Definition und rechtliche Einordnung",
                        "<strong>Aktuelle Rechtslage:</strong> Relevante Gesetze, Verordnungen, BMF-Schreiben",
                        "<strong>Praktische Anwendung:</strong> Konkrete Beispiele aus der Beratungspraxis",
                        "<strong>Problembereiche:</strong> H√§ufige Streitpunkte und Unsicherheiten",
                        "<strong>Rechtsprechung:</strong> Wichtige BFH-Urteile und deren Auswirkungen"
                    ]
                },
                conclusion: {
                    title: "3. Schluss (2-3 Minuten)",
                    points: [
                        "<strong>Zusammenfassung:</strong> Die wichtigsten Punkte nochmals kurz",
                        "<strong>Ausblick:</strong> Zuk√ºnftige Entwicklungen oder geplante √Ñnderungen",
                        "<strong>Beratungshinweise:</strong> Was sollten Mandanten beachten?",
                        "<strong>Abschluss:</strong> \"Vielen Dank f√ºr Ihre Aufmerksamkeit\""
                    ]
                }
            },
            
// Spezifische Musterl√∂sungen f√ºr einzelne Themen (optional)
specific: {
    // Beispiel f√ºr ein spezifisches Thema:
    "Steuerrechtliche Behandlung des Erwerbs und der Ver√§u√üerung eigener Anteile einer GmbH": {
        introduction: {
            title: "√úbersicht ",
            points: "**Gliederung**\n\n**Einleitung**\n\n**Wirtschaftliche Bedeutung des Erwerbs eigener Anteile**\n\n**Hauptteil**\n‚Ä¢ **Handelsrechtliche Grundlagen**\n‚Ä¢ **Steuerrechtliche Konsequenzen f√ºr die Gesellschaft**\n‚Ä¢ **Steuerrechtliche Konsequenzen f√ºr den Gesellschafter**\n\n**Schluss**\n**Verzerrungen aufgrund fehlendem Direktzugriff auf steuerliches Einlagekonto**"            
        },
        mainPart: {
            title: "2. Hauptteil - Kleinunternehmerregelung",
            points: [
                "<strong>Umsatzgrenzen:</strong> 22.000 ‚Ç¨ Vorjahr, 50.000 ‚Ç¨ laufendes Jahr",
                "<strong>Steuerbefreiung:</strong> Keine USt auf Ausgangsrechnungen",
                "<strong>Kein Vorsteuerabzug:</strong> Wichtiger Nachteil bei hohen Investitionen",
                "<strong>Verzichtsm√∂glichkeit:</strong> Regelbesteuerung f√ºr 5 Jahre bindend",
                "<strong>Rechnungsangaben:</strong> Pflichthinweis auf Steuerbefreiung"
            ]
        },
        conclusion: {
            title: "3. Schluss - Kleinunternehmerregelung",
            points: [
                "<strong>Beratungshinweis:</strong> Individuelle Pr√ºfung der Vor- und Nachteile",
                "<strong>Grenz√ºberschreitung:</strong> Automatischer Wechsel zur Regelbesteuerung",
                "<strong>Dokumentation:</strong> Sorgf√§ltige Umsatz√ºberwachung erforderlich"
            ]
        }
    },

    // NEU hinzugef√ºgt: Musterl√∂sung f√ºr Probe
    "Probe": {
        introduction: {
            title: "1. Einleitung ‚Äì Probe",
            points: [
                "<strong>Begr√º√üung & Thema:</strong> Vorstellung des Themas 'Probe'",
                "<strong>Relevanz:</strong> Warum dieses Thema wichtig ist",
                "<strong>Gliederung:</strong> √úbersicht √ºber den Aufbau des Vortrags"
            ]
        },
        mainPart: {
            title: "2. Hauptteil ‚Äì Probe",
            points: [
                "<strong>Grundlagen:</strong> Definition und Einordnung",
                "<strong>Praxis:</strong> Beispiele oder typische Anwendungsf√§lle",
                "<strong>Probleme:</strong> Herausforderungen und L√∂sungsans√§tze"
            ]
        },
        conclusion: {
            title: "3. Schluss ‚Äì Probe",
            points: [
                "<strong>Zusammenfassung:</strong> Wichtigste Aussagen kurz wiederholen",
                "<strong>Ausblick:</strong> Wohin die Entwicklung geht",
                "<strong>Abschluss:</strong> ‚ÄûVielen Dank f√ºr Ihre Aufmerksamkeit.‚Äú"
            ]
        }
    }
    // Weitere spezifische Themen k√∂nnen hier hinzugef√ºgt werden...
}
};
        // ========================================
        // ENDE DES BEARBEITBAREN BEREICHS
        // ========================================

        // Function to stop all audio elements
        function stopAllAudio() {
            const audioElements = document.querySelectorAll('audio');
            audioElements.forEach(audio => {
                if (!audio.paused) {
                    audio.pause();
                    audio.currentTime = 0;
                }
            });
        }
// Sicherer Phasenwechsel ohne Header
function setPhase(text) {
    const el = document.getElementById('phaseIndicator');
    if (el) el.textContent = text;
}

        let selectedTopicText = '';

        // Exam data with solutions
        const examinerData = [
            {
                name: "Reinwald",
                field: " ESt, IStR, K√∂St, GewSt", 
                avatar: "R",
                image: " https://s1.directupload.eu/images/250926/iyqmubkd.jpg ",
                rounds: [
                    [
                        {
                            question: "Wir starten mit der Einkommensteuer: Stellen wir uns mal folgendes vor: Ihr Mandant ist ein Prominenter und begibt sich nach Australien und ist Teilnehmer am ‚ÄûDschungelcamp‚Äú. Er erh√§lt hierf√ºr eine Gage und verpflichtet sich zur Weisungsgebundenheit und der Leistung von Aufgaben. Er hat dabei die Rechte am Filmmaterial an den Sender abgetreten. Welche Eink√ºnfte erzielt der prominente Mandant mit seiner Gage?",
                            audio: "https://www.dropbox.com/scl/fi/iv9ou1l5vbuouxy61bk9p/k.r.1.mp3?rlkey=qqahd59z9kobr61ujzgbyuu00&st=l9aab1mx&raw=1",
                            solution: "Vorweg ist anzumerken, dass **keine gewerblichen Eink√ºnfte i. S. d. ¬ß 15 EStG** vorliegen.\nDie **Voraussetzungen des ¬ß 15 Abs. 2 EStG** sind **nicht alle erf√ºllt** ‚Äì insbesondere fehlt es an der **Nachhaltigkeit**.\n\nDar√ºber hinaus liegen auch **keine selbst√§ndigen Eink√ºnfte i. S. d. ¬ß 18 EStG** vor, da insoweit **kein Katalogberuf** vorliegt.\n\nAuch die **Eink√ºnfte aus nichtselbst√§ndiger Arbeit** k√∂nnen ausgeschlossen werden, weil **kein abh√§ngiges Arbeitsverh√§ltnis i. S. d. ¬ß 19 EStG** besteht.\n\nDerartige **Gagen sind daher gem. ¬ß 22 Nr. 3 EStG zu versteuern**, weil diese **Leistungen um des Entgelts willen erbracht** werden.\nEntscheidendes Kriterium f√ºr die Steuerbarkeit ist, dass der **Auftritt des Kandidaten** und das **gewonnene Preisgeld** in einem **gegenseitigen Leistungsverh√§ltnis** stehen.\n\nAls Anhaltspunkt f√ºr ein derartiges Leistungsverh√§ltnis gilt z. B., dass dem Kandidaten von Seiten des Produzenten ein **bestimmtes Verhaltensmuster oder √Ñhnliches vorgegeben** wird oder dass er **neben der Gewinnchance** und dem damit verbundenen **Preisgeld** noch ein **erfolgsunabh√§ngiges Antritts- oder Tagegeld** erh√§lt (**BMF v. 30.05.2008, Beck‚Äôsche StErlasse 1 ¬ß 22/3**)."
                        },
                        {
                            question: "Jetzt sind wir ja schon beim Thema der Abgrenzung der Einkunftsarten. Dann k√∂nnen Sie mir bestimmt folgendes beantworten: Wie ist die T√§tigkeit beziehungsweise Einkunftsart eines selbst√§ndigen Handelsvertreters mit Eink√ºnften nach ¬ß 15 EStG zu einem angestellten Handelsvertreter mit Eink√ºnften nach ¬ß 19 EStG abzugrenzen?",
                            audio: "https://www.dropbox.com/scl/fi/b232lergyu52dg8ee82gg/k.r.2.mp3?rlkey=ht4iwt8g3qg5y6bhywh9teety&st=fe9e5i0j&raw=1",
                            solution: "F√ºr die **Selbst√§ndigkeit eines Handelsvertreters** sprechen:\n**Unternehmerrisiko**, **Unternehmerinitiative**, **Selbst√§ndigkeit in Organisation und Durchf√ºhrung** der eigenen T√§tigkeit, **eigene Kostentragung**, **Besch√§ftigung eigener Arbeitnehmer**, **Unterhalt eines eigenen B√ºros**, **gesch√§ftlicher Kontakt zu mehreren Auftraggebern**, **freie Erledigung des Auftrags**, **Fehlen einer Urlaubsregelung und einer festen Arbeitszeit**, sowie **keine Eingliederung in den Betrieb des Auftraggebers**.\nAuch die **Verg√ºtungsart** kann von Bedeutung sein. F√ºr die Selbst√§ndigkeit spricht insbesondere eine **Verg√ºtung nach dem Erfolg**.\nEine festgestellte Selbst√§ndigkeit f√ºhrt zu **gewerblichen Eink√ºnften nach ¬ß 15 Abs. 1 S. 1 Nr. 1 EStG**.\n\nF√ºr die **Arbeitnehmereigenschaft eines Handelsvertreters** sprechen:\n**Kein Unternehmerrisiko**, **keine Unternehmerinitiative**, **pers√∂nliche Abh√§ngigkeit vom Auftraggeber**, **Weisungsgebundenheit** insbesondere im Hinblick auf **Ort, Zeit und Inhalt der T√§tigkeit**, **Eingliederung in den Betrieb**, **feste Bez√ºge**, **fehlender Kapitaleinsatz**, **keine Pflicht zur Beschaffung von Arbeitsmitteln**, **Schulden der Arbeitskraft und nicht des Arbeitserfolgs**, **Ausf√ºhrung einfacher T√§tigkeiten** mit typischer **Weisungsabh√§ngigkeit**, **feste Arbeitszeit**, **T√§tigkeit an einem gleichbleibenden Ort**, **Urlaubsanspruch**, **Fortzahlung von Bez√ºgen im Krankheitsfall**, **Anspruch auf Sozialleistungen** und **√úberstundenverg√ºtung**.\nEine festgestellte **Arbeitnehmereigenschaft** f√ºhrt zu **Eink√ºnften aus nichtselbst√§ndiger Arbeit i. S. d. ¬ß 19 Abs. 1 S. 1 Nr. 1 EStG**."
                        },
                        {
                            question: "In Ordnung. Kommen wir zu einem anderen Thema. Was verstehen Sie unter dem Begriff ‚Äûhorizontaler‚Äú und ‚Äûvertikaler‚Äú Verlustausgleich?",
                            audio: "https://www.dropbox.com/scl/fi/9nuy33jfx9rtb3nxedqyw/k.r.3.mp3?rlkey=53wuimwunl980szgmdrjrzrfq&st=ofi2ovld&raw=1",
                            solution: "**Horizontaler Verlustausgleich** ist der **Ausgleich von Verlusten mit positiven Eink√ºnften derselben Einkunftsart**.\n**Vertikaler Verlustausgleich** ist die **Verrechnung von Verlusten mit positiven Eink√ºnften einer anderen Einkunftsart** (**¬ß 2 Abs. 3 EStG**)."
                        },
                        {
                            question: "Den Themenbereich K√∂rperschaftsteuer m√∂chte ich auch noch abpr√ºfen. Betrachten wir mal die Gr√ºndungsstadien einer GmbH bez√ºglich der K√∂rperschaftsteuerpflicht: Wann liegt was vor? Welche Rechtsformen sind gegeben? Wer muss welche Steuererkl√§rung abgeben? Was passiert mit Vorgesellschaft, die doch nicht zustande kommt?",
                            audio: "https://www.dropbox.com/scl/fi/01ihmwqwhmyva1r725j4u/k.r.4.mp3?rlkey=o5wi1xnqsyvv6gbh8qjfjfpa7&st=uz4trhwh&raw=1",
                            solution: "**Phasen der Gr√ºndung einer GmbH:**\n\n**1. Vorgr√ºndungsgesellschaft:** entsteht mit der (formlosen) **Vereinbarung √ºber die Absicht zur Gr√ºndung einer GmbH**.\nSofern diese bereits (vor Abschluss des notariellen Gesellschaftsvertrages) eine T√§tigkeit entfaltet, liegt eine **oHG oder GbR** vor (bei **Einmann-GmbH:** Einzelunternehmen), die **nicht mit der sp√§ter zu gr√ºndenden GmbH identisch** ist.\n**Steuerlich** ist eine **gesonderte und einheitliche Gewinnfeststellung** durchzuf√ºhren.\nDie **Eink√ºnfte sind den beteiligten Gr√ºndungsgesellschaftern zuzurechnen** und von diesen **anteilig zu versteuern**.\n\n**2. Vorgesellschaft (= GmbH in Gr√ºndung):** entsteht mit dem **Abschluss des notariellen Gesellschaftsvertrages**.\nSofern diese bereits t√§tig wird, **beginnt die K√∂rperschaftsteuerpflicht vor Eintragung der GmbH** in das Handelsregister.\nDies gilt jedoch nur, wenn die GmbH auch **tats√§chlich in das HR eingetragen** wird.\nUnterbleibt die Eintragung ins HR, z. B. weil die erforderlichen Unterlagen nicht vorgelegt werden, wird die sog. **unechte Vorgesellschaft steuerlich wie eine Vorgr√ºndungsgesellschaft behandelt**.\nDas bedeutet: **keine K√∂rperschaftsteuerpflicht**, die **Eink√ºnfte werden den Gr√ºndungsgesellschaftern zugerechnet**.\nDie **Gewerbesteuerpflicht** beginnt, wenn die Vorgesellschaft **nicht nur Vorbereitungshandlungen** im Rahmen der Unternehmensgr√ºndung vornimmt (**BFH v. 24.01.2017, I R 81/15, BStBl. 2017 II S. 1071**).\n\n**3. GmbH:** entsteht **zivilrechtlich mit der Eintragung in das Handelsregister (HR)**.\nSp√§testens zu diesem Zeitpunkt **beginnt die K√∂rperschaftsteuerpflicht (KSt-Pflicht)**."
                        }
                    ]
              ]
            },
            {
                name: "Dr. Baretti",
                field: " Berufsrecht, VWL, BWL",
                avatar: "B",
                image: "https://s1.directupload.eu/images/250829/zzdffhky.jpg",
                rounds: [
                    [
                        {
                            question: "K√∂nnen Sie mir zun√§chst sagen, wo das Berufsrecht der Steuerberater geregelt ist? In welchen Gesetzen oder Verordnungen finden wir die wesentlichen Vorschriften?",
                            audio: "https://www.dropbox.com/scl/fi/mwbxn2li96043tzfpjp02/K.c.1.mp3?rlkey=ncje8ud4u29hzp4s9p6q8u589&st=a7pdl6sb&raw=1",
                            solution: "Gesetzliche Grundlagen der Steuerberatung:\n‚Ä¢ **Im Steuerberatungsgesetz** sowie\n‚Ä¢ **In der Durchf√ºhrungsverordnung zum Steuerberatungsgesetz:** Diese ist formal kein Gesetz, sondern eine Rechtsverordnung.\n‚Ä¢ **Daneben in der Berufsordnung der Bundessteuerberaterkammer,** die ebenfalls kein Gesetz darstellt.\n‚Ä¢ **Des Weiteren in der Steuerberaterverg√ºtungsverordnung,** die formal kein Gesetz, sondern eine Rechtsverordnung ist."
                        },
                        {
                            question: " Was braucht man denn alles, um zur Steuerberaterin bzw. zum Steuerberater bestellt zu werden? Welche Voraussetzungen m√ºssen daf√ºr erf√ºllt sein?",
                            audio: "https://www.dropbox.com/scl/fi/hhecquyxqqmq4bhcgpseq/K.c.2.mp3?rlkey=syqdw36i9n1eo5s96786llgn2&st=0o7djh9f&raw=1",
                            solution: "F√ºr die Bestellung ist nach ¬ß 40 Steuerberatungsgesetz folgendes erforderlich:\n‚Ä¢ **Die bestandene Pr√ºfung**\n‚Ä¢ **Keine Aus√ºbung einer mit dem Beraterberuf unvereinbaren T√§tigkeit**\n‚Ä¢ **Eine Deckungszusage der Berufshaftpflichtversicherung**\n‚Ä¢ **Geordnete wirtschaftliche Verh√§ltnisse**\n‚Ä¢ **Keine gesundheitlichen Gr√ºnde,** welche der Berufsaus√ºbung dauerhaft entgegenstehen\n‚Ä¢ **Eine berufliche Niederlassung**\n‚Ä¢ **Ein F√ºhrungszeugnis** zur Vorlage bei einer Beh√∂rde"
                        },
                        {
                            question: " Dann noch eine Frage zu den amtlichen Fachberatertiteln: Welche Fachberatertitel gibt es derzeit, die von der Steuerberaterkammer offiziell verliehen werden k√∂nnen?",
                            audio: "https://www.dropbox.com/scl/fi/tgytqdhuhxsrvk439gxlw/K.c.3.mp3?rlkey=0jaz9p0dq1667rzxa9r9gm9kc&st=z1pcwcm5&raw=1",
                            solution: " Gem√§√ü der Fachberaterordnung gibt es derzeit:\n‚Ä¢ **Den Fachberater f√ºr Internationales Steuerrecht**\n‚Ä¢ **Den Fachberater f√ºr Z√∂lle und Verbrauchsteuern**"
                        },
                        {
                            question: " Und darf man den Titel ‚ÄûFachberater f√ºr Unternehmensnachfolge‚Äú eigentlich zusammen mit dem Steuerberatertitel f√ºhren, oder gibt es da Beschr√§nkungen?",
                            audio: "https://www.dropbox.com/scl/fi/k2t6wo1jqsa4dus9hilgs/K.c.4.mp3?rlkey=vmjhg5fymoa2lxc46ney7arns&st=u482py5b&raw=1",
                            solution: " **Bei der genannten Bezeichnung handelt es sich um einen vom Deutschen Steuerberaterverband vergebenen, nicht amtlichen Fachberatertitel.**\nDie **Fachbezeichnungen des Deutschen Steuerberaterverbands** d√ºrfen von Steuerberatern **werbend verwendet werden**, sofern dies **nicht im unmittelbaren r√§umlichen Zusammenhang mit der Berufsbezeichnung ‚ÄûSteuerberater‚Äú** geschieht.\nDas bedeutet, dass die **Fachberaterbezeichnungen des Deutschen Steuerberaterverbands nicht als Zusatz zur Berufsbezeichnung**, also **nicht in unmittelbarer r√§umlicher N√§he zum Steuerberatertitel**, gef√ºhrt werden d√ºrfen.\n**Nicht amtliche Fachberaterbezeichnungen** m√ºssen au√üerdem **klarstellend die Angabe der verleihenden Institution enthalten** (z. B. ‚ÄûFachberater f√ºr Unternehmensnachfolge‚Äú (**Deutscher Steuerberaterverband e.V.**)."
                        }
                    ]
                ]
            },
            {
                name: "Scherf",
                field: "Umsatzsteuer",
                avatar: "S",
                image: "https://s1.directupload.eu/images/250829/8q6up3ep.jpg",
                rounds: [
                    [
                        {
                            question: "Beginnen wir mit etwas Grundlegendem: K√∂nnen Sie mir erkl√§ren, was eine Umsatzsteuer-Identifikationsnummer ist? Wissen Sie auch, wo diese gesetzlich geregelt ist und wer sie vergibt?",
                            audio: "https://www.dropbox.com/scl/fi/r3xja24bgobb3hrp3aez1/K.d.1.mp3?rlkey=et5wh9ao43mnezfcp2hrqfgr4&st=y7aa9uzj&raw=1",
                            solution: " Die **USt-IdNr.** ist eine eindeutige Kennzeichnung eines Unternehmers innerhalb der **EU** im umsatzsteuerlichen Sinne.\nSie dient innerhalb der EU zur Abwicklung des **innergemeinschaftlichen Waren- und Dienstleistungsverkehrs** f√ºr Umsatzsteuerzwecke. Die USt-IdNr. wird daher von jedem Unternehmer ben√∂tigt, der innerhalb des Gebiets der EU am Waren- und Dienstleistungsverkehr zwischen den Mitgliedsstaaten teilnimmt.\nDie gesetzliche Fundstelle ist **¬ß 27a UStG**; dort ist geregelt, dass das **Bundeszentralamt f√ºr Steuern (BZSt)** Unternehmern i. S. d. ¬ß 2 UStG auf Antrag eine USt-IdNr. erteilt.\nDer Antrag auf Erteilung einer **USt-IdNr.** ist **schriftlich** zu stellen; in dem Antrag sind **Name, Anschrift und Steuernummer** anzugeben."
                        },
                        {
                            question: " Ich h√§tte dazu au√üerdem einen kleinen Fall f√ºr Sie: Das in Wien ans√§ssige Unternehmen A liefert ein Swimming Pool-Reinigungsger√§t f√ºr 4.000 ‚Ç¨ an den in Deutschland wohnhaften Sportarzt S, der es zu privaten Zwecken nutzt. Im Vorjahr hat A noch keine Ums√§tze ausgef√ºhrt. Im laufenden Jahr hat er nur diesen Umsatz. Was w√ºrden Sie sagen ‚Äì was liegt hier vor?",
                            audio: " https://www.dropbox.com/scl/fi/h4b28knfgxp20vs2vsv6l/k.d.2.mp3?rlkey=91fly07c432dry23jnfese6nt&st=gkvf8o1k&raw=1",
                            solution: "Es handelt sich um eine **Lieferung nach ¬ß 3 Abs. 1 UStG**, Ort **¬ß 3 Abs. 6 UStG** bei Beginn in **Wien**.\nDa das Reinigungsger√§t f√ºr den **privaten Bereich** erworben wird, liegt **kein innergemeinschaftlicher Erwerb nach ¬ß 1a UStG** vor."
                        },
                        {
                            question: "Welcher Steuersatz findet Anwendung ‚Äì der deutsche oder der √∂sterreichische? Und unter welchen Umst√§nden k√∂nnte der √∂sterreichische Unternehmer trotzdem deutsche Umsatzsteuer ausweisen?",
                            audio: "https://www.dropbox.com/scl/fi/ser10le1lrz29rqjeaehm/K.d.3.mp3?rlkey=dyuna3ufk6ifo5zxppmj8tzq8&st=518viem2&raw=1",
                            solution: "Der **√∂sterreichische Steuersatz**, da der **Ort in √ñsterreich** liegt.\nWenn der **√∂sterreichische Unternehmer** das Reinigungsger√§t zu einer **deutschen Betriebsst√§tte** bringt und von dort verschickt."
                        },
                        {
                            question: "Was hei√üt es dann f√ºr den √∂sterreichischen Unternehmer, wenn er das Reinigungsger√§t aus √ñsterreich zu seiner deutschen Betriebsst√§tte verschickt?",
                            audio: " https://www.dropbox.com/scl/fi/cca0cbx0wawz912gi7x1w/k.d.4.mp3?rlkey=917lz8b2zzvsejfwjkistnxqk&st=zkdfw6jp&raw=1",
                            solution: "Er hat einen **innergemeinschaftlichen Erwerb** in Form eines **innergemeinschaftlichen Verbringens nach ¬ß 1a Absatz 2 UStG** in **Deutschland**."
                        },
{
                            question: "Liegt hier nicht ggf. ein ¬ß 3c UStG vor, wenn das Reinigungsger√§t aus √ñsterreich geliefert wird?",
                            audio: "https://www.dropbox.com/scl/fi/a2jy3ry3wbgzhzfyrtrdx/k.d.5.mp3?rlkey=zjwzugdb0l7kfpemkkg2embd3&st=j72nd82w&raw=1",
                            solution: "Nein, der **Fernverkauf nach ¬ß 3c UStG** ist **nicht anwendbar**, weil das Reinigungsger√§t lediglich **4.000 ‚Ç¨** gekostet hat.\nDie **Umsatzschwelle von 10.000 ‚Ç¨** nach ¬ß 3c Abs. 4 UStG wurde **im Vorjahr** nicht √ºberschritten und wird **im laufenden Jahr** nicht √ºberschritten."
                        }
                    ]
                ]
            },
            {
                name: "Priller",
                field: " BilSt, UmwSt",
                avatar: "P",
                image: "https://s1.directupload.eu/images/250926/mw5zoero.jpg",
                rounds: [
                    [
                        {
                            question: "Wir kommen zu den wichtigen Dingen des Lebens, der Bilanzsteuer. Jetzt h√∂chste Konzentration bitte! Was sind denn die Bestandteile eines Jahresabschlusses?",
                            audio: "https://www.dropbox.com/scl/fi/b1ccc0gmb44tdfd2b4lte/k.h.1.mp3?rlkey=x0vdhrdqje8kgt3iltevj18bi&st=v0i83akt&raw=1",
                            solution: "Einzelabschluss- und Konzernabschluss setzen sich zusammen aus:\n‚Ä¢ **Bilanz**\n‚Ä¢ **GuV-Rechnung**\n‚Ä¢ **Anhang**\n\nDer **Konzernabschluss** wird erg√§nzt um:\n‚Ä¢ **Die Kapitalflussrechnung**\n‚Ä¢ **Die Segmentberichterstattung**\n‚Ä¢ **Den Eigenkapitalspiegel**\n\nNicht zum Jahresabschluss z√§hlt hingegen der **Lagebericht**."
                        },
                        {
                            question: "Was verstehen Sie unter Kleinstkapitalgesellschaften? Wo sind diese geregelt? Welche Erleichterungen gibt es bei Kleinstkapitalgesellschaften?",
                            audio: "https://www.dropbox.com/scl/fi/hqn27fmkgac7o9a48g5nx/k.h.2.mp3?rlkey=kd5i17lh0479xbq9oraejvb9u&st=c7r0pkyv&raw=1",
                            solution: "Die **Definition einer Kleinstkapitalgesellschaft** ist in **¬ß 267a HGB** geregelt.\nFolgende **wesentliche Erleichterungen** existieren gegen√ºber der Rechnungslegung kleiner Kapitalgesellschaften:\n‚Ä¢ **Verzicht auf die Aufstellung eines Anhangs**, wenn einige wesentliche Angaben unter der Bilanz dargestellt werden (Haftungsverh√§ltnisse, Darlehen an Mitglieder des Gesch√§ftsf√ºhrungsorgans, Bestand an eigenen Aktien der Gesellschaft),\n‚Ä¢ **Verzicht auf die Bekanntmachung/Offenlegung der Rechnungslegungsunterlagen** im Falle der Hinterlegung der Bilanz sowie der Angaben unter der Bilanz,\n‚Ä¢ **Verk√ºrzte Darstellung von Bilanz** (nur Buchstabenpositionen) und **GuV** (8 Nummern)."
                        },
                        {
                            question: "Gut, folgendes Gedankenspiel: Ein Mandant sucht Sie in Ihrer Praxis auf, hat einen handelsrechtlichen Jahresabschluss dabei und fragt Sie, wie er nun Steuern sparen kann. Es ging haupts√§chlich um die inner- und au√üerbilanziellen Wahlrechte sowie um die Frage der Veranlagung. Was raten Sie ihm?",
                            audio: "https://www.dropbox.com/scl/fi/t3h1rh8n7ps2hpmo8ikfb/k.h.3.mp3?rlkey=k835c8hkwo8v358nujrxvpwsp&st=auqm0zn7&raw=1",
                            solution: "Als **steuerliche Wahlrechte innerhalb der Bilanz** kommen z. B. in Betracht:\n‚Ä¢ **Bildung einer R√ºcklage** (¬ß 6b-R√ºcklage, RfE, Zuschussr√ºcklage)\n‚Ä¢ **Vornahme einer Teilwertabschreibung (TW-Abschreibung)** gem. **¬ß 6 Abs. 1 Nr. 1 S. 2 EStG**, **¬ß 6 Abs. 1 Nr. 2 S. 2 EStG**\n‚Ä¢ **Degressive Abschreibung** f√ºr die Jahre **2020‚Äì2022**, zwischen **01.04.2024 und 31.12.2024** sowie zwischen **01.07.2025 und 31.12.2027**\n‚Ä¢ **Neu ab 01.07.2025 (bis 31.12.2027): Degressive Abschreibung f√ºr Elektrofahrzeuge**, **¬ß 7 Abs. 2a EStG**\n‚Ä¢ **Anwendung des LiFo-Verfahrens** gem. **¬ß 6 Abs. 1 Nr. 2a EStG**\n‚Ä¢ **Bewertungsfreiheit f√ºr geringwertige Wirtschaftsg√ºter** gem. **¬ß 6 Abs. 2 EStG**, **Sammelposten** gem. **¬ß 6 Abs. 2a EStG**\n‚Ä¢ **Vornahme einer Sonderabschreibung** gem. **¬ß 7g Abs. 5 EStG**, **AK-K√ºrzung innerhalb der Bilanz** gem. **¬ß 7g Abs. 2 S. 3 EStG**\n‚Ä¢ **Sonderabschreibung f√ºr Mietwohnungsneubau** nach **¬ß 7b EStG**\n\n**Steuerliche Wahlrechte au√üerhalb der Bilanz:**\n‚Ä¢ **Vornahme eines Investitionsabzugsbetrags** gem. **¬ß 7g Abs. 1 EStG**"
                        },
                        {
                            question: "Da ich ja Umwandlungssteuerecht auch mit pr√ºfe, noch eine Frage zu Umwandlung. Welche Umwandlungsarten nach dem Umwandlungsgesetz gibt es, und wo sind diese geregelt?",
                            audio: "https://www.dropbox.com/scl/fi/4ecicrkw6eiahf498jsaw/k.h.4.mp3?rlkey=iowafzh71d800x32rnt7t43ma&st=vxurpzgc&raw=1",
                            solution: "Es gibt insgesamt **vier Umwandlungsarten**, die in **¬ß 1 Abs. 1 UmwG** genannt sind.\nDemnach k√∂nnen **Rechtstr√§ger mit Sitz im Inland** umgewandelt werden:\n**1. Durch Verschmelzung** (¬ß¬ß 2 - 122 UmwG)\n**2. Durch Spaltung** (Aufspaltung, Abspaltung, Ausgliederung) (¬ß¬ß 123 - 173 UmwG)\n**3. Durch Verm√∂gens√ºbertragung** (¬ß¬ß 174 - 189 UmwG)\n**4. Durch Formwechsel** (¬ß¬ß 190 - 304 UmwG)"
                        }
                    ]
                ]
            },
            {
                name: "Dr. Dumser",
                field: "BGB, HGB, InsO, EuropaR",
                avatar: "DD",
                image: "https://s1.directupload.eu/images/250829/f5677mip.jpg",
                rounds: [
                    [
                        {
                            question: " F√ºr meine erste Frage bitte ich Sie, nicht ins Gesetz zu schauen. K√∂nnen Sie mir aus dem Ged√§chtnis sagen, wie das B√ºrgerliche Gesetzbuch aufgebaut ist?",
                            audio: "https://www.dropbox.com/scl/fi/u2p3k8xjptqe39ltljgdp/K.k.1.mp3?rlkey=gye2p45k0d4a7ixkwqzb7xu2m&st=wxolzvxf&raw=1 ",
                            solution: " Das **BGB** ist in **5 B√ºcher** unterteilt:\n**1. Buch: Allgemeiner Teil** (¬ß¬ß 1 - 240 BGB)\n**2. Buch: Recht der Schuldverh√§ltnisse (Schuldrecht)** (¬ß¬ß 241 - 853 BGB)\n**3. Buch: Sachenrecht** (¬ß¬ß 854 - 1296 BGB)\n**4. Buch: Familienrecht** (¬ß¬ß 1297 - 1921 BGB)\n**5. Buch: Erbrecht** (¬ß¬ß 1922 - 2385 BGB)\n\nSystematisch gesehen wurden die Regelungen des **Ersten Buchs des BGB ‚Äûvor die Klammer gezogen‚Äú**. Es handelt sich also bei den ¬ß¬ß 1 - 240 BGB um **allgemeine Regelungen**, die auch im Rahmen der in den weiteren B√ºchern des BGB geregelten Rechtsgebiete Anwendung finden k√∂nnen."
                        },
                        {
                            question: " Wenn wir √ºber Personen im Zivilrecht sprechen, fallen oft Begriffe wie Rechtsf√§higkeit oder Gesch√§ftsf√§higkeit. K√∂nnen Sie mir erkl√§ren, was diese Begriffe bedeuten und wie sie sich voneinander unterscheiden?",
                            audio: "https://www.dropbox.com/scl/fi/9qdtomo62qx23k0nsf16g/K.k.2.mp3?rlkey=jehn43xazfyerjng9vkrnrqfj&st=bbc90t59&raw=1",
                            solution: " **Rechtsf√§higkeit** bedeutet die F√§higkeit, **Tr√§ger von Rechten und Pflichten** zu sein. Rechtsf√§hig sind sowohl **nat√ºrliche Personen** (vgl. ¬ß 1 BGB) als auch **juristische Personen** (vgl. ¬ß¬ß 21, 22 BGB).\n\\n**Gesch√§ftsf√§higkeit** ist die F√§higkeit rechtsf√§higer Personen, durch **eigene Willenserkl√§rungen selbst wirksam Rechte und Pflichten zu begr√ºnden** und damit Rechtsgesch√§fte abzuschlie√üen."
                        },
                        {
                            question: "Schauen wir uns den Begriff der Gesch√§ftsf√§higkeit genauer an. Wie kann man die Gesch√§ftsf√§higkeit unterteilen?",
                            audio: "https://www.dropbox.com/scl/fi/swlkvjvervy7dzeydi7ol/K.k.3.mp3?rlkey=h9lz87ttn6665d2noi4nvnafd&st=y6fxt7i5&raw=1",
                            solution: "Bei der **Gesch√§ftsf√§higkeit** ist wie folgt zu unterscheiden:\n‚Ä¢ **Unbeschr√§nkte bzw. volle Gesch√§ftsf√§higkeit:** Voll gesch√§ftsf√§hig sind nat√ºrliche Personen, die das **18. Lebensjahr vollendet** haben, also vollj√§hrig sind (¬ß 2 BGB).\n‚Ä¢ **Beschr√§nkte Gesch√§ftsf√§higkeit (¬ß¬ß 106 bis 113 BGB):** Minderj√§hrige, die das **7. Lebensjahr** (aber noch nicht das **18. Lebensjahr**) vollendet haben, sind **beschr√§nkt gesch√§ftsf√§hig**, ¬ß 106 BGB. Die Beschr√§nkung der Gesch√§ftsf√§higkeit besteht nach Ma√ügabe der ¬ß¬ß 107 - 113 BGB.\n‚Ä¢ **Partielle Gesch√§ftsf√§higkeit (¬ß¬ß 112, 113 BGB):** Soweit die **generelle Einwilligung des gesetzlichen Vertreters** im Rahmen der ¬ß¬ß 112 und 113 BGB reicht, also im Bereich des **selbst√§ndigen Betriebs eines Erwerbsgesch√§fts** oder eines **Dienst- bzw. Arbeitsverh√§ltnisses**, ist der Minderj√§hrige **partiell gesch√§ftsf√§hig**, also teilgesch√§ftsf√§hig. Das bedeutet, dass die gesetzlichen Vertreter f√ºr den Minderj√§hrigen insoweit **kein Vertretungsrecht besitzen** und der Minderj√§hrige **selbst wirksam rechtsgesch√§ftlich t√§tig werden** kann.\n‚Ä¢ **Gesch√§ftsunf√§higkeit (¬ß¬ß 104, 105 BGB):** Gesch√§ftsunf√§hig sind gem. ¬ß 104 BGB nat√ºrliche Personen, die das **7. Lebensjahr noch nicht vollendet** haben und nat√ºrliche Personen, bei denen **nicht nur vor√ºbergehend eine krankhafte St√∂rung der Geistest√§tigkeit** vorliegt, welche die **freie Willensbestimmung ausschlie√üt**."
                        },
                        {
                            question: "Ich habe folgenden Fall mit zwei Varianten mitgebracht: \nEin Jugendlicher hat sich von seinem Taschengeld 300 Euro zusammengespart. Davon kauft er sich ohne Zustimmung seiner Eltern ein Fahrrad. Was meinen Sie ‚Äì ist dieser Kaufvertrag wirksam? \n \nUnd jetzt stellen wir uns vor, das Fahrrad kostet 500 Euro. Der Minderj√§hrige zahlt 300 Euro sofort aus seinem Ersparten und vereinbart, die restlichen 200 Euro in Raten zu je 50 Euro aus seinem Taschengeld zu zahlen. Wie w√§re die rechtliche Beurteilung in diesem Fall ‚Äì bleibt es beim vorherigen Ergebnis?",
                            audio: "https://www.dropbox.com/scl/fi/2el575rjg2ezkhcw9gl2m/K.k.4.mp3?rlkey=rvgl9sj22nooogr08qbieq5fi&st=e4t0ojil&raw=1",
                            solution: "Der von dem Minderj√§hrigen geschlossene **Kaufvertrag i. S. d. ¬ß 433 BGB** ist **wirksam geschlossen** worden.\nDer Minderj√§hrige ist zwar in seiner **Gesch√§ftsf√§higkeit beschr√§nkt (¬ß 106 BGB)**. Durch den Kaufvertrag wurde der Minderj√§hrige zur **Kaufpreiszahlung verpflichtet**, weshalb der Vertrag f√ºr ihn **nicht lediglich rechtlich vorteilhaft** ist (¬ß 107 BGB).\nZu seinen Gunsten greift jedoch der **‚ÄûTaschengeldparagraph‚Äú (¬ß 110 BGB)**. Ein von dem Minderj√§hrigen **ohne Zustimmung seines gesetzlichen Vertreters** geschlossener Vertrag gilt nach **¬ß 110 BGB** ggf. **als von Anfang an wirksam**.\nDies setzt voraus, dass der Minderj√§hrige die von ihm geschuldete Leistung **mit Mitteln bewirkt**, die ihm **zu diesem Zweck oder zu freier Verf√ºgung** von dem Vertreter oder mit dessen Zustimmung von einem Dritten √ºberlassen worden sind.\nHier hat der Minderj√§hrige den **Kaufpreis vollst√§ndig aus seinem angesparten Taschengeld**, das ihm **zur freien Verf√ºgung √ºberlassen wurde**, bezahlt.\n**Folglich bedarf der Kaufvertrag zu seiner Wirksamkeit nicht mehr der Zustimmung der Eltern** des Minderj√§hrigen nach **¬ß 108 Abs. 1 BGB**.\nZahlt der Minderj√§hrige den Kaufpreis aber **nicht vollst√§ndig aus seinem angesparten Taschengeld**, greift **¬ß 110 BGB nicht**, d.h. der Vertrag gilt (zun√§chst) **nicht als von Anfang an wirksam**.\nIn der Fallvariante fehlten dem Minderj√§hrigen **200 ‚Ç¨** zur vollst√§ndigen Kaufpreiszahlung. Dementsprechend wurde der Kaufpreis **bis zur Zahlung der letzten Kaufpreisrate nicht mit Mitteln**, die dem Minderj√§hrigen **zur freien Verf√ºgung √ºberlassen wurden**, bezahlt (‚Äû‚Ä¶ wenn der Minderj√§hrige die vertragsm√§√üige Leistung mit Mitteln bewirkt ‚Ä¶‚Äú).\n**Folglich ist ¬ß 110 BGB hier nicht zu Gunsten des Minderj√§hrigen anzuwenden.**\nDer **Kaufvertrag √ºber das Fahrrad** bedarf also in der Fallvariante **bis zur Zahlung der letzten Kaufpreisrate der Zustimmung der Eltern** des Minderj√§hrigen nach **¬ß 108 Abs. 1 BGB**"
                        }
                    ]
                ]
            },
     {
                name: "Wirth",
                field: "AO, FGO, Erbschaftsteuer, Grunderwerbsteuer",
                avatar: "W",
                image: "https://s1.directupload.eu/images/250829/qoko6duz.jpg",
                rounds: [
                    [
                        {
                            question: "Ich pr√ºfe Sie heute in der Abgabenordnung. Ich w√ºrde gerne thematisch an die Fragerunde von Herrn Dr. Dumser ankn√ºpfen. K√∂nnen Sie mir zun√§chst sagen, ob ein beschr√§nkt Gesch√§ftsf√§higer √ºberhaupt eine Steuererkl√§rung abgeben kann?",
                            audio: "https://www.dropbox.com/scl/fi/pbq684l19gbmb3gk0ky68/k.m.1.mp3?rlkey=gs36uqtpuzb1362a1p5gdwy0l&st=sfiy0q2b&raw=1",
                            solution: "Nach **¬ß 149 Abs. 1 AO** bestimmen die Steuergesetze, wer zur Abgabe einer **Steuererkl√§rung verpflichtet** ist.\nHandelt es sich dabei um einen **beschr√§nkt Gesch√§ftsf√§higen**, also einen **Minderj√§hrigen**, der das **7., aber noch nicht das 18. Lebensjahr** vollendet hat (**¬ß 106 BGB**), ist danach zu differenzieren, ob er **steuerlich handlungsf√§hig** ist oder nicht.\n\n**Beschr√§nkt Gesch√§ftsf√§hige** k√∂nnen nach **¬ß 79 Abs. 1 Nr. 2 AO** steuerlich handlungsf√§hig sein, soweit sie f√ºr den Gegenstand des Verfahrens durch Vorschriften des **b√ºrgerlichen Rechts** als gesch√§ftsf√§hig oder durch Vorschriften des **√∂ffentlichen Rechts** als handlungsf√§hig anerkannt sind.\nDies ist v. a. der Fall bei **Erm√§chtigung des Minderj√§hrigen zum selbst√§ndigen Betrieb eines Erwerbsgesch√§fts** f√ºr alle Gesch√§fte, die der Betrieb mit sich bringt (**¬ß 112 BGB**), oder im Rahmen eines **Dienst- oder Arbeitsverh√§ltnisses (¬ß 113 BGB)**.\nSoweit sich nach diesen Vorschriften eine beschr√§nkte Gesch√§ftsf√§higkeit ergibt, ist der Minderj√§hrige **steuerlich handlungsf√§hig** und kann z. B. als **Inhaber eines Gewerbebetriebs** wirksam Erkl√§rungen und Anmeldungen zur **USt**, **LSt** und **GewSt** abgeben.\n\nIst ein beschr√§nkt Gesch√§ftsf√§higer nach den Vorschriften des b√ºrgerlichen oder √∂ffentlichen Rechts **nicht handlungsf√§hig**, muss der **gesetzliche Vertreter** f√ºr ihn handeln, um die steuerlichen Pflichten des beschr√§nkt Gesch√§ftsf√§higen zu erf√ºllen (**¬ß 34 Abs. 1 S. 1 AO**).\nBei Minderj√§hrigen sind regelm√§√üig die **Eltern gemeinsam gesetzliche Vertreter** (**¬ß¬ß 1626, 1629 Abs. 1 S. 2 BGB**).\nIn diesem Fall m√ºssen also die **Eltern als gesetzliche Vertreter** des beschr√§nkt Gesch√§ftsf√§higen dessen **Steuererkl√§rung abgeben**.\n\nDies gilt im √úbrigen auch f√ºr die **Abgabe einer Einkommensteuererkl√§rung** bei einem nach **¬ß 79 Abs. 1 Nr. 2 AO handlungsf√§higen Minderj√§hrigen**.\nDenn die Abgabe einer Einkommensteuererkl√§rung ist **nicht von ¬ß¬ß 112 und 113 BGB umfasst**, weil hierbei auch Angaben zu den **Sonderausgaben** oder **au√üergew√∂hnlichen Belastungen** erforderlich sind, die nichts mit dem **Erwerbsgesch√§ft i. S. d. ¬ß 112 BGB** oder dem **Dienst- oder Arbeitsverh√§ltnis i. S. d. ¬ß 113 BGB** zu tun haben."
                        },
                        {
                            question: "Ich habe Ihnen dazu einen kleinen Fall mitgebracht: Ein Minderj√§hriger betreibt in der Garage seiner Eltern einen Gewerbebetrieb und ist insoweit auch partiell gesch√§ftsf√§hig nach ¬ß 112 Abs. 1 BGB. Das Finanzamt will einen Umsatzsteuerbescheid an ihn bekanntgeben. An wen ist dieser zu adressieren?",
                            audio: "https://www.dropbox.com/scl/fi/rbcr1t4ef6a9y0lv12xz4/k.m.2.mp3?rlkey=5zaolj6yx8qpdhbj92krc90qe&st=zvy3k4xq&raw=1",
                            solution: " **Erm√§chtigt der gesetzliche Vertreter mit Genehmigung des Familiengerichts den Minderj√§hrigen zum selbst√§ndigen Betrieb eines Erwerbsgesch√§fts**, so ist der Minderj√§hrige f√ºr solche Rechtsgesch√§fte **unbeschr√§nkt gesch√§ftsf√§hig**, welche der Gesch√§ftsbetrieb mit sich bringt (**¬ß 112 Abs. 1 S. 1 BGB**).\nInsoweit ist der Minderj√§hrige auch im **Besteuerungsverfahren handlungsf√§hig** nach **¬ß 79 Abs. 1 Nr. 2 AO**.\n\nDementsprechend sind **Steuerbescheide**, die **ausschlie√ülich diesen Gesch√§ftsbetrieb betreffen**, wie hier der **Umsatzsteuerbescheid**, **nur dem Minderj√§hrigen** ‚Äì und **nicht auch dessen Eltern** als (gemeinschaftliche) gesetzliche Vertreter nach **¬ß 34 Abs. 1 S. 1 AO i.V.m. ¬ß¬ß 1626, 1629 Abs. 1 S. 2 BGB** ‚Äì bekannt zu geben (**vgl. AEAO zu ¬ß 122, Nr. 2.2.3**)."
                        },
                        {
                            question: " Der Minderj√§hrige erzielt neben dem Gewerbebetrieb noch andere Eink√ºnfte. Das Finanzamt will einen Einkommensteuerbescheid, der neben den Eink√ºnften aus Gewerbebetrieb noch andere Eink√ºnfte des Minderj√§hrigen beinhaltet, an ihn bekanntgeben. An wen ist dieser zu adressieren?",
                            audio: "https://www.dropbox.com/scl/fi/tlp8epjdc0gpknrepo74k/k.m.3.mp3?rlkey=nkiv5fh42b7847knn0z2kh964&st=aa8ldt5v&raw=1",
                            solution: "Hat der Minderj√§hrige wie hier **noch weitere Eink√ºnfte** und werden diese in die **Festsetzung einbezogen**, so kann der **Steuerbescheid nicht durch Bekanntgabe gegen√ºber dem minderj√§hrigen Steuerschuldner** wirksam werden.\n**Bekanntgabeadressat des Bescheids** sind in einem solchen Fall die **Eltern des Minderj√§hrigen** als dessen (gemeinschaftliche) **gesetzliche Vertreter** nach **¬ß 34 Abs. 1 S. 1 AO i.V.m. ¬ß¬ß 1626, 1629 Abs. 1 S. 2 BGB** (**vgl. AEAO zu ¬ß 122, Nr. 2.2.3 a.E.**)."
                        },
                        {
                            question: "Sehr sch√∂n, vielen Dank. Jetzt gehen wir zum Abschluss nochmal weg von dem Minderj√§hrigen. Z√§hlen Sie mir bitte die steuerlichen Nebenleistungen in der AO auf und sagen Sie mir, wo sie im Gesetz stehen.",
                            audio: "https://www.dropbox.com/scl/fi/q9qi6noldt5y819hjryyj/k.m.4.mp3?rlkey=lto7ejfud1h84z8d26fvbarh2&st=54ekgex4&raw=1",
                            solution: " **Steuerliche Nebenleistungen** sind nach **¬ß 3 Abs. 4 AO** u. a.:\n‚Ä¢ **Versp√§tungszuschl√§ge** nach **¬ß 152 AO**\n‚Ä¢ **Zuschl√§ge** nach **¬ß 162 Abs. 4 und 4a AO**\n‚Ä¢ **Mitwirkungsverz√∂gerungsgelder** nach **¬ß 200a Abs. 2 AO** und **Zuschl√§ge zum Mitwirkungsverz√∂gerungsgeld** nach **¬ß 200a Abs. 3 AO**\n‚Ä¢ **Zinsen** nach den **¬ß¬ß 233 ff. AO**\n‚Ä¢ **S√§umniszuschl√§ge** nach **¬ß 240 AO**\n‚Ä¢ **Zwangsgelder** nach **¬ß 329 AO**"
                        },
                        {
                            question: "Und dann noch eine letzte Frage: Was ist der Sinn und Zweck von S√§umniszuschl√§gen? Und worin liegt der Unterschied zu Versp√§tungszuschl√§gen?",
                            audio: "https://www.dropbox.com/scl/fi/94l61y9u0zmyya0447o6a/k.m.5.mp3?rlkey=o92fswdll4rwroku3bbiw1w8k&st=9d84q7v9&raw=1",
                            solution: " **S√§umniszuschl√§ge** stellen in erster Linie ein **Druckmittel zur Durchsetzung f√§lliger Steuerforderungen** dar. Sie sind aber auch eine **Gegenleistung f√ºr das Hinausschieben der Zahlung** und ein **Ausgleich f√ºr den angefallenen Verwaltungsaufwand** (**AEAO zu ¬ß 240, Nr. 5**).\n\nBei Vorliegen der **Tatbestandsmerkmale des ¬ß 152 Abs. 1 S. 1 AO** (Erkl√§rungspflicht, versp√§tete oder Nichtabgabe der Steuererkl√§rung, Verschulden) kann ein **Versp√§tungszuschlag** festgesetzt werden (**Ermessensentscheidung**).\nDas Finanzamt hat nach **pflichtgem√§√üem Ermessen (¬ß 5 AO)** zu entscheiden, ob und in welcher H√∂he ein Versp√§tungszuschlag festzusetzen ist.\n\nDie **Festsetzung des Versp√§tungszuschlags** stellt eine **gebundene Entscheidung** dar, insbesondere wenn die Steuererkl√§rung **nicht binnen 14 Monaten nach Ablauf des Kalenderjahrs** oder in den F√§llen **vorzeitiger Anforderung** pflichtwidrig nicht bis zu dem in der Anordnung bestimmten Zeitpunkt abgegeben wurde (**¬ß 152 Abs. 2 AO**).\n\nAufgrund der **pandemiebedingten Verl√§ngerung der Abgabefristen** gibt es f√ºr die **Besteuerungszeitr√§ume 2020 bis 2024** in Bezug auf **¬ß 152 Abs. 2 AO** **Sonderregelungen**, mithin f√ºr die Frage, ob ein Versp√§tungszuschlag von Amts wegen festzusetzen ist (**siehe AEAO zu ¬ß 152, Nr. 1**).\n\nDemgegen√ºber entsteht ein **S√§umniszuschlag kraft Gesetzes**, wenn eine Steuer **nicht am F√§lligkeitstag entrichtet** wird (**¬ß 240 Abs. 1 S. 1 AO**).\nDas Finanzamt hat hierbei **kein Ermessen**. Der S√§umniszuschlag wird **nicht durch Verwaltungsakt festgesetzt**, sondern **im Rahmen der Anmahnung von Steuerr√ºckst√§nden angefordert**.\nEtwaige **Unbilligkeiten** k√∂nnen durch **Erlass der S√§umniszuschl√§ge** beseitigt werden (**¬ß 227 AO**)."
                        }
                    ]
                ]
            }
        ];

        // Initialize examiners with randomly selected rounds
        let examiners = [];

        let currentExaminerIndex = 0;
        let currentQuestionIndex = 0;
        let preparationTimer;
        let preparationTimeLeft = 1800; // 30 minutes in seconds
        
        // Presentation timer variables
        let presentationTimer;
        let presentationTimeElapsed = 0;
        let isPresentationTimerRunning = false;
        
        let examResponses = [];

        // Function to initialize examiners with random rounds
        function initializeExaminers() {
            examiners = examinerData.map(examinerTemplate => {
                // Select a random round (0-4) for each examiner
                const randomRoundIndex = Math.floor(Math.random() * examinerTemplate.rounds.length);
                const selectedRound = examinerTemplate.rounds[randomRoundIndex];
                
                return {
                    name: examinerTemplate.name,
                    field: examinerTemplate.field,
                    avatar: examinerTemplate.avatar,
                    image: examinerTemplate.image,
                    questions: selectedRound
                };
            });
            
            console.log('Pr√ºfer mit zuf√§lligen Runden initialisiert:', examiners.map(e => e.name));
        }

        function generateRandomTopics() {
            const selectedTopics = [];
            
            // Gruppe 1: Grundlagen des Steuerrechts (erstes Thema)
            const group1Categories = ["Privatrecht", "Finanzgerichtsordnung", "Abgabenordnung"];
            const randomGroup1Category = group1Categories[Math.floor(Math.random() * group1Categories.length)];
            const group1Topics = topicsByCategory[randomGroup1Category];
            const selectedGroup1Topic = group1Topics[Math.floor(Math.random() * group1Topics.length)];
            selectedTopics.push({
                topic: selectedGroup1Topic,
                category: randomGroup1Category
            });
            
            // Gruppe 2: Ertragsteuern (zweites Thema)
            const group2Categories = ["Einkommensteuer", "Bilanzsteuer", "K√∂rperschaftsteuer"];
            const randomGroup2Category = group2Categories[Math.floor(Math.random() * group2Categories.length)];
            const group2Topics = topicsByCategory[randomGroup2Category];
            const selectedGroup2Topic = group2Topics[Math.floor(Math.random() * group2Topics.length)];
            selectedTopics.push({
                topic: selectedGroup2Topic,
                category: randomGroup2Category
            });
            
            // Gruppe 3: Spezialgebiete (drittes Thema)
            const group3Categories = ["Umsatzsteuer", "Umwandlungssteuer", "Internationales Steuerrecht", "Berufsrecht"];
            const randomGroup3Category = group3Categories[Math.floor(Math.random() * group3Categories.length)];
            const group3Topics = topicsByCategory[randomGroup3Category];
            const selectedGroup3Topic = group3Topics[Math.floor(Math.random() * group3Topics.length)];
            selectedTopics.push({
                topic: selectedGroup3Topic,
                category: randomGroup3Category
            });
            
            return selectedTopics;
        }

        function selectTopic(topicData, buttonElement) {
            console.log('Thema ausgew√§hlt:', topicData);
            selectedTopicText = topicData.topic;
            
            const selectedTopicElement = document.getElementById('selectedTopic');
            if (selectedTopicElement) {
                selectedTopicElement.textContent = `"${topicData.topic}"`;
            }
            
            // Update button states
            document.querySelectorAll('.topic-button').forEach(btn => {
                btn.classList.remove('selected');
                btn.style.background = 'white';
                btn.style.borderColor = '#d1d5db';
            });
            
            if (buttonElement) {
                buttonElement.classList.add('selected');
                buttonElement.style.background = 'linear-gradient(180deg, rgba(111, 172, 255, 0.1), rgba(170, 207, 255, 0.1))';
                buttonElement.style.borderColor = '#6facff';
            }
            
            // Enable proceed button
            const proceedButton = document.getElementById('proceedButton');
            if (proceedButton) {
                proceedButton.disabled = false;
                proceedButton.style.opacity = '1';
                proceedButton.style.cursor = 'pointer';
                console.log('Button aktiviert');
            }
        }

function displayTopicOptions() {
  const topicOptions = document.getElementById('topicOptions');
  if (!topicOptions) {
    console.error('topicOptions Element nicht gefunden');
    return;
  }

  topicOptions.innerHTML = '';

  // Alle Kategorien & Themen exakt so ausgeben, wie sie in topicsByCategory stehen
  Object.entries(topicsByCategory).forEach(([rawCategory, topics]) => {
    const category = (rawCategory || '').trim(); // toleranter Umgang mit Leerzeichen im Key

    if (!Array.isArray(topics) || topics.length === 0) return;

    topics.forEach((topic, index) => {
      const topicButton = document.createElement('div');
      topicButton.className = 'topic-button p-4 border-2 border-gray-300 rounded-lg cursor-pointer transition-all hover:border-blue-400';
      topicButton.style.background = 'white';
      topicButton.onclick = () => selectTopic({ topic, category }, topicButton);

      topicButton.innerHTML = `
        <div class="flex items-start">
          <span class="w-8 h-8 text-white rounded-full flex items-center justify-center text-sm font-bold mr-3 flex-shrink-0" style="background: #6facff;">
            ${index + 1}
          </span>
          <div class="flex-1">
            <div class="text-gray-800 font-medium mb-1">${topic}</div>
            <div class="text-xs px-2 py-1 rounded-full inline-block" style="background-color: rgba(111, 172, 255, 0.2); color: #6facff;">
              ${category}
            </div>
          </div>
        </div>
      `;

      topicOptions.appendChild(topicButton);
    });
  });
}
        function startExam() {
            console.log('startExam() aufgerufen');
            
            // Stop welcome audio
            stopAllAudio();
            
            const welcomeScreen = document.getElementById('welcomeScreen');
            const preparationPhase = document.getElementById('preparationPhase');
            
            if (welcomeScreen) welcomeScreen.classList.add('hidden');
            if (preparationPhase) preparationPhase.classList.remove('hidden');
            
            // Generate and display topics immediately
            displayTopicOptions();
            startPreparationTimer();
        }

        function startPreparationTimer() {
            preparationTimer = setInterval(() => {
                preparationTimeLeft--;
                updateTimerDisplay();
                
                if (preparationTimeLeft <= 0) {
                    clearInterval(preparationTimer);
                    skipToExam();
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(preparationTimeLeft / 60);
            const seconds = preparationTimeLeft % 60;
            const timeString = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            document.getElementById('timerDisplay').textContent = timeString;
            
            // Update circle progress
            const totalTime = 1800;
            const progress = ((totalTime - preparationTimeLeft) / totalTime) * 360;
            document.getElementById('timerCircle').style.background = 
                `conic-gradient(#ef4444 ${progress}deg, #f3f4f6 ${progress}deg)`;
        }

        function skipToExam() {
            console.log('skipToExam() aufgerufen');
            
            // Check if topic is selected
            if (!selectedTopicText) {
                alert('Bitte w√§hlen Sie zun√§chst ein Thema aus!');
                return;
            }
            
            if (preparationTimer) {
                clearInterval(preparationTimer);
            }
            
            // Stop all audio before phase change
            stopAllAudio();
            
            const preparationPhase = document.getElementById('preparationPhase');
            const presentationPhase = document.getElementById('presentationPhase');
            const phaseIndicator = document.getElementById('phaseIndicator');
            
            if (preparationPhase) preparationPhase.classList.add('hidden');
            if (presentationPhase) presentationPhase.classList.remove('hidden');
            if (phaseIndicator) phaseIndicator.textContent = 'Vortrag';
            
            // Auto-play presentation audio after a short delay
            setTimeout(() => {
                const presentationAudio = document.getElementById('presentationAudio');
                if (presentationAudio) {
                    presentationAudio.play().catch(e => console.log('Autoplay prevented:', e));
                }
            }, 500);
        }

        function setupExaminerGrid() {
            const grid = document.getElementById('examinerGrid');
            grid.innerHTML = '';
            
            examiners.forEach((examiner, index) => {
                const examinerCard = document.createElement('div');
                examinerCard.className = `text-center p-3 rounded-lg border-2 transition-colors ${
                    index === currentExaminerIndex ? 'border-gray-200' : 'border-gray-200'
                }`;
                
                if (index === currentExaminerIndex) {
                    examinerCard.style.background = 'linear-gradient(180deg, rgba(111, 172, 255, 0.1), rgba(170, 207, 255, 0.1))';
                    examinerCard.style.borderColor = '#6facff';
                }
                
                let avatarContent = '';
                if (examiner.image) {
                    avatarContent = `
                        <img src="${examiner.image}" alt="${examiner.name}" class="w-full h-full object-cover rounded-full" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                        <div class="w-full h-full flex items-center justify-center text-white text-sm font-bold rounded-full" style="background: linear-gradient(180deg, #6facff, #aacfff); display: none;">${examiner.avatar}</div>
                    `;
                } else {
                    avatarContent = examiner.avatar;
                }
                
                examinerCard.innerHTML = `
                    <div class="examiner-avatar" style="width: 50px; height: 50px; font-size: 16px; margin: 0 auto 8px; overflow: hidden;">
                        ${avatarContent}
                    </div>
                    <div class="text-sm font-medium text-gray-800">${examiner.name}</div>
                    <div class="text-xs text-gray-600">${examiner.field}</div>
                `;
                
                grid.appendChild(examinerCard);
            });
        }

        function finishPresentation() {
            // Store presentation response
            examResponses.push({
                examiner: 'Dr. Dumser',
                question: 'Vortrag',
                answer: 'Vortrag √ºber Chat-Widget gehalten'
            });
            
            // Stop all audio before phase change
            stopAllAudio();
            
            // Move to transition phase
            const presentationPhase = document.getElementById('presentationPhase');
            const transitionPhase = document.getElementById('transitionPhase');
            const phaseIndicator = document.getElementById('phaseIndicator');
            
            if (presentationPhase) presentationPhase.classList.add('hidden');
            if (transitionPhase) transitionPhase.classList.remove('hidden');
            if (phaseIndicator) phaseIndicator.textContent = '√úbergang';
            
            // Auto-play transition audio after a short delay
            setTimeout(() => {
                const transitionAudio = document.getElementById('transitionAudio');
                if (transitionAudio) {
                    transitionAudio.play().catch(e => console.log('Autoplay prevented:', e));
                }
            }, 500);
        }

        function startExamQuestions() {
            // Stop all audio before phase change
            stopAllAudio();
            
            // Move to exam phase
            const transitionPhase = document.getElementById('transitionPhase');
            const examPhase = document.getElementById('examPhase');
            const phaseIndicator = document.getElementById('phaseIndicator');
            
            if (transitionPhase) transitionPhase.classList.add('hidden');
            if (examPhase) examPhase.classList.remove('hidden');
            if (phaseIndicator) phaseIndicator.textContent = 'Pr√ºfungsgespr√§ch';
            
            setupExaminerGrid();
            displayCurrentQuestion();
            
            // Auto-play first question audio after a short delay
            setTimeout(() => {
                const drSchmidtAudio = document.getElementById('drSchmidtAudio');
                if (drSchmidtAudio) {
                    drSchmidtAudio.play().catch(e => console.log('Autoplay prevented:', e));
                }
            }, 500);
        }

        function displayCurrentQuestion() {
            const examiner = examiners[currentExaminerIndex];
            const questionData = examiner.questions[currentQuestionIndex];
            const question = questionData.question;
            const audioUrl = questionData.audio;
            
            // Update examiner info
            const avatarElement = document.getElementById('currentExaminerAvatar');
            if (examiner.image) {
                avatarElement.innerHTML = `<img src="${examiner.image}" alt="${examiner.name}" class="w-full h-full object-cover rounded-full" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                <div class="w-full h-full flex items-center justify-center text-white text-2xl font-bold rounded-full" style="background: linear-gradient(180deg, #6facff, #aacfff); display: none;">${examiner.avatar}</div>`;
            } else {
                avatarElement.textContent = examiner.avatar;
            }
            
            document.getElementById('currentExaminerName').textContent = examiner.name;
            document.getElementById('currentExaminerField').textContent = `Fachbereich: ${examiner.field}`;
            document.getElementById('examinerProgress').textContent = `${currentExaminerIndex + 1} / ${examiners.length}`;
            
            // Update question
            document.getElementById('currentQuestion').textContent = question;
            
            // Update audio source and show player
            const audioPlayer = document.getElementById('audioPlayer');
            const drSchmidtAudio = document.getElementById('drSchmidtAudio');
            
            if (audioPlayer && drSchmidtAudio && audioUrl) {
                drSchmidtAudio.src = audioUrl;
                audioPlayer.classList.remove('hidden');
                
                // Auto-play the audio after a short delay
                setTimeout(() => {
                    drSchmidtAudio.play().catch(e => console.log('Autoplay prevented:', e));
                }, 500);
            }
            
            // Show appropriate response area
            if (examiner.name === 'Dr. Baretti') {
                document.getElementById('chatWidget').classList.remove('hidden');
                document.getElementById('standardResponse').classList.add('hidden');
            } else {
                document.getElementById('chatWidget').classList.add('hidden');
                document.getElementById('standardResponse').classList.remove('hidden');
            }
            
            setupExaminerGrid();
        }

        function nextQuestion() {
            // Store current response
            let response = '';
            if (examiners[currentExaminerIndex].name === 'Dr. Baretti') {
                response = document.getElementById('barettiResponse').value || 'Keine Antwort eingegeben';
            } else {
                response = document.getElementById('currentResponse').value || 'Keine Antwort eingegeben';
            }
            
            examResponses.push({
                examiner: examiners[currentExaminerIndex].name,
                question: examiners[currentExaminerIndex].questions[currentQuestionIndex].question,
                answer: response
            });
            
            // Stop current audio
            stopAllAudio();
            
            // Show solution phase
            showSolution();
        }

        function showSolution() {
            const examiner = examiners[currentExaminerIndex];
            const questionData = examiner.questions[currentQuestionIndex];
            const lastResponse = examResponses[examResponses.length - 1];
            
            // Hide exam phase, show solution phase
            document.getElementById('examPhase').classList.add('hidden');
            document.getElementById('solutionPhase').classList.remove('hidden');
            setPhase('L√∂sung');
            
            // Update solution examiner info
            const solutionAvatarElement = document.getElementById('solutionExaminerAvatar');
            if (examiner.image) {
                solutionAvatarElement.innerHTML = `<img src="${examiner.image}" alt="${examiner.name}" class="w-full h-full object-cover rounded-full" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                <div class="w-full h-full flex items-center justify-center text-white text-2xl font-bold rounded-full" style="background: linear-gradient(180deg, #6facff, #aacfff); display: none;">${examiner.avatar}</div>`;
            } else {
                solutionAvatarElement.textContent = examiner.avatar;
            }
            
            document.getElementById('solutionExaminerName').textContent = examiner.name;
            document.getElementById('solutionExaminerField').textContent = `Fachbereich: ${examiner.field}`;
            document.getElementById('solutionExaminerProgress').textContent = `${currentExaminerIndex + 1} / ${examiners.length}`;
            
            // Update solution content
            document.getElementById('solutionQuestion').textContent = questionData.question;
            document.getElementById('solutionYourAnswer').textContent = lastResponse.answer;
            
            // Format and display model solution
            const solutionText = questionData.solution || 'Musterl√∂sung wird geladen...';
            const formattedSolution = formatSolution(solutionText);
            document.getElementById('solutionModelAnswer').innerHTML = formattedSolution;
            
            // Setup solution examiner grid
            setupSolutionExaminerGrid();
        }

        function formatSolution(solutionText) {
            // Convert markdown-like formatting to HTML
            let formatted = solutionText
                .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                .replace(/\n‚Ä¢ /g, '<li>')
                .replace(/\n/g, '<br>');
            
            // Wrap list items in ul tags
            if (formatted.includes('<li>')) {
                formatted = formatted.replace(/(<li>.*?)(<br>|$)/g, '$1</li>');
                formatted = formatted.replace(/(<li>.*?<\/li>)/g, '<ul class="list-disc list-inside space-y-2 mt-2">$1</ul>');
                formatted = formatted.replace(/<\/ul><ul class="list-disc list-inside space-y-2 mt-2">/g, '');
            }
            
            return formatted;
        }

        function setupSolutionExaminerGrid() {
            const grid = document.getElementById('solutionExaminerGrid');
            grid.innerHTML = '';
            
            examiners.forEach((examiner, index) => {
                const examinerCard = document.createElement('div');
                examinerCard.className = `text-center p-3 rounded-lg border-2 transition-colors ${
                    index === currentExaminerIndex ? 'border-gray-200' : 'border-gray-200'
                }`;
                
                if (index === currentExaminerIndex) {
                    examinerCard.style.background = 'linear-gradient(180deg, rgba(111, 172, 255, 0.1), rgba(170, 207, 255, 0.1))';
                    examinerCard.style.borderColor = '#6facff';
                }
                
                let avatarContent = '';
                if (examiner.image) {
                    avatarContent = `
                        <img src="${examiner.image}" alt="${examiner.name}" class="w-full h-full object-cover rounded-full" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                        <div class="w-full h-full flex items-center justify-center text-white text-sm font-bold rounded-full" style="background: linear-gradient(180deg, #6facff, #aacfff); display: none;">${examiner.avatar}</div>
                    `;
                } else {
                    avatarContent = examiner.avatar;
                }
                
                examinerCard.innerHTML = `
                    <div class="examiner-avatar" style="width: 50px; height: 50px; font-size: 16px; margin: 0 auto 8px; overflow: hidden;">
                        ${avatarContent}
                    </div>
                    <div class="text-sm font-medium text-gray-800">${examiner.name}</div>
                    <div class="text-xs text-gray-600">${examiner.field}</div>
                `;
                
                grid.appendChild(examinerCard);
            });
        }

        function continueToNextQuestion() {
            console.log('continueToNextQuestion aufgerufen');
            console.log('Aktueller Pr√ºfer:', currentExaminerIndex, 'Aktuelle Frage:', currentQuestionIndex);
            
            // Clear response fields
            if (document.getElementById('barettiResponse')) {
                document.getElementById('barettiResponse').value = '';
            }
            if (document.getElementById('currentResponse')) {
                document.getElementById('currentResponse').value = '';
            }
            
            // Move to next question or examiner
            currentQuestionIndex++;
            console.log('Nach Erh√∂hung - Frage:', currentQuestionIndex, 'von', examiners[currentExaminerIndex].questions.length);
            
            if (currentQuestionIndex >= examiners[currentExaminerIndex].questions.length) {
                // Move to next examiner
                currentExaminerIndex++;
                currentQuestionIndex = 0;
                console.log('Wechsel zu Pr√ºfer:', currentExaminerIndex, 'von', examiners.length);
                
                if (currentExaminerIndex >= examiners.length) {
                    // Exam finished
                    console.log('Pr√ºfung beendet');
                    showResults();
                    return;
                }
            }
            
            // Stop all audio before phase change
            stopAllAudio();
            
            // Hide solution phase, show exam phase
            document.getElementById('solutionPhase').classList.add('hidden');
            document.getElementById('examPhase').classList.remove('hidden');
            setPhase('Pr√ºfungsgespr√§ch');
            
            console.log('Zeige neue Frage an');
            displayCurrentQuestion();
        }

        function backToQuestion() {
            // Hide solution phase, show exam phase
            document.getElementById('solutionPhase').classList.add('hidden');
            document.getElementById('examPhase').classList.remove('hidden');
            setPhase('Pr√ºfungsgespr√§ch');        }

        function showResults() {
            // Stop all audio
            stopAllAudio();
            
            const solutionPhase = document.getElementById('solutionPhase');
            const resultsPhase = document.getElementById('resultsPhase');
            const phaseIndicator = document.getElementById('phaseIndicator');
            
            if (solutionPhase) solutionPhase.classList.add('hidden');
            if (resultsPhase) resultsPhase.classList.remove('hidden');
            if (phaseIndicator) phaseIndicator.textContent = 'Ergebnis';
        }

        function restartExam() {
            // Reset all variables
            currentExaminerIndex = 0;
            currentQuestionIndex = 0;
            selectedTopicText = '';
            examResponses = [];
            preparationTimeLeft = 1800;
            presentationTimeElapsed = 0;
            isPresentationTimerRunning = false;
            
            // Clear timers
            if (preparationTimer) clearInterval(preparationTimer);
            if (presentationTimer) clearInterval(presentationTimer);
            
            // Stop all audio
            stopAllAudio();
            
            // Reinitialize examiners
            initializeExaminers();
            
            // Show welcome screen
            document.getElementById('welcomeScreen').classList.remove('hidden');
            document.getElementById('preparationPhase').classList.add('hidden');
            document.getElementById('presentationPhase').classList.add('hidden');
            document.getElementById('transitionPhase').classList.add('hidden');
            document.getElementById('examPhase').classList.add('hidden');
            document.getElementById('solutionPhase').classList.add('hidden');
            document.getElementById('resultsPhase').classList.add('hidden');
            
            // Reset phase indicator
            setPhase('Vorbereitung');
        }

        function clearResponse() {
            document.getElementById('currentResponse').value = '';
        }

        function clearBarettiResponse() {
            document.getElementById('barettiResponse').value = '';
        }

        function showSampleSolution() {
            // Get the appropriate solution (specific or general)
            let solutionData = presentationSolutions.general;
            
            // Check if there's a specific solution for the selected topic
            if (presentationSolutions.specific[selectedTopicText]) {
                solutionData = presentationSolutions.specific[selectedTopicText];
            }
            
            // Create modal overlay
            const modalOverlay = document.createElement('div');
            modalOverlay.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4';
            modalOverlay.onclick = (e) => {
                if (e.target === modalOverlay) {
                    document.body.removeChild(modalOverlay);
                }
            };
            
            // Create modal content
            const modalContent = document.createElement('div');
            modalContent.className = 'bg-white rounded-2xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto';
            
            // Generate HTML for solution sections
            function generateSectionHTML(section) {
                const pointsHTML = section.points.map(point => `<li>${point}</li>`).join('');
                return `
                    <div class="bg-gray-50 rounded-lg p-4">
                        <h4 class="text-lg font-semibold text-gray-800 mb-3">${section.title}</h4>
                        <ul class="list-disc list-inside space-y-2 text-gray-700">
                            ${pointsHTML}
                        </ul>
                    </div>
                `;
            }
            
            modalContent.innerHTML = `
                <div class="p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-2xl font-bold text-gray-800">Musterl√∂sung f√ºr Ihren Vortrag</h3>
                        <button onclick="document.body.removeChild(this.closest('.fixed'))" class="text-gray-500 hover:text-gray-700 text-2xl font-bold">&times;</button>
                    </div>
                    
                    <div class="bg-blue-50 rounded-lg p-4 mb-6">
                        <h4 class="text-lg font-semibold text-blue-800 mb-2">Gew√§hltes Thema:</h4>
                        <p class="text-blue-700">"${selectedTopicText}"</p>
                    </div>
                    
                    <div class="space-y-6">
                        ${generateSectionHTML(solutionData.introduction)}
                        ${generateSectionHTML(solutionData.mainPart)}
                        ${generateSectionHTML(solutionData.conclusion)}
                    </div>
                    
                    <div class="mt-6 text-center">
                        <button onclick="document.body.removeChild(this.closest('.fixed'))" class="text-white px-6 py-2 rounded-lg font-medium transition-all" style="background: linear-gradient(180deg, #6facff, #aacfff); box-shadow: 0 2px 4px rgba(111, 172, 255, 0.3);" onmouseover="this.style.transform='translateY(-1px)'" onmouseout="this.style.transform='translateY(0)'">
                            Schlie√üen
                        </button>
                    </div>
                </div>
            `;
            
            modalOverlay.appendChild(modalContent);
            document.body.appendChild(modalOverlay);
        }

        // Presentation timer functions
        function startPresentationTimer() {
            if (!isPresentationTimerRunning) {
                isPresentationTimerRunning = true;
                presentationTimer = setInterval(() => {
                    presentationTimeElapsed++;
                    updatePresentationTimerDisplay();
                }, 1000);
                
                document.getElementById('startTimerBtn').disabled = true;
                document.getElementById('pauseTimerBtn').disabled = false;
            }
        }

        function pausePresentationTimer() {
            if (isPresentationTimerRunning) {
                isPresentationTimerRunning = false;
                clearInterval(presentationTimer);
                
                document.getElementById('startTimerBtn').disabled = false;
                document.getElementById('pauseTimerBtn').disabled = true;
            }
        }

        function resetPresentationTimer() {
            isPresentationTimerRunning = false;
            clearInterval(presentationTimer);
            presentationTimeElapsed = 0;
            updatePresentationTimerDisplay();
            
            document.getElementById('startTimerBtn').disabled = false;
            document.getElementById('pauseTimerBtn').disabled = true;
        }

        function updatePresentationTimerDisplay() {
            const minutes = Math.floor(presentationTimeElapsed / 60);
            const seconds = presentationTimeElapsed % 60;
            const timeString = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            document.getElementById('presentationTimer').textContent = timeString;
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', function() {
            initializeExaminers();
            console.log('Seite geladen, Pr√ºfer initialisiert');
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'98553e7ab01d1dbb',t:'MTc1ODkxNTc0Mi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>

